"use strict";(self.webpackChunkpromptmanager=self.webpackChunkpromptmanager||[]).push([[6222],{87843:function(e,n,t){t.d(n,{r:function(){return u}});var r,i=t(7276),a=["title","titleId"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o.apply(this,arguments)}function l(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function s(e,n){var t=e.title,s=e.titleId,u=l(e,a);return i.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",className:"iconify iconify--simple-icons",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",ref:n,"aria-labelledby":s},u),t?i.createElement("title",{id:s},t):null,r||(r=i.createElement("path",{fill:"currentColor",d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418Z"})))}var u=i.forwardRef(s);t.p},79613:function(e,n,t){t.d(n,{r:function(){return u}});var r,i=t(7276),a=["title","titleId"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o.apply(this,arguments)}function l(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function s(e,n){var t=e.title,s=e.titleId,u=l(e,a);return i.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",className:"iconify iconify--simple-icons",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",ref:n,"aria-labelledby":s},u),t?i.createElement("title",{id:s},t):null,r||(r=i.createElement("path",{fill:"currentColor",d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zm1.271 0a2.527 2.527 0 0 1 2.521-2.52a2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zm0 1.271a2.528 2.528 0 0 1 2.521 2.521a2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zm10.122 2.521a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zm-1.268 0a2.528 2.528 0 0 1-2.523 2.521a2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zm-2.523 10.122a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zm0-1.268a2.527 2.527 0 0 1-2.52-2.523a2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"})))}var u=i.forwardRef(s);t.p},95462:function(e,n,t){t.d(n,{r:function(){return c}});var r,i,a=t(7276),o=["title","titleId"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},l.apply(this,arguments)}function s(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function u(e,n){var t=e.title,u=e.titleId,c=s(e,o);return a.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",viewBox:"0 0 24 24",id:"twilio",ref:n,"aria-labelledby":u},c),t?a.createElement("title",{id:u},t):null,r||(r=a.createElement("path",{d:"M0,12c0,6.64,5.359,12,12,12s12-5.36,12-12c0-6.641-5.36-12-12-12C5.381-0.008,0.008,5.352,0,11.971V12z M3.199,12c-0.014-4.846,3.904-8.786,8.75-8.801H12c4.847-0.014,8.786,3.904,8.801,8.75V12c0.015,4.847-3.904,8.786-8.75,8.801H12c-4.846,0.015-8.786-3.904-8.801-8.75V12z"})),i||(i=a.createElement("path",{d:"M14.959 17.44c1.361 0 2.481-1.12 2.481-2.48 0-1.359-1.12-2.48-2.481-2.479-1.359 0-2.479 1.12-2.479 2.479C12.486 16.326 13.592 17.432 14.959 17.44zM14.959 11.52c1.361 0 2.481-1.12 2.481-2.479 0-1.361-1.12-2.481-2.481-2.481-1.359 0-2.479 1.12-2.479 2.481C12.487 10.407 13.593 11.513 14.959 11.52zM9.042 17.44c1.359 0 2.479-1.12 2.479-2.48 0-1.359-1.121-2.48-2.479-2.479-1.361 0-2.481 1.12-2.481 2.479C6.567 16.327 7.674 17.433 9.042 17.44zM9.042 11.52c1.359 0 2.479-1.12 2.479-2.479 0-1.361-1.121-2.481-2.479-2.481-1.361 0-2.481 1.12-2.481 2.481C6.567 10.408 7.675 11.513 9.042 11.52z"})))}var c=a.forwardRef(u);t.p},76222:function(e,n,t){t.d(n,{p:function(){return J}});var r=t(4942),i=t(1413),a=t(29439),o=t(88554),l=t(88846),s=t(85535),u=t(66161),c=t(7458),d=t(90111),p=t(44390),f=t(31342),m=t(20495),x=t(94053),h=t(73462),g=t(65173),v=t(58735),Z=t(6334),j=t(20888),b=t(34867),_=t(9340),w=t(62154),y=t(71516),O=t(29166),q=t(24578),S=t(34034),k=t(8568),z=t(4550),A=t.n(z),P=t(7276),M=t(12526),C=t(9229),E=t(72314),R=t.n(E),I=t(87843),B=t(79613),T=t(95462),H=t(25926),N=t(3442),L=t(9633),V=(t(1004),t(35007),t(45263)),F={},Y=function(e){if(F[e])return F[e];if(e.startsWith("Slackbot"))return F[e]="Slack",F[e];if(e.startsWith("Discord"))return F[e]="Discord",F[e];var n=new(R())(e),t=n.getOS(),r=n.getBrowser();return F[e]="".concat(r.name," / ").concat(t.name),F[e]},D=[{id:"created_at",label:"Time",format:function(e){return A().utc(e).local().fromNow()}},{id:"name",label:"Name"},{id:"session_key",label:"Session"},{id:"request_user_email",label:"User"},{id:"request_location",label:"Location"},{id:"response_time",label:"Time",format:function(e){return"".concat(e.toFixed(2),"s")}},{id:"response_status",label:"Status"}],U=function(e){var n=e.label,t=e.value,r=e.content_type,i=void 0===r?null:r,a=(0,P.useMemo)((function(){if("text/markdown"===i)return(0,V.jsx)(L.Z,{children:t});if("application/json"===i){var e=t.replace(/'/g,'"').replace(/None/g,"null").replace(/True/g,"true").replace(/False/g,"false");try{e=JSON.stringify(JSON.parse(e),null,2)}catch(n){}return(0,V.jsx)(M.ZP,{mode:"json",theme:"chrome",value:e,readOnly:!0,width:"100%",height:"200px",showPrintMargin:!1,showLineNumbers:!1,showGutter:!1,onLoad:function(e){var n=function(){var n=e.getSession().getLength()*e.renderer.lineHeight,t=Math.min(n,200);e.container.style.height="".concat(t,"px"),e.resize()};e.setOption("showGutter",!1),e.getSession().on("change",n),n()}})}return(0,V.jsx)(s.Z,{variant:"body2",sx:{whiteSpace:"pre-wrap",wordBreak:"break-all",color:"#1b5c85"},children:t})}),[t,i]);return(0,V.jsxs)(u.Z,{children:[(0,V.jsx)(s.Z,{variant:"caption",style:{fontWeight:600,color:"gray"},children:n}),a]})},W=function(e){var n=e.apps,t=e.sessions,r=e.users,o=e.onFilter,l=(0,P.useState)(null),s=(0,a.Z)(l,2),m=s[0],x=s[1],h=(0,P.useState)(null),g=(0,a.Z)(h,2),v=g[0],Z=g[1],j=(0,P.useState)(null),b=(0,a.Z)(j,2),_=b[0],w=b[1];return(0,V.jsxs)(c.Z,{direction:"row",spacing:1,sx:{padding:"10px 0"},children:[(0,V.jsx)(d.Z,{id:"app-selector",sx:{width:250},options:n,autoHighlight:!0,getOptionLabel:function(e){return e.name||""},renderInput:function(e){return(0,V.jsx)(p.Z,(0,i.Z)((0,i.Z)({},e),{},{size:"small",label:"App",inputProps:(0,i.Z)((0,i.Z)({},e.inputProps),{},{autoComplete:"new-password"})}))},renderOption:function(e,n){return(0,V.jsx)(u.Z,(0,i.Z)((0,i.Z)({component:"li",sx:{fontSize:14,"& > span":{marginRight:2,fontSize:18}}},e),{},{children:n.name}))},onChange:function(e,n){x(n)}}),(0,V.jsx)(d.Z,{id:"session-selector",sx:{width:300},options:t,autoHighlight:!0,getOptionLabel:function(e){return e.name||""},renderInput:function(e){return(0,V.jsx)(p.Z,(0,i.Z)((0,i.Z)({},e),{},{size:"small",label:"Session",inputProps:(0,i.Z)((0,i.Z)({},e.inputProps),{},{autoComplete:"new-password"})}))},renderOption:function(e,n){return(0,V.jsx)(u.Z,(0,i.Z)((0,i.Z)({component:"li",sx:{fontSize:14,"& > span":{marginRight:2,fontSize:18}}},e),{},{children:n.name}))},isOptionEqualToValue:function(e,n){return e.name===n.name},onChange:function(e,n){Z(n)}}),(0,V.jsx)(d.Z,{id:"user-selector",sx:{width:250},options:r,autoHighlight:!0,getOptionLabel:function(e){return e.name||""},renderInput:function(e){return(0,V.jsx)(p.Z,(0,i.Z)((0,i.Z)({},e),{},{size:"small",label:"User",inputProps:(0,i.Z)((0,i.Z)({},e.inputProps),{},{autoComplete:"new-password"})}))},renderOption:function(e,n){return(0,V.jsx)(u.Z,(0,i.Z)((0,i.Z)({component:"li",sx:{fontSize:14,"& > span":{marginRight:2,fontSize:18}}},e),{},{children:n.name}))},isOptionEqualToValue:function(e,n){return e.name===n.name},onChange:function(e,n){w(n)}}),(0,V.jsx)(f.Z,{type:"primary",sx:{textTransform:"none"},variant:"contained",onClick:function(){o({app_uuid:(null===m||void 0===m?void 0:m.uuid)||null,session_key:(null===v||void 0===v?void 0:v.name)||null,request_user_email:(null===_||void 0===_?void 0:_.name)||null,endpoint_uuid:null})},children:"Filter"})]})};function J(e){var n=e.filter,t=e.filteredColumns,s=e.showFilterBar,d=(0,C.sJ)(H.a6),p=(0,P.useState)([]),z=(0,a.Z)(p,2),M=z[0],E=z[1],R=(0,P.useState)({}),L=(0,a.Z)(R,2),F=L[0],J=L[1],G=(0,P.useState)(!1),X=(0,a.Z)(G,2),K=X[0],Q=X[1],$=(0,P.useState)(null),ee=(0,a.Z)($,2),ne=ee[0],te=ee[1],re=(0,P.useState)(n||{page:1}),ie=(0,a.Z)(re,2),ae=ie[0],oe=ie[1],le=(0,P.useMemo)((function(){return D.filter((function(e){return!t||t.includes(e.id)}))}),[t]),se=function(e,n){var t=n[e.id];if("name"===e.id){if(null!==n.app_uuid){var r=d.find((function(e){return e.uuid===n.app_uuid}));return r?(0,V.jsx)(f.Z,{sx:{textTransform:"none"},href:"/apps/".concat(r.uuid),children:r.name}):(0,V.jsx)(f.Z,{sx:{textTransform:"none"},children:"Deleted App"})}return(0,V.jsx)(f.Z,{sx:{textTransform:"none"},children:"Playground"})}if("type"===e.id)return(0,V.jsx)(m.Z,{title:null!==n.app_uuid?"App":"Endpoint",children:null!==n.app_uuid?(0,V.jsx)(l.Z,{sx:{color:"#999"},size:"small"}):(0,V.jsx)(o.Z,{sx:{color:"#999"},size:"small"})});if("request_user_email"===e.id){var i,a,s,c,p,g,v,Z,j,b,_,w;if(null!==(i=n.platform_data)&&void 0!==i&&null!==(a=i.slack)&&void 0!==a&&a.user_email)return(0,V.jsxs)(u.Z,{children:[(0,V.jsx)(x.Z,{component:B.r,fontSize:"8",sx:{marginRight:"5px",color:"#555",verticalAlign:"middle"}}),null===(v=n.platform_data)||void 0===v||null===(Z=v.slack)||void 0===Z?void 0:Z.user_email]});if(null!==(s=n.platform_data)&&void 0!==s&&null!==(c=s.discord)&&void 0!==c&&c.global_name)return(0,V.jsxs)(u.Z,{children:[(0,V.jsx)(x.Z,{component:I.r,fontSize:"8",sx:{marginRight:"5px",color:"#555",verticalAlign:"middle"}}),null===(j=n.platform_data)||void 0===j||null===(b=j.discord)||void 0===b?void 0:b.global_name]});if(null!==(p=n.platform_data)&&void 0!==p&&null!==(g=p.twilio)&&void 0!==g&&g.requestor)return(0,V.jsxs)(u.Z,{children:[(0,V.jsx)(x.Z,{component:T.r,fontSize:"8",sx:{marginRight:"5px",color:"#555",verticalAlign:"middle"}}),null===(_=n.platform_data)||void 0===_||null===(w=_.twilio)||void 0===w?void 0:w.requestor]});if(null===n.request_user_email||""===n.request_user_email)return"Anonymous"}else{if("request_location"===e.id&&(null===n.request_location||""===n.request_location))return"Unknown";if("response_status"===e.id)return(0,V.jsx)(h.Z,{size:"small",label:n.response_status,color:n.response_status<300?"success":"error",sx:{borderRadius:"5px"}});if("created_at"===e.id)return(0,V.jsx)(m.Z,{title:A().utc(t).local().format("D-MMM-YYYY h:mm:ss A"),children:(0,V.jsx)("span",{children:e.format?e.format(t):t})})}return e.format?e.format(t):t};return(0,P.useEffect)((function(){Q(!0),(0,N.o)().get("/api/history?".concat(Object.keys(ae).map((function(e){return"".concat(e,"=").concat(ae[e])})).join("&"))).then((function(e){var n,t;te(null===(n=e.data)||void 0===n?void 0:n.count),E(((null===(t=e.data)||void 0===t?void 0:t.results)||[]).map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{expand:!1})})))})).catch((function(e){console.log(e)})).finally((function(){Q(!1)}))}),[ne,ae]),(0,V.jsx)(g.ZP,{container:!0,spacing:1,children:(0,V.jsxs)(v.Z,{sx:{padding:"10px 20px"},children:[s&&(0,V.jsxs)(u.Z,{children:[(0,V.jsx)(W,{apps:d,sessions:Array.from(new Set(M.filter((function(e){return null!==e.session_key&&""!==e.session_key})).map((function(e){return e.session_key})))).map((function(e){return{name:e}})),users:Array.from(new Set(M.filter((function(e){return null!==e.request_user_email&&""!==e.request_user_email})).map((function(e){return e.request_user_email})))).map((function(e){return{name:e}})),onFilter:function(e){return oe((0,i.Z)((0,i.Z)({},e),{page:1}))}}),(0,V.jsx)(Z.Z,{})]}),(0,V.jsxs)(j.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,V.jsx)(b.Z,{children:(0,V.jsx)(_.Z,{children:le.map((function(e){return(0,V.jsx)(w.Z,{align:e.align,style:{fontWeight:"bold",textAlign:"left"},children:e.label},e.id)}))})}),(0,V.jsx)(y.Z,{children:M.map((function(e){return[(0,V.jsx)(_.Z,{hover:!0,role:"checkbox",tabIndex:-1,sx:{cursor:"pointer",backgroundColor:e.expand?"#f5f5f5":"inherit"},onClick:function(){return function(e){E(M.map((function(n){return n.request_uuid===e.request_uuid?(0,i.Z)((0,i.Z)({},n),{},{expand:!n.expand}):n}))),F[e.request_uuid]||(0,N.o)().get("/api/history/".concat(e.request_uuid)).then((function(n){J((0,i.Z)((0,i.Z)({},F),{},(0,r.Z)({},e.request_uuid,n.data)))}))}(e)},children:le.map((function(n){return(0,V.jsx)(w.Z,{align:n.align,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:se(n,e)},n.id)}))},e.request_uuid),(0,V.jsx)(_.Z,{children:(0,V.jsx)(w.Z,{style:{paddingBottom:0,paddingTop:0,border:0},colSpan:12,children:(0,V.jsx)(O.Z,{in:e.expand,timeout:"auto",unmountOnExit:!0,children:(0,V.jsxs)(u.Z,{sx:{margin:1},children:[!F[e.request_uuid]&&(0,V.jsx)(q.Z,{}),F[e.request_uuid]&&(0,V.jsxs)(g.ZP,{container:!0,spacing:1,sx:{marginBottom:1,border:"1px solid #eee"},children:[(0,V.jsx)(g.ZP,{item:!0,xs:12,md:6,sx:{borderRight:"solid 1px #eee"},children:(0,V.jsxs)(c.Z,{direction:"column",spacing:1,sx:{marginBottom:1},children:[(0,V.jsx)(U,{label:"Request",value:e.request_uuid}),e.app_uuid&&(0,V.jsx)(U,{label:"Session",value:F[e.request_uuid].session_key}),(0,V.jsx)(U,{label:"IP Address",value:F[e.request_uuid].request_ip}),(0,V.jsx)(U,{label:"Platform",value:Y(e.request_user_agent)}),(0,V.jsx)(U,{label:"User Agent",value:F[e.request_uuid].request_user_agent})]})}),(0,V.jsx)(g.ZP,{item:!0,xs:12,md:6,children:(0,V.jsxs)(c.Z,{direction:"column",spacing:1,sx:{marginBottom:1},children:[(0,V.jsx)(U,{label:"Request",value:F[e.request_uuid].request_body,content_type:F[e.request_uuid].request_content_type}),(0,V.jsx)(U,{label:"Response",value:F[e.request_uuid].response_body,content_type:F[e.request_uuid].response_content_type})]})})]})]})})})},"".concat(e.request_uuid,"_details"))]}))})]}),K&&(0,V.jsx)(S.Z,{sx:{margin:"10px auto",width:"80vw"}}),(0,V.jsx)(k.Z,{count:Math.ceil((ne||0)/20),variant:"outlined",shape:"rounded",page:ae.page,onChange:function(e,n){oe((0,i.Z)((0,i.Z)({},ae),{},{page:n}))},sx:{marginTop:2,float:"right"}})]})})}}}]);