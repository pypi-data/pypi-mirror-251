{"version":3,"file":"reviewReplyDraftBannerView.js","names":["RB","ReviewRequestPage","ReviewReplyDraftBannerView","FloatingBannerView","extend","className","template","_","events","render","prototype","call","reviewRequestEditor","options","$el","html","draftText","gettext","reminderText","publishText","discardText","sendEmailText","showSendEmail","get","listenTo","model","$","prop","errorText","alert","_onPublishClicked","$sendEmail","publish","trivial","length","is","_onDiscardClicked","destroy"],"sources":["../../../../../../static/rb/js/reviewRequestPage/views/reviewReplyDraftBannerView.es6.js"],"sourcesContent":["/**\n * A banner that represents a pending reply to a review.\n *\n * The banner offers actions for publishing and discarding the review.\n */\nRB.ReviewRequestPage.ReviewReplyDraftBannerView = RB.FloatingBannerView.extend({\n    className: 'banner',\n\n    template: _.template(dedent`\n        <h1><%- draftText %></h1>\n        <p><%- reminderText %></p>\n        <span class=\"banner-actions\">\n         <input type=\"button\" value=\"<%- publishText %>\"\n                class=\"publish-button\" />\n         <input type=\"button\" value=\"<%- discardText %>\"\n                class=\"discard-button\" />\n        </span>\n        <% if (showSendEmail) { %>\n         <label>\n          <input type=\"checkbox\" class=\"send-email\" checked />\n          <%- sendEmailText %>\n        </label>\n        <% } %>\n    `),\n\n    events: {\n        'click .publish-button': '_onPublishClicked',\n        'click .discard-button': '_onDiscardClicked',\n    },\n\n    /**\n     * Render the banner.\n     *\n     * Returns:\n     *     RB.ReviewRequestPage.ReviewReplyDraftBannerView:\n     *     This object, for chaining.\n     */\n    render() {\n        RB.FloatingBannerView.prototype.render.call(this);\n\n        const reviewRequestEditor = this.options.reviewRequestEditor;\n\n        this.$el.html(this.template({\n            draftText: gettext('This reply is a draft.'),\n            reminderText: gettext('Be sure to publish when finished.'),\n            publishText: gettext('Publish'),\n            discardText: gettext('Discard'),\n            sendEmailText: gettext('Send E-Mail'),\n            showSendEmail: reviewRequestEditor.get('showSendEmail'),\n        }));\n\n        this.listenTo(this.model, 'saving destroying',\n                      () => this.$('input').prop('disabled', true));\n        this.listenTo(this.model, 'saved',\n                      () => this.$('input').prop('disabled', false));\n        this.listenTo(this.model, 'publishError',\n                      errorText => alert(errorText));\n\n        return this;\n    },\n\n    /**\n     * Handler for when Publish is clicked.\n     *\n     * Publishes the reply.\n     */\n    _onPublishClicked() {\n        const $sendEmail = this.$('.send-email');\n\n        this.model.publish({\n            trivial: $sendEmail.length === 1 && !$sendEmail.is(':checked'),\n        });\n    },\n\n    /**\n     * Handler for when Discard is clicked.\n     *\n     * Discards the reply.\n     */\n    _onDiscardClicked() {\n        this.model.destroy();\n    },\n});\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACAA,EAAE,CAACC,iBAAiB,CAACC,0BAA0B,GAAGF,EAAE,CAACG,kBAAkB,CAACC,MAAM,CAAC;EAC3EC,SAAS,EAAE,QAAQ;EAEnBC,QAAQ,EAAEC,CAAC,CAACD,QAAQ,CAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAEK,CAAC;EAEFE,MAAM,EAAE;IACJ,uBAAuB,EAAE,mBAAmB;IAC5C,uBAAuB,EAAE;EAC7B,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;EACIC,MAAMA,CAAA,EAAG;IACLT,EAAE,CAACG,kBAAkB,CAACO,SAAS,CAACD,MAAM,CAACE,IAAI,CAAC,IAAI,CAAC;IAEjD,MAAMC,mBAAmB,GAAG,IAAI,CAACC,OAAO,CAACD,mBAAmB;IAE5D,IAAI,CAACE,GAAG,CAACC,IAAI,CAAC,IAAI,CAACT,QAAQ,CAAC;MACxBU,SAAS,EAAAC,OAAA,0BAAmC;MAC5CC,YAAY,EAAAD,OAAA,qCAA8C;MAC1DE,WAAW,EAAAF,OAAA,WAAoB;MAC/BG,WAAW,EAAAH,OAAA,WAAoB;MAC/BI,aAAa,EAAAJ,OAAA,eAAwB;MACrCK,aAAa,EAAEV,mBAAmB,CAACW,GAAG,CAAC,eAAe;IAC1D,CAAC,CAAC,CAAC;IAEH,IAAI,CAACC,QAAQ,CAAC,IAAI,CAACC,KAAK,EAAE,mBAAmB,EAC/B,MAAM,IAAI,CAACC,CAAC,CAAC,OAAO,CAAC,CAACC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;IAC3D,IAAI,CAACH,QAAQ,CAAC,IAAI,CAACC,KAAK,EAAE,OAAO,EACnB,MAAM,IAAI,CAACC,CAAC,CAAC,OAAO,CAAC,CAACC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;IAC5D,IAAI,CAACH,QAAQ,CAAC,IAAI,CAACC,KAAK,EAAE,cAAc,EAC1BG,SAAS,IAAIC,KAAK,CAACD,SAAS,CAAC,CAAC;IAE5C,OAAO,IAAI;EACf,CAAC;EAED;AACJ;AACA;AACA;AACA;EACIE,iBAAiBA,CAAA,EAAG;IAChB,MAAMC,UAAU,GAAG,IAAI,CAACL,CAAC,CAAC,aAAa,CAAC;IAExC,IAAI,CAACD,KAAK,CAACO,OAAO,CAAC;MACfC,OAAO,EAAEF,UAAU,CAACG,MAAM,KAAK,CAAC,IAAI,CAACH,UAAU,CAACI,EAAE,CAAC,UAAU;IACjE,CAAC,CAAC;EACN,CAAC;EAED;AACJ;AACA;AACA;AACA;EACIC,iBAAiBA,CAAA,EAAG;IAChB,IAAI,CAACX,KAAK,CAACY,OAAO,CAAC,CAAC;EACxB;AACJ,CAAC,CAAC"}