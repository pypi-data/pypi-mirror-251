{"version":3,"file":"dateTimeInlineEditorViewTests.js","names":["suite","initialDateTime","view","$container","beforeEach","$","appendTo","$testsScratch","describe","it","RB","DateTimeInlineEditorView","el","render","expect","$buttons","length","toBe","$field","field","children","firstElementChild","outerHTML","rawValue","minDate","maxDate","options","afterEach","hideEditor","startEdit","firstChild","tagName","value","descriptorText","undefined","textContent","setValue","save","$el","innerHTML","spyOn","trigger","_scheduleUpdateDirtyState","toHaveBeenCalled"],"sources":["../../../../../../../static/rb/js/ui/views/tests/dateTimeInlineEditorViewTests.es6.js"],"sourcesContent":["suite('rb/ui/views/DateTimeInlineEditorView', function() {\n    const initialDateTime = '2022-09-16T03:45';\n    let view;\n    let $container;\n\n    beforeEach(function() {\n        $container = $('<div/>').appendTo($testsScratch);\n    });\n\n    describe('Construction', function() {\n        it('Default', function() {\n            view = new RB.DateTimeInlineEditorView({\n                el: $container,\n            });\n            view.render();\n\n            expect(view.$buttons.length).toBe(1);\n            expect(view.$field.length).toBe(1);\n\n            const field = view.$field[0];\n            expect(field.children.length).toBe(1);\n            expect(field.firstElementChild.outerHTML)\n                .toBe('<input type=\"datetime-local\">');\n\n        });\n\n        it('With options provided', function() {\n            view = new RB.DateTimeInlineEditorView({\n                el: $container,\n                rawValue: initialDateTime,\n                minDate: '2020-10-10T15:20',\n                maxDate: '2030-11-12T:06:30',\n            });\n            view.render();\n\n            expect(view.options.minDate).toBe('2020-10-10T15:20');\n            expect(view.options.maxDate).toBe('2030-11-12T:06:30');\n            expect(view.options.rawValue).toBe(initialDateTime);\n\n            expect(view.$buttons.length).toBe(1);\n            expect(view.$field.length).toBe(1);\n\n            const field = view.$field[0];\n            expect(field.firstElementChild.outerHTML).toBe(dedent`\n                <input type=\"datetime-local\" max=\"2030-11-12T:06:30\" \\\n                min=\"2020-10-10T15:20\">\n            `);\n\n        });\n    });\n\n    describe('Operations', function() {\n        afterEach(function() {\n            view.hideEditor();\n        });\n\n        describe('startEdit', function() {\n            it('With an initial date', function() {\n                view = new RB.DateTimeInlineEditorView({\n                    el: $container,\n                    rawValue: initialDateTime,\n                });\n                view.render();\n                view.startEdit();\n\n                const field = view.$field[0];\n                expect(field.firstChild.tagName).toBe('INPUT');\n                expect(field.firstElementChild.tagName).toBe('INPUT');\n                expect(field.firstElementChild.value).toBe(initialDateTime);\n            });\n\n            it('With no initial date', function() {\n                view = new RB.DateTimeInlineEditorView({\n                    el: $container,\n                });\n                view.render();\n                view.startEdit();\n\n                const field = view.$field[0];\n                expect(field.firstChild.tagName).toBe('INPUT');\n                expect(field.firstElementChild.tagName).toBe('INPUT');\n                expect(field.firstElementChild.value).toBe('');\n            });\n\n            it('With a descriptor text', function() {\n                view = new RB.DateTimeInlineEditorView({\n                    el: $container,\n                    descriptorText: 'Test',\n                });\n                view.render();\n                view.startEdit();\n\n                const field = view.$field[0];\n                expect(field.firstChild.tagName).toBe(undefined);\n                expect(field.firstChild.textContent).toBe('Test');\n                expect(field.firstElementChild.tagName).toBe('INPUT');\n                expect(field.firstElementChild.value).toBe('');\n            });\n\n            it('With a descriptor text and initial datetime', function() {\n                view = new RB.DateTimeInlineEditorView({\n                    el: $container,\n                    descriptorText: 'Test',\n                    rawValue: initialDateTime,\n                });\n                view.render();\n                view.startEdit();\n\n                const field = view.$field[0];\n                expect(field.firstChild.tagName).toBe(undefined);\n                expect(field.firstChild.textContent).toBe('Test');\n                expect(field.firstElementChild.tagName).toBe('INPUT');\n                expect(field.firstElementChild.value).toBe(initialDateTime);\n            });\n        });\n\n        describe('save', function() {\n            it('With a new date', function() {\n                view = new RB.DateTimeInlineEditorView({\n                    el: $container,\n                });\n                view.render();\n                view.startEdit();\n\n                view.setValue(initialDateTime);\n                view.save();\n\n                expect(view.options.rawValue).toBe(initialDateTime);\n                expect(view.$el[0].innerHTML).toBe(initialDateTime);\n            });\n\n            it('With an empty value', function() {\n                view = new RB.DateTimeInlineEditorView({\n                    el: $container,\n                    rawValue: initialDateTime,\n                });\n                view.render();\n                view.startEdit();\n\n                view.setValue('');\n                view.save();\n\n                expect(view.options.rawValue).toBe('');\n                expect(view.$el[0].innerHTML).toBe('');\n            });\n\n            it('Without any changes made', function() {\n                view = new RB.DateTimeInlineEditorView({\n                    el: $container,\n                    rawValue: initialDateTime,\n                });\n                view.render();\n                view.startEdit();\n\n                view.save();\n\n                expect(view.options.rawValue).toBe(initialDateTime);\n                expect(view.$el[0].innerHTML).toBe('');\n            });\n        });\n    });\n\n    describe('Events', function() {\n        it('On change', function() {\n            view = new RB.DateTimeInlineEditorView({\n                el: $container,\n            });\n\n            spyOn(view, '_scheduleUpdateDirtyState');\n\n            view.render();\n            view.$field.trigger('change');\n\n            expect(view._scheduleUpdateDirtyState)\n                .toHaveBeenCalled();\n        });\n    });\n});\n"],"mappings":"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"}