{"version":3,"file":"diffCommentBlockModel.js","names":["RB","DiffCommentBlock","AbstractCommentBlock","extend","defaults","_","fileDiffID","interFileDiffID","baseFileDiffID","beginLineNum","endLineNum","$beginRow","$endRow","public","prototype","getNumLines","get","createComment","id","createDiffComment","getDraftWarning"],"sources":["../../../../../../static/rb/js/diffviewer/models/diffCommentBlockModel.es6.js"],"sourcesContent":["/**\n * Represents the comments on a region of a diff.\n *\n * DiffCommentBlock deals with creating and representing comments that exist\n * in a specific line range of a diff.\n *\n * Model Attributes:\n *     baseFileDiffID (number):\n *         The ID of the base FileDiff that this comment is on.\n *\n *         This attribute is mutually exclusive with interFileDiffID.\n *\n *     fileDiffID (number):\n *         The ID of the FileDiff that this comment is on.\n *\n *     interFileDiffID (number):\n *         The ID of the inter-FileDiff that this comment is on, if any.\n *\n *         This attribute is mutually exclusive with baseFileDiffID.\n *\n *     beginLineNum (number):\n *         The first line number in the file that this comment is on.\n *\n *     endLineNUm (number):\n *         The last line number in the file that this comment is on.\n *\n *     $beginRow (jQuery):\n *         The first row in the diffviewer that this comment is on.\n *\n *     $endRow (jQuery):\n *         The last row in the diffviewer that this comment is on.\n *\n *     public (boolean):\n *         Whether the diff for this comment has been published.\n *\n * See Also:\n *     :js:class:`RB.AbstractCommentBlock`:\n *         For the attributes defined by the base model.\n */\nRB.DiffCommentBlock = RB.AbstractCommentBlock.extend({\n    defaults: _.defaults({\n        fileDiffID: null,\n        interFileDiffID: null,\n        baseFileDiffID: null,\n        beginLineNum: null,\n        endLineNum: null,\n        $beginRow: null,\n        $endRow: null,\n        public: false,\n    }, RB.AbstractCommentBlock.prototype.defaults),\n\n    /**\n     * Return the number of lines this comment block spans.\n     *\n     * Returns:\n     *     number:\n     *     The number of lines spanned by this comment.\n     */\n    getNumLines() {\n        return this.get('endLineNum') + this.get('beginLineNum') + 1;\n    },\n\n    /**\n     * Create a DiffComment for the given comment ID.\n     *\n     * Args:\n     *     id (number):\n     *         The ID of the comment to instantiate the model for.\n     *\n     * Returns:\n     *     RB.DiffComment:\n     *     The new comment model.\n     */\n    createComment(id) {\n        return this.get('review').createDiffComment({\n            id: id,\n            fileDiffID: this.get('fileDiffID'),\n            interFileDiffID: this.get('interFileDiffID'),\n            beginLineNum: this.get('beginLineNum'),\n            endLineNum: this.get('endLineNum'),\n            baseFileDiffID: this.get('baseFileDiffID'),\n        });\n    },\n\n    /**\n     * Return a warning about commenting on a draft object.\n     *\n     * Returns:\n     *     string:\n     *     A warning to display to the user if they're commenting on a draft\n     *     object. Return null if there's no warning.\n     */\n    getDraftWarning() {\n        if (this.get('public')) {\n            return null;\n        } else {\n            return _`The diff for this comment is still a draft. Replacing the draft diff will delete this comment.`;\n        }\n    },\n});\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,EAAE,CAACC,gBAAgB,GAAGD,EAAE,CAACE,oBAAoB,CAACC,MAAM,CAAC;EACjDC,QAAQ,EAAEC,CAAC,CAACD,QAAQ,CAAC;IACjBE,UAAU,EAAE,IAAI;IAChBC,eAAe,EAAE,IAAI;IACrBC,cAAc,EAAE,IAAI;IACpBC,YAAY,EAAE,IAAI;IAClBC,UAAU,EAAE,IAAI;IAChBC,SAAS,EAAE,IAAI;IACfC,OAAO,EAAE,IAAI;IACbC,MAAM,EAAE;EACZ,CAAC,EAAEb,EAAE,CAACE,oBAAoB,CAACY,SAAS,CAACV,QAAQ,CAAC;EAE9C;AACJ;AACA;AACA;AACA;AACA;AACA;EACIW,WAAW,GAAG;IACV,OAAO,IAAI,CAACC,GAAG,CAAC,YAAY,CAAC,GAAG,IAAI,CAACA,GAAG,CAAC,cAAc,CAAC,GAAG,CAAC;EAChE,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,aAAa,CAACC,EAAE,EAAE;IACd,OAAO,IAAI,CAACF,GAAG,CAAC,QAAQ,CAAC,CAACG,iBAAiB,CAAC;MACxCD,EAAE,EAAEA,EAAE;MACNZ,UAAU,EAAE,IAAI,CAACU,GAAG,CAAC,YAAY,CAAC;MAClCT,eAAe,EAAE,IAAI,CAACS,GAAG,CAAC,iBAAiB,CAAC;MAC5CP,YAAY,EAAE,IAAI,CAACO,GAAG,CAAC,cAAc,CAAC;MACtCN,UAAU,EAAE,IAAI,CAACM,GAAG,CAAC,YAAY,CAAC;MAClCR,cAAc,EAAE,IAAI,CAACQ,GAAG,CAAC,gBAAgB;IAC7C,CAAC,CAAC;EACN,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACII,eAAe,GAAG;IACd,IAAI,IAAI,CAACJ,GAAG,CAAC,QAAQ,CAAC,EAAE;MACpB,OAAO,IAAI;IACf,CAAC,MAAM;MACH;IACJ;EACJ;AACJ,CAAC,CAAC"}