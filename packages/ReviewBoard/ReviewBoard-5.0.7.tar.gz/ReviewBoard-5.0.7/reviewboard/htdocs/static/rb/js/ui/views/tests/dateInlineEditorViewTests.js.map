{"version":3,"file":"dateInlineEditorViewTests.js","names":["suite","initialDate","view","$container","beforeEach","$","appendTo","$testsScratch","describe","it","RB","DateInlineEditorView","el","render","expect","options","descriptorText","toBe","minDate","maxDate","rawValue","$buttons","length","$field","field","children","firstElementChild","outerHTML","firstChild","textContent","afterEach","hideEditor","startEdit","tagName","value","undefined","setValue","save","$el","innerHTML","spyOn","trigger","_scheduleUpdateDirtyState","toHaveBeenCalled"],"sources":["../../../../../../../static/rb/js/ui/views/tests/dateInlineEditorViewTests.es6.js"],"sourcesContent":["suite('rb/ui/views/DateInlineEditorView', function() {\n    const initialDate = '2022-09-16';\n    let view;\n    let $container;\n\n    beforeEach(function() {\n        $container = $('<div/>').appendTo($testsScratch);\n    });\n\n    describe('Construction', function() {\n        it('Default', function() {\n            view = new RB.DateInlineEditorView({\n                el: $container,\n            });\n            view.render();\n\n            expect(view.options.descriptorText).toBe(null);\n            expect(view.options.minDate).toBe(null);\n            expect(view.options.maxDate).toBe(null);\n            expect(view.options.rawValue).toBe(null);\n\n            expect(view.$buttons.length).toBe(1);\n            expect(view.$field.length).toBe(1);\n\n            const field = view.$field[0];\n            expect(field.children.length).toBe(1);\n            expect(field.firstElementChild.outerHTML)\n                .toBe('<input type=\"date\">');\n\n        });\n\n        it('With options provided', function() {\n            view = new RB.DateInlineEditorView({\n                el: $container,\n                rawValue: initialDate,\n                descriptorText: 'Test',\n                minDate: '2020-10-10',\n                maxDate: '2030-10-10',\n            });\n            view.render();\n\n            expect(view.options.descriptorText).toBe('Test');\n            expect(view.options.minDate).toBe('2020-10-10');\n            expect(view.options.maxDate).toBe('2030-10-10');\n            expect(view.options.rawValue).toBe(initialDate);\n\n            expect(view.$buttons.length).toBe(1);\n            expect(view.$field.length).toBe(1);\n\n            const field = view.$field[0];\n            expect(field.firstChild.textContent).toBe('Test');\n            expect(field.firstElementChild.outerHTML).toBe(\n                '<input type=\"date\" max=\"2030-10-10\" min=\"2020-10-10\">');\n\n        });\n    });\n\n    describe('Operations', function() {\n        afterEach(function() {\n            view.hideEditor();\n        });\n\n        describe('startEdit', function() {\n            it('With an initial date', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                    rawValue: initialDate,\n                });\n                view.render();\n                view.startEdit();\n\n                const field = view.$field[0];\n                expect(field.firstChild.tagName).toBe('INPUT');\n                expect(field.firstElementChild.tagName).toBe('INPUT');\n                expect(field.firstElementChild.value).toBe(initialDate);\n            });\n\n            it('With no initial date', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                });\n                view.render();\n                view.startEdit();\n\n                const field = view.$field[0];\n                expect(field.firstChild.tagName).toBe('INPUT');\n                expect(field.firstElementChild.tagName).toBe('INPUT');\n                expect(field.firstElementChild.value).toBe('');\n            });\n\n            it('With a descriptor text', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                    descriptorText: 'Test',\n                });\n                view.render();\n                view.startEdit();\n\n                const field = view.$field[0];\n                expect(field.firstChild.tagName).toBe(undefined);\n                expect(field.firstChild.textContent).toBe('Test');\n                expect(field.firstElementChild.tagName).toBe('INPUT');\n                expect(field.firstElementChild.value).toBe('');\n            });\n\n            it('With a descriptor text and initial date', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                    descriptorText: 'Test',\n                    rawValue: initialDate,\n                });\n                view.render();\n                view.startEdit();\n\n                const field = view.$field[0];\n                expect(field.firstChild.tagName).toBe(undefined);\n                expect(field.firstChild.textContent).toBe('Test');\n                expect(field.firstElementChild.tagName).toBe('INPUT');\n                expect(field.firstElementChild.value).toBe(initialDate);\n            });\n        });\n\n        describe('save', function() {\n            it('With a new date', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                });\n                view.render();\n                view.startEdit();\n\n                view.setValue(initialDate);\n                view.save();\n\n                expect(view.options.rawValue).toBe(initialDate);\n                expect(view.$el[0].innerHTML).toBe(initialDate);\n            });\n\n            it('With an empty value', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                    rawValue: initialDate,\n                });\n                view.render();\n                view.startEdit();\n\n                view.setValue('');\n                view.save();\n\n                expect(view.options.rawValue).toBe('');\n                expect(view.$el[0].innerHTML).toBe('');\n            });\n\n            it('Without any changes made', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                    rawValue: initialDate,\n                });\n                view.render();\n                view.startEdit();\n\n                view.save();\n\n                expect(view.options.rawValue).toBe(initialDate);\n                expect(view.$el[0].innerHTML).toBe('');\n            });\n        });\n    });\n\n    describe('Events', function() {\n        it('On change', function() {\n            view = new RB.DateInlineEditorView({\n                el: $container,\n            });\n\n            spyOn(view, '_scheduleUpdateDirtyState');\n\n            view.render();\n            view.$field.trigger('change');\n\n            expect(view._scheduleUpdateDirtyState)\n                .toHaveBeenCalled();\n        });\n    });\n});\n"],"mappings":"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"}