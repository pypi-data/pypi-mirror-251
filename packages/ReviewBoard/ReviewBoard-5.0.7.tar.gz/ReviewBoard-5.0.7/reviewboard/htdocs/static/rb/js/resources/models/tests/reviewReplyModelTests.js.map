{"version":3,"file":"reviewReplyModelTests.js","names":["suite","parentObject","model","beforeEach","RB","BaseResource","links","replies","href","ReviewReply","describe","callbacks","spyOn","Backbone","Model","prototype","and","callFake","options","success","callThrough","resolveTo","it","expect","isNew","toBe","get","_","isFunction","error","status","destroy","ready","toHaveBeenCalled","_retrieveDraft","fetch","set","id","loaded","not","discarded","discardIfEmpty","commentsData","self","diff_comments","screenshot_comments","file_attachment_comments","general_comments","data","key","find","COMMENT_LINK_NAMES","name","url","bodyTop","bodyBottom","done","console","warn","fail","_needDraft","undefined","calls","reset","rspNamespace","parse","stat","my_reply","body_top","body_bottom","body_top_text_type","body_bottom_text_type","public","bodyTopRichText","bodyBottomRichText","toJSON","force_text_type","include_text_types"],"sources":["../../../../../../../static/rb/js/resources/models/tests/reviewReplyModelTests.es6.js"],"sourcesContent":["suite('rb/resources/models/ReviewReply', function() {\n    let parentObject;\n    let model;\n\n    beforeEach(function() {\n        parentObject = new RB.BaseResource({\n            'public': true,\n            links: {\n                replies: {\n                    href: '/api/foos/replies/',\n                },\n            },\n        });\n\n        model = new RB.ReviewReply({\n            parentObject: parentObject,\n        });\n    });\n\n    describe('destroy', function() {\n        let callbacks;\n\n        beforeEach(function() {\n            spyOn(Backbone.Model.prototype, 'destroy')\n                .and.callFake(options => options.success());\n            spyOn(model, '_retrieveDraft').and.callThrough();\n            spyOn(parentObject, 'ready').and.resolveTo();\n        });\n\n        it('With isNew=true', async function() {\n            expect(model.isNew()).toBe(true);\n            expect(model.get('loaded')).toBe(false);\n\n            spyOn(Backbone.Model.prototype, 'fetch')\n                .and.callFake(options => {\n                    if (options && _.isFunction(options.success)) {\n                        options.error(model, {\n                            status: 404,\n                        });\n                    }\n                });\n\n            await model.destroy();\n\n            expect(model.isNew()).toBe(true);\n            expect(model.get('loaded')).toBe(false);\n\n            expect(parentObject.ready).toHaveBeenCalled();\n            expect(model._retrieveDraft).toHaveBeenCalled();\n            expect(Backbone.Model.prototype.fetch).toHaveBeenCalled();\n            expect(Backbone.Model.prototype.destroy).toHaveBeenCalled();\n        });\n\n        it('With isNew=false', async function() {\n            model.set({\n                id: 123,\n                loaded: true,\n            });\n\n            spyOn(Backbone.Model.prototype, 'fetch');\n\n            await model.destroy();\n\n            expect(parentObject.ready).toHaveBeenCalled();\n            expect(model._retrieveDraft).not.toHaveBeenCalled();\n            expect(Backbone.Model.prototype.fetch).not.toHaveBeenCalled();\n            expect(Backbone.Model.prototype.destroy).toHaveBeenCalled();\n        });\n    });\n\n    describe('discardIfEmpty', function() {\n        beforeEach(function() {\n            spyOn(model, 'destroy').and.resolveTo();\n            spyOn(parentObject, 'ready').and.resolveTo();\n            spyOn(model, 'ready').and.resolveTo();\n        });\n\n        it('With isNew=true', async function() {\n            expect(model.isNew()).toBe(true);\n            expect(model.get('loaded')).toBe(false);\n\n            const discarded = await model.discardIfEmpty();\n\n            expect(model.destroy).not.toHaveBeenCalled();\n            expect(discarded).toBe(false);\n        });\n\n        describe('With isNew=false', function() {\n            let commentsData;\n\n            beforeEach(function() {\n                commentsData = {};\n                model.set({\n                    id: 123,\n                    loaded: true,\n                    links: {\n                        self: {\n                            href: '/api/foos/replies/123/',\n                        },\n                        diff_comments: {\n                            href: '/api/diff-comments/',\n                        },\n                        screenshot_comments: {\n                            href: '/api/screenshot-comments/',\n                        },\n                        file_attachment_comments: {\n                            href: '/api/file-attachment-comments/',\n                        },\n                        general_comments: {\n                            href: '/api/general-comments/',\n                        },\n                    },\n                });\n\n                spyOn(RB, 'apiCall').and.callFake(options => {\n                    const links = model.get('links');\n                    const data = {};\n                    const key = _.find(\n                        RB.ReviewReply.prototype.COMMENT_LINK_NAMES,\n                        name => (options.url === links[name].href));\n\n                    if (key) {\n                        data[key] = commentsData[key] || [];\n                        options.success(data);\n                    } else {\n                        options.error({\n                            status: 404,\n                        });\n                    }\n                });\n                spyOn(Backbone.Model.prototype, 'fetch')\n                    .and.callFake(options => {\n                        if (options && _.isFunction(options.success)) {\n                            options.success();\n                        }\n                    });\n            });\n\n            it('With no comments or body replies', async function() {\n                const discarded = await model.discardIfEmpty();\n                expect(discarded).toBe(true);\n                expect(model.destroy).toHaveBeenCalled();\n            });\n\n            it('With bodyTop', async function() {\n                model.set({\n                    bodyTop: 'hi',\n                });\n\n                const discarded = await model.discardIfEmpty();\n                expect(discarded).toBe(false);\n                expect(model.destroy).not.toHaveBeenCalled();\n            });\n\n            it('With bodyBottom', async function() {\n                model.set({\n                    bodyBottom: 'hi',\n                });\n                const discarded = await model.discardIfEmpty();\n                expect(discarded).toBe(false);\n                expect(model.destroy).not.toHaveBeenCalled();\n            });\n\n            it('With diff comment', async function() {\n                commentsData.diff_comments = [{\n                    id: 1,\n                }];\n\n                const discarded = await model.discardIfEmpty();\n                expect(discarded).toBe(false);\n                expect(model.destroy).not.toHaveBeenCalled();\n            });\n\n            it('With screenshot comment', async function() {\n                commentsData.screenshot_comments = [{\n                    id: 1,\n                }];\n\n                const discarded = await model.discardIfEmpty();\n                expect(discarded).toBe(false);\n                expect(model.destroy).not.toHaveBeenCalled();\n            });\n\n            it('With file attachment comment', async function() {\n                commentsData.file_attachment_comments = [{\n                    id: 1,\n                }];\n\n                const discarded = await model.discardIfEmpty();\n                expect(discarded).toBe(false);\n                expect(model.destroy).not.toHaveBeenCalled();\n            });\n\n            it('With general comment', async function() {\n                commentsData.general_comments = [{\n                    id: 1,\n                }];\n\n                const discarded = await model.discardIfEmpty();\n                expect(discarded).toBe(false);\n                expect(model.destroy).not.toHaveBeenCalled();\n            });\n\n            it('With callbacks', function(done) {\n                spyOn(console, 'warn');\n\n                model.discardIfEmpty({\n                    success: discarded => {\n                        expect(discarded).toBe(true);\n                        expect(model.destroy).toHaveBeenCalled();\n                        expect(console.warn).toHaveBeenCalled();\n\n                        done();\n                    },\n                    error: () => done.fail(),\n                });\n            });\n        });\n    });\n\n    describe('ready', function() {\n        beforeEach(function() {\n            spyOn(parentObject, 'ready').and.resolveTo();\n        });\n\n        it('With isNew=true', async function() {\n            expect(model.isNew()).toBe(true);\n            expect(model.get('loaded')).toBe(false);\n\n            spyOn(Backbone.Model.prototype, 'fetch').and.resolveTo();\n            spyOn(model, '_retrieveDraft').and.resolveTo();\n\n            await model.ready();\n\n            expect(parentObject.ready).toHaveBeenCalled();\n            expect(model._retrieveDraft).toHaveBeenCalled();\n        });\n\n        it('With isNew=false', async function() {\n            model.set({\n                id: 123,\n            });\n\n            spyOn(Backbone.Model.prototype, 'fetch')\n                .and.callFake(options => {\n                    if (options && _.isFunction(options.success)) {\n                        options.success();\n                    }\n                });\n            spyOn(model, '_retrieveDraft').and.resolveTo();\n\n            await model.ready();\n            expect(parentObject.ready).toHaveBeenCalled();\n            expect(model._retrieveDraft).not.toHaveBeenCalled();\n        });\n\n        it('After destruction', async function() {\n            spyOn(model, '_retrieveDraft').and.callThrough();\n\n            spyOn(Backbone.Model.prototype, 'fetch').and.callFake(options => {\n                model.set({\n                    id: 123,\n                    links: {\n                        self: {\n                            href: '/api/foos/replies/123/',\n                        },\n                    },\n                    loaded: true,\n                });\n\n                options.success();\n            });\n\n            spyOn(Backbone.Model.prototype, 'destroy').and.callFake(\n                options => options.success());\n\n            expect(model.isNew()).toBe(true);\n            expect(model.get('loaded')).toBe(false);\n            expect(model._needDraft).toBe(undefined);\n\n            /* Make our initial ready call. */\n            await model.ready();\n\n            expect(parentObject.ready).toHaveBeenCalled();\n            expect(model._retrieveDraft).toHaveBeenCalled();\n            expect(Backbone.Model.prototype.fetch).toHaveBeenCalled();\n            expect(model.isNew()).toBe(false);\n            expect(model.get('loaded')).toBe(true);\n            expect(model._needDraft).toBe(false);\n\n            /* We have a loaded object. Reset it. */\n            await model.destroy();\n\n            expect(model.isNew()).toBe(true);\n            expect(model.get('loaded')).toBe(false);\n            expect(model._needDraft).toBe(true);\n\n            parentObject.ready.calls.reset();\n            model._retrieveDraft.calls.reset();\n\n            /* Now that it's destroyed, try to fetch it again. */\n            await model.ready();\n\n            expect(model._retrieveDraft).toHaveBeenCalled();\n            expect(Backbone.Model.prototype.fetch).toHaveBeenCalled();\n            expect(model._needDraft).toBe(false);\n        });\n\n        it('With callbacks', function(done) {\n            expect(model.isNew()).toBe(true);\n            expect(model.get('loaded')).toBe(false);\n\n            spyOn(Backbone.Model.prototype, 'fetch')\n                .and.callFake(options => {\n                    if (options && _.isFunction(options.success)) {\n                        options.success();\n                    }\n                });\n            spyOn(model, '_retrieveDraft').and.resolveTo();\n            spyOn(console, 'warn');\n\n            model.ready({\n                success: () => {\n                    expect(parentObject.ready).toHaveBeenCalled();\n                    expect(model._retrieveDraft).toHaveBeenCalled();\n                    expect(console.warn).toHaveBeenCalled();\n\n                    done();\n                },\n                error: () => done.fail(),\n            });\n        });\n    });\n\n    describe('parse', function() {\n        beforeEach(function() {\n            model.rspNamespace = 'my_reply';\n        });\n\n        it('API payloads', function() {\n            var data = model.parse({\n                stat: 'ok',\n                my_reply: {\n                    id: 42,\n                    body_top: 'foo',\n                    body_bottom: 'bar',\n                    'public': false,\n                    body_top_text_type: 'markdown',\n                    body_bottom_text_type: 'plain',\n                },\n            });\n\n            expect(data).not.toBe(undefined);\n            expect(data.id).toBe(42);\n            expect(data.bodyTop).toBe('foo');\n            expect(data.bodyBottom).toBe('bar');\n            expect(data.public).toBe(false);\n            expect(data.bodyTopRichText).toBe(true);\n            expect(data.bodyBottomRichText).toBe(false);\n        });\n    });\n\n    describe('toJSON', function() {\n        describe('bodyTop field', function() {\n            it('With value', function() {\n                model.set('bodyTop', 'foo');\n                const data = model.toJSON();\n                expect(data.body_top).toBe('foo');\n            });\n        });\n\n        describe('bodyBottom field', function() {\n            it('With value', function() {\n                model.set('bodyBottom', 'foo');\n                const data = model.toJSON();\n                expect(data.body_bottom).toBe('foo');\n            });\n        });\n\n        describe('bodyTopRichText field', function() {\n            it('With true', function() {\n                model.set('bodyTopRichText', true);\n                const data = model.toJSON();\n                expect(data.body_top_text_type).toBe('markdown');\n            });\n\n            it('With false', function() {\n                model.set('bodyTopRichText', false);\n                const data = model.toJSON();\n                expect(data.body_top_text_type).toBe('plain');\n            });\n        });\n\n        describe('bodyBottomRichText field', function() {\n            it('With true', function() {\n                model.set('bodyBottomRichText', true);\n                const data = model.toJSON();\n                expect(data.body_bottom_text_type).toBe('markdown');\n            });\n\n            it('With false', function() {\n                model.set('bodyBottomRichText', false);\n                const data = model.toJSON();\n                expect(data.body_bottom_text_type).toBe('plain');\n            });\n        });\n\n        describe('force_text_type field', function() {\n            it('With value', function() {\n                model.set('forceTextType', 'html');\n                const data = model.toJSON();\n                expect(data.force_text_type).toBe('html');\n            });\n\n            it('Without value', function() {\n                const data = model.toJSON();\n                expect(data.force_text_type).toBe(undefined);\n            });\n        });\n\n        describe('include_text_types field', function() {\n            it('With value', function() {\n                model.set('includeTextTypes', 'html');\n                const data = model.toJSON();\n                expect(data.include_text_types).toBe('html');\n            });\n\n            it('Without value', function() {\n                const data = model.toJSON();\n                expect(data.include_text_types).toBe(undefined);\n            });\n        });\n\n        describe('public field', function() {\n            it('With value', function() {\n                model.set('public', true);\n                const data = model.toJSON();\n                expect(data.public).toBe(true);\n            });\n        });\n    });\n});\n"],"mappings":"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"}