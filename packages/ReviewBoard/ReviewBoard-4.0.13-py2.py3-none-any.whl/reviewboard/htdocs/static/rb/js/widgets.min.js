(function(){"use strict";(function(){const optionTemplate=_.template(`<div>
<% if (useAvatars && avatarHTML) { %>
 <%= avatarHTML %>
<% } %>
<% if (fullname) { %>
 <span class="title"><%- fullname %></span>
 <span class="description">(<%- username %>)</span>
<% } else { %>
 <span class="title"><%- username %></span>
<% } %>
</div>`);RB.RelatedUserSelectorView=Djblets.RelatedObjectSelectorView.extend({searchPlaceholderText:gettext("Search for users..."),initialize(options){Djblets.RelatedObjectSelectorView.prototype.initialize.call(this,_.defaults({selectizeOptions:{searchField:["fullname","username"],sortField:[{field:"fullname"},{field:"username"}],valueField:"username"}},options));this._localSitePrefix=options.localSitePrefix||"";this._useAvatars=!!options.useAvatars},renderOption(item){return optionTemplate(_.extend({useAvatars:this._useAvatars},item))},loadOptions(query,callback){const params={fullname:1,"only-fields":"avatar_html,fullname,id,username","only-links":"","render-avatars-at":"20"};if(query.length!==0){params.q=query}$.ajax({type:"GET",url:`${SITE_ROOT}${this._localSitePrefix}api/users/`,data:params,success(results){callback(results.users.map(u=>({avatarHTML:u.avatar_html[20],fullname:u.fullname,id:u.id,username:u.username})))},error(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}console.error("User query failed",args);callback()}})}})})();"use strict";(function(){const optionTemplate=_.template(`<div>
 <span class="title"><%- name %></span>
</div>`);RB.RelatedRepoSelectorView=Djblets.RelatedObjectSelectorView.extend({searchPlaceholderText:gettext("Search for repositories..."),initialize(options){Djblets.RelatedObjectSelectorView.prototype.initialize.call(this,_.defaults({selectizeOptions:{searchField:["name"],sortField:[{field:"name"}],valueField:"name"}},options));this._localSitePrefix=options.localSitePrefix||""},renderOption(item){return optionTemplate(item)},loadOptions(query,callback){const params={"only-fields":"name,id"};if(query.length!==0){params.q=query}$.ajax({type:"GET",url:`${SITE_ROOT}${this._localSitePrefix}api/repositories/`,data:params,success:results=>{callback(results.repositories.map(u=>({name:u.name,id:u.id})))},error:function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}console.error("Repository query failed",args);callback()}})}})})();"use strict";(function(){const optionTemplate=_.template(`<div>
 <span class="title"><%- name %> : <%- display_name %></span>
</div>`);RB.RelatedGroupSelectorView=Djblets.RelatedObjectSelectorView.extend({searchPlaceholderText:gettext("Search for groups..."),initialize(options){Djblets.RelatedObjectSelectorView.prototype.initialize.call(this,_.defaults({selectizeOptions:{searchField:["name","display_name"],sortField:[{field:"name"},{field:"display_name"}],valueField:"name"}},options));this._localSitePrefix=options.localSitePrefix||"";this._inviteOnly=options.inviteOnly},renderOption(item){return optionTemplate(item)},loadOptions(query,callback){const params={"only-fields":"invite_only,name,display_name,id",displayname:1};if(query.length!==0){params.q=query}$.ajax({type:"GET",url:`${SITE_ROOT}${this._localSitePrefix}api/groups/`,data:params,success:results=>{if(this._inviteOnly===true){results.groups=results.groups.filter(obj=>{return obj.invite_only})}callback(results.groups.map(u=>({name:u.name,display_name:u.display_name,id:u.id,invite_only:u.invite_only})))},error:function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}console.error("Group query failed",args);callback()}})}})})()}).call(this);
