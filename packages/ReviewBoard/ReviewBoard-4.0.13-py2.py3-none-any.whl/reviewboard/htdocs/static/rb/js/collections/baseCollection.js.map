{"version":3,"file":"baseCollection.js","names":["RB","BaseCollection","Backbone","Collection","extend","fetch","options","arguments","length","undefined","context","_","bindCallbacks","prototype","call","sync","method","model","defaults","error","xhr","storeAPIError","isFunction"],"sources":["baseCollection.es6.js"],"sourcesContent":["/**\n * The base class used for Review Board collections.\n *\n * This is a thin subclass over Backbone.Collection that just provides\n * some useful additional abilities.\n */\nRB.BaseCollection = Backbone.Collection.extend({\n    /**\n     * Fetch models from the server.\n     *\n     * This behaves just like Backbone.Collection.fetch, except it\n     * takes a context parameter for callbacks.\n     *\n     * Args:\n     *     options (object):\n     *         Options for the fetch operation.\n     *\n     *     context (object):\n     *         Context to be used when calling success/error/complete\n     *         callbacks.\n     */\n    fetch(options={}, context=undefined) {\n        options = _.bindCallbacks(options, context);\n\n        return Backbone.Collection.prototype.fetch.call(this, options);\n    },\n\n    /**\n     * Handle all AJAX communication for the collection.\n     *\n     * Backbone.js will internally call the model's sync function to\n     * communicate with the server, which usually uses Backbone.sync.\n     *\n     * This will parse error response from Review Board so we can provide\n     * a more meaningful error callback.\n     *\n     * Args:\n     *     method (string):\n     *         The HTTP method to use for the AJAX request.\n     *\n     *     model (object):\n     *         The model to sync.\n     *\n     *     options (object):\n     *         Options for the sync operation.\n     */\n    sync(method, model, options={}) {\n        return Backbone.sync.call(this, method, model, _.defaults({\n            error: xhr => {\n                RB.storeAPIError(xhr);\n\n                if (_.isFunction(options.error)) {\n                    options.error(xhr);\n                }\n            }\n        }, options));\n    }\n});\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACAA,EAAE,CAACC,cAAc,GAAGC,QAAQ,CAACC,UAAU,CAACC,MAAM,CAAC;EAC3C;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,KAAKA,CAAA,EAAgC;IAAA,IAA/BC,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,CAAC,CAAC;IAAA,IAAEG,OAAO,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAACE,SAAS;IAC/BH,OAAO,GAAGK,CAAC,CAACC,aAAa,CAACN,OAAO,EAAEI,OAAO,CAAC;IAE3C,OAAOR,QAAQ,CAACC,UAAU,CAACU,SAAS,CAACR,KAAK,CAACS,IAAI,CAAC,IAAI,EAAER,OAAO,CAAC;EAClE,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIS,IAAIA,CAACC,MAAM,EAAEC,KAAK,EAAc;IAAA,IAAZX,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,CAAC,CAAC;IAC1B,OAAOL,QAAQ,CAACa,IAAI,CAACD,IAAI,CAAC,IAAI,EAAEE,MAAM,EAAEC,KAAK,EAAEN,CAAC,CAACO,QAAQ,CAAC;MACtDC,KAAK,EAAEC,GAAG,IAAI;QACVpB,EAAE,CAACqB,aAAa,CAACD,GAAG,CAAC;QAErB,IAAIT,CAAC,CAACW,UAAU,CAAChB,OAAO,CAACa,KAAK,CAAC,EAAE;UAC7Bb,OAAO,CAACa,KAAK,CAACC,GAAG,CAAC;QACtB;MACJ;IACJ,CAAC,EAAEd,OAAO,CAAC,CAAC;EAChB;AACJ,CAAC,CAAC"}