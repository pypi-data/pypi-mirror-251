{"version":3,"file":"resourceListItemModel.js","names":["RB","Config","ResourceListItem","Djblets","ListItem","extend","defaults","_","resource","prototype","syncAttrs","initialize","_this","get","set","pick","attributes","createResource","id","apply","arguments","listenTo","_len","length","args","Array","_key","trigger","_len2","_key2","destroy","forEach","attr","model","value","console","assert","options","undefined","stopListening","collection","isFunction","success"],"sources":["resourceListItemModel.es6.js"],"sourcesContent":["/**\n * A list item representing a resource in the API.\n *\n * This item will be backed by a resource model, which will be used for\n * all synchronization with the API. It will work as a proxy for requests\n * and events, and synchronize attributes between the resource and the list\n * item. This allows callers to work directly with the list item instead of\n * digging down into the resource.\n */\nRB.Config.ResourceListItem = Djblets.Config.ListItem.extend({\n    defaults: _.defaults({\n        resource: null\n    }, Djblets.Config.ListItem.prototype.defaults),\n\n    /** A list of attributes synced between the ListItem and the Resource. */\n    syncAttrs: [],\n\n    /**\n     * Initialize the list item.\n     *\n     * This will begin listening for events on the resource, updating\n     * the state of the icon based on changes.\n     */\n    initialize() {\n        let resource = this.get('resource');\n\n        if (resource) {\n            this.set(_.pick(resource.attributes, this.syncAttrs));\n        } else {\n            /*\n             * Create a resource using the attributes provided to this list\n             * item.\n             */\n            resource = this.createResource(_.extend(\n                { id: this.get('id') },\n                _.pick(this.attributes, this.syncAttrs)));\n\n            this.set('resource', resource);\n        }\n\n        this.resource = resource;\n\n        Djblets.Config.ListItem.prototype.initialize.apply(this, arguments);\n\n        /* Forward on a couple events we want the caller to see. */\n        this.listenTo(resource, 'request',\n                      (...args) => this.trigger('request', ...args));\n        this.listenTo(resource, 'sync',\n                      (...args) => this.trigger('sync', ...args));\n\n        /* Destroy this item when the resource is destroyed. */\n        this.listenTo(resource, 'destroy', this.destroy);\n\n        /*\n         * Listen for each synced attribute change so we can update this\n         * list item.\n         */\n        this.syncAttrs.forEach(\n            attr => this.listenTo(resource, `change:${attr}`,\n                                  (model, value) => this.set(attr, value)));\n    },\n\n    /**\n     * Create the Resource for this list item, with the given attributes.\n     */\n    createResource(/* attrs */) {\n        console.assert(false, 'createResource must be implemented');\n    },\n\n    /**\n     * Destroy the list item.\n     *\n     * This will just emit the 'destroy' signal. It is typically called when\n     * the resource itself is destroyed.\n     *\n     * Args:\n     *     options (object):\n     *         Options for the destroy operation.\n     *\n     * Option Args:\n     *     success (function):\n     *         Optional success callback.\n     */\n    destroy(options={}) {\n        this.stopListening(this.resource);\n        this.trigger('destroy', this, this.collection, options);\n\n        if (_.isFunction(options.success)) {\n            options.success(this, null, options);\n        }\n    }\n});\n"],"mappings":"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"}