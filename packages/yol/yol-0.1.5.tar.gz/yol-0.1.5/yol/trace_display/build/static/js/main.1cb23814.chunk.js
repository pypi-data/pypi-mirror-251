(this["webpackJsonptrace-display"]=this["webpackJsonptrace-display"]||[]).push([[0],{261:function(e,t,a){e.exports=a(751)},269:function(e,t,a){},270:function(e,t,a){},274:function(e,t,a){},451:function(e,t,a){},452:function(e,t,a){},453:function(e,t,a){},454:function(e,t,a){},455:function(e,t,a){},461:function(e,t,a){},751:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(228),c=a.n(o),l=(a(269),a(64)),i=a(211),s=a(1),d=(a(270),a(229)),u=a.n(d);var p=e=>{let{type:t,data:a,icon:n,onClick:o}=e;return Array.isArray(a)?r.a.createElement("div",{className:"input-output-button",onClick:o},r.a.createElement("div",{className:"input-output-button__header"},n&&r.a.createElement("div",{className:"input-output-button__header--icon"},n),r.a.createElement("strong",{className:"input-output-button__header--text"},t)),r.a.createElement("ul",{className:"input-output-button__list"},a.slice(0,1).map((e,a)=>r.a.createElement("li",{key:a,className:"input-output-button__item input-output-button__text--truncate"},"Input"===t?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"input-output-button__name"},e.name," (",e.type,")"),": ",e.value):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"input-output-button__name"},"(",e.type,")"),": ",e.value))),r.a.createElement("li",{className:"input-output-button__overflow"},a.length>1&&r.a.createElement("span",{className:"input-output-button__overflow-icon"},r.a.createElement(u.a,null))))):(console.error("Expected 'data' to be an array, but got:",a),null)},m=a(238),h=a.n(m),_=a(236),g=a.n(_),f=a(237),E=a.n(f),y=a(232),v=a.n(y),w=a(233),b=a.n(w);a(274);const N=Object(n.createContext)(null),j=e=>{let{children:t}=e;const[a,o]=Object(n.useState)({}),[c,l]=Object(n.useState)(null);return r.a.createElement(N.Provider,{value:{windows:a,visibleWindowId:c,showWindow:(e,t,a)=>{const n="".concat(e,"-").concat(t);o(n=>({...n,["".concat(e,"-").concat(t)]:{data:a,visible:!0}})),l(n)},hideWindow:(e,t,a)=>{l(null),o(n=>({...n,["".concat(e,"-").concat(t)]:{data:a,visible:!1}}))}}},t)},I=e=>{let{currentIndex:t,totalCount:a,function_name:n,parentId:o,handleNav:c}=e;return r.a.createElement("div",{className:"trace-graph-node__nav"},r.a.createElement("button",{onClick:()=>{c(t,"l",n,o)}},r.a.createElement(v.a,null)),r.a.createElement("span",null,"".concat(t," / ").concat(a)),r.a.createElement("button",{onClick:()=>{c(t,"r",n,o)}},r.a.createElement(b.a,null)))},O=e=>Object.entries(e).map(e=>{let[t,a]=e,n=" ";if(null===a)n="null";else if(Array.isArray(a))n="[".concat(a.map(e=>JSON.stringify(e)).join(", "),"]");else if("object"===typeof a){n=Object.entries(a).length>0?"{ ".concat(O(a).map(e=>"".concat(e.name,": ").concat(e.value)).join(", ")," }"):"{}"}else n=a.toString();return{name:t,value:n.replace(/["]/g,""),type:""}}),k=(e,t)=>Object.entries(e).map(e=>{let[a,n]=e,r=" ";if(null===n)r="null";else if(Array.isArray(n))r="[".concat(n.map(e=>JSON.stringify(e)).join(", "),"]");else if("object"===typeof n){r=Object.entries(n).length>0?"{ ".concat(k(n,t).map(e=>"".concat(e.value)).join(", ")," }"):"{}"}else r=n.toString();return{value:"dict"===t&&a?"".concat(a,": ").concat(r.replace(/["]/g,"")):r.replace(/["]/g,""),type:""}});var S=e=>{let{data:t}=e;const a=Object(n.useContext)(N);let o=[];const c=Object.entries(t.args).reduce((e,t)=>{let[a,{value:n}]=t;return e[a]=n,e},{});if(c&&"object"===typeof c&&!Array.isArray(c)&&(o=O(c)),o.forEach(e=>{e.type=t.args[e.name].type}),!a)throw new Error("TraceGraphNode must be used within a TraceGraphProvider");const{showWindow:i}=a;let d=[];return t.return&&"object"===typeof t.return&&!Array.isArray(t.return)?d=k({"":t.return},t.return_type):t.return&&(d=k([t.return],t.return_type)),d.forEach(e=>{e.type=t.return_type}),r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{type:"target",position:s.i.Top}),r.a.createElement("div",{className:"trace-graph-node"},r.a.createElement("div",{className:"trace-graph-node__title-nav-container"},r.a.createElement("div",{className:"trace-graph-node__title"},r.a.createElement("div",{className:"trace-graph-node__color-box",style:{backgroundColor:T(t.thread_id)}}),r.a.createElement("span",{className:"trace-graph-node__title-text"},r.a.createElement("strong",null,t.function_name)),1!==t.repeats&&r.a.createElement(I,{currentIndex:t.occurrence,totalCount:t.repeats,function_name:t.function_name,parentId:t.parentId,handleNav:t.handleNodeNavigation}))),r.a.createElement("div",{className:"trace-graph-node__inputs-button"},r.a.createElement(p,{type:"Input",data:o,icon:r.a.createElement(g.a,null),onClick:()=>i(t.id.toString(),"Input",t)})),r.a.createElement("div",{className:"trace-graph-node__return-button"},r.a.createElement(p,{type:"Output",data:d,icon:r.a.createElement(E.a,null),onClick:()=>i(t.id.toString(),"Output",t)})),r.a.createElement("div",{className:"trace-graph-node__code-latency-container"},r.a.createElement("div",{className:"trace-graph-node__code"},r.a.createElement("button",{className:"trace-graph-node__code-button",onClick:()=>i(t.id.toString(),"Code",t)},r.a.createElement(h.a,{className:"trace-graph-node__code-button-icon"}),r.a.createElement("span",{className:"trace-graph-node__code-button-text"},r.a.createElement("strong",null,"Code")))),r.a.createElement("div",{className:"trace-graph-node__latency"},r.a.createElement("span",{className:"trace-graph-node__latency-value"}," "+t.latency)))),r.a.createElement(l.b,{type:"source",position:s.i.Bottom,id:"a"})))},C=a(154),x=a.n(C);const A={traceGraphNode:S},G={customEdge:l.a},W=e=>{const t=e.latency?"".concat(e.latency.toFixed(3),"ms"):"";return{position:e.position,id:e.id,parentId:e.parentId,function_name:e.function_name,args:e.args,return:e.return,source_code:e.source_code,thread_id:e.thread_id,latency:t,return_type:e.return_type,repeats:e.repeats,occurrence:e.occurrence,handleNodeNavigation:e.handleNodeNavigation}},J=function(e){let{nodes:t,edges:a,lastGraphState:n}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TB";const o=new x.a.graphlib.Graph;o.setGraph({rankdir:r}),o.setDefaultEdgeLabel(()=>({})),t.forEach(e=>{o.setNode(e.id,{width:300,height:450})}),a.forEach(e=>{o.setEdge(e.source,e.target)}),x.a.layout(o);const c=t.map(e=>{const t=o.node(e.id);return{...e,position:{x:t.x-t.width/2,y:t.y-t.height/2}}});return{nodes:c,edges:a,lastGraphState:n}},T=e=>{let t=["#b33c39","#ffd966","#ff7f50","#38783e","#711DB0","#384f78","#C21292","#BED754","#E0AED0","#163020"],a=0;const n=e.toString();for(let r=0;r<n.length;r++)a=(a<<5)-a+n.charCodeAt(r),a&=a;return a=Math.abs(a),t[a%t.length]},F=(e,t)=>{const a=[],n=[],r=new Map,o=[{node:e,depth:0,xOffset:0}];let c=1;for(;o.length;){const{node:e,parentId:t,depth:r,xOffset:l}=o.shift(),i="node-".concat(c++);e.id=i,e.parentId=t,e.position={x:l,y:500*r},a.push({id:i,parentId:t,type:"traceGraphNode",data:W(e),position:{x:l,y:500*r}}),t&&n.push({id:"edge-".concat(t,"-").concat(i),source:t,target:i,animated:!0,label:"".concat(e.execution_order),style:{strokeWidth:8,stroke:T(e.thread_id)},labelStyle:{fontSize:"1.7em"}}),e.children.forEach((t,a)=>o.push({node:t,parentId:i,depth:r+1,xOffset:l+700*(a-(e.children.length-1)/2)}))}return{nodes:a.map(e=>({...e,data:{...e.data,handleNodeNavigation:t}})),edges:n,lastGraphState:r}},B=(e,t,a)=>{let{nodes:n,edges:r,lastGraphState:o}=e,{occurrence:c,direction:l,function_name:i,parentId:s}=t;const d=[],u=[],p=new Map,m=new Map;for(let[g,f]of o)m.set(g,f);let h;n.forEach(e=>{const t="".concat(e.data.function_name,"-from-").concat(e.parentId);p.has(t)?p.get(t).push(e):p.set(t,[e])});const _="".concat(i,"-from-").concat(s);if(p.has(_)){const e=p.get(_);h="r"==l?e[c%e.length]:"l"==l?e[(c-2+e.length)%e.length]:n[0]}else h=n[0];if(d.push(h),a)return p.forEach((e,t)=>{let a=1;e.forEach(t=>{t.data.occurrence=a,t.data.repeats=e.length,a++,(t!==h&&d.some(e=>e.id===t.parentId)&&!d.some(e=>e.parentId===t.parentId&&e.data.function_name===t.data.function_name)||void 0===t.parentId)&&(d.includes(t)||d.push(t))})}),d.forEach(e=>{const t="".concat(e.data.function_name,"-from-").concat(e.parentId);m.set(t,1),r.forEach(t=>{if(e.id===t.target&&d.some(e=>e.id===t.source)){const a={...t};a.target=e.id,u.push(a)}})}),{nodes:d,edges:u,lastGraphState:m};{p.forEach((e,t)=>{let a=1;e.forEach(t=>{t.data.occurrence=a,t.data.repeats=e.length,a++})});const e=[],t=[],a=[];for(a.push(p.get(_)[c-1]);a.length;){const t=a.shift();n.forEach(n=>{n.parentId===t.id&&(e.push(n),a.push(n))})}e.forEach(e=>{const t="".concat(e.data.function_name,"-from-").concat(e.parentId);m.set(t,-1)});const o=[];for(o.push(h);o.length;){const e=o.shift();n.forEach(a=>{a.parentId===e.id&&(t.push(a),o.push(a))})}return t.forEach(e=>{const t="".concat(e.data.function_name,"-from-").concat(e.parentId);m.set(t,1)}),m.set(_,h.data.occurrence),m.forEach((e,t)=>{-1!==e&&d.push(p.get(t)[Number(e)-1])}),d.shift(),d.forEach(e=>{r.forEach(t=>{if(e.id===t.target&&d.some(e=>e.id===t.source)){const a={...t};a.target=e.id,u.push(a)}})}),{nodes:d,edges:u,lastGraphState:m}}};var H=e=>{let{jsonData:t}=e;const a=Object(n.useMemo)(()=>JSON.stringify(t),[t]),o=(e,a,n,r)=>{var c;s.lastGraphState=null===(c=u.current)||void 0===c?void 0:c.lastGraphState;const l=F(t,o);l.lastGraphState=s.lastGraphState;const i=B(l,{occurrence:e,direction:a,function_name:n,parentId:r},!1),p=J(i);d(p)},c=Object(n.useCallback)(e=>{const t=F(e,o),a=B(t,{occurrence:-1,direction:"None",function_name:"-1",parentId:"-1"},!0);return J(a)},[a]),[s,d]=Object(n.useState)(()=>c(t)),u=r.a.useRef();return u.current=s,Object(n.useEffect)(()=>{u.current=s},[s]),Object(n.useEffect)(()=>{const e=c(t);d(e)},[a]),r.a.createElement("div",{style:{height:"90vh"}},r.a.createElement(l.c,{nodes:s.nodes,edges:s.edges,fitView:!0,attributionPosition:"bottom-right",nodeTypes:A,edgeTypes:G},r.a.createElement(i.a,{color:"#aaa",gap:16})))},D=a(795),M=(a(451),a(794)),P=a(800),R=(a(452),a(239)),L=a.n(R);var Y=()=>{const[e,t]=Object(n.useState)({current_version:"",latest_version:"",message:""});return Object(n.useEffect)(()=>{fetch("/check-version").then(e=>e.json()).then(e=>{t(e)}).catch(e=>console.error("Error checking version:",e))},[]),e.current_version&&e.latest_version!==e.current_version?r.a.createElement(M.a,{severity:"warning",className:"versionCheck__alert versionCheck__alert--warning"},e.message," -",r.a.createElement(P.a,{color:"inherit",className:"versionCheck__button",onClick:()=>navigator.clipboard.writeText("pip install --upgrade yol")},r.a.createElement("span",{className:"versionCheck__command"},"pip install --upgrade yol")," ",r.a.createElement(L.a,{className:"versionCheck__copy-icon"})," ")):null};var z=()=>r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header__logo"},"YOL"),r.a.createElement(Y,null),r.a.createElement(D.a,{variant:"contained",className:"header__feedback",href:"https://forms.gle/WSyYjaa8B7cYHTuu5",target:"_blank",rel:"noopener noreferrer"},"Feedback")),V=a(793);a(453);var q=()=>r.a.createElement("footer",{className:"footer"},r.a.createElement("a",{href:"https://www.neuralbridge.ai/",target:"_blank",className:"footer__company-name"},"Neural Bridge"),r.a.createElement("div",{className:"footer__links"},r.a.createElement("a",{href:"https://www.neuralbridge.ai/",className:"footer__link"},"About"),r.a.createElement("a",{href:"https://www.neuralbridge.ai/",className:"footer__link"},"Contact"),r.a.createElement("a",{href:"https://www.neuralbridge.ai/",className:"footer__link"},"Terms of Service"),r.a.createElement("a",{href:"https://www.neuralbridge.ai/",className:"footer__link"},"Privacy Policy")),r.a.createElement(V.a,{variant:"body2",color:"textSecondary",align:"center"},"\xa9 2023 Neural Bridge. All rights reserved."));a(454);var K=e=>{let{threadIds:t,threadNames:a,getColorForThread:n}=e;return r.a.createElement("div",{className:"thread-legend"},r.a.createElement("div",{className:"thread-legend__title"},"Threads"),t.map((e,t)=>r.a.createElement("div",{key:e,className:"thread-legend__item"},r.a.createElement("div",{className:"thread-legend__color",style:{backgroundColor:n(e)}}),r.a.createElement("div",{className:"thread-legend__label"},r.a.createElement("strong",null,"ID:")," ",e," | ",r.a.createElement("strong",null,"Name:")," ",a[t]))))},Q=a(796),U=a(244),X=(a(455),a(117));const Z=(e,t)=>{let a=!1;return Object.entries(e).map(e=>{let[n,r]=e,o=" ";return null===r?o="null":Array.isArray(r)?o="[".concat(r.map(e=>(a="object"===typeof e||a,JSON.stringify(e,null,2))).join(", "),"]"):"object"===typeof r?(o=JSON.stringify(r,null,2),a=!0):o=r.toString(),{value:"dict"===t&&n?"".concat(n,": ").concat(o.replace(/["]/g,"")):o.replace(/["]/g,""),type:"",isJson:a}})};var $=e=>{let{type:t,node:a,icon:n,onClose:o}=e;"Input"==t?a.args:a.return;let c=[];const l=Object.entries(a.args).reduce((e,t)=>{let[a,{value:n}]=t;return e[a]=n,e},{});var i;l&&"object"===typeof l&&!Array.isArray(l)&&(i=l,c=Object.entries(i).map(e=>{let[t,a]=e,n=!1,r=" ";return null===a?r="null":Array.isArray(a)?r="[".concat(a.map(e=>(n="object"===typeof e||n,JSON.stringify(e,null,2))).join(", "),"]"):"object"===typeof a?(r=JSON.stringify(a,null,2),n=!0):r=a.toString(),{name:t,value:r.replace(/["]/g,""),type:"",isJson:n}})),c.forEach(e=>{e.type=a.args[e.name].type});let s=[];a.return&&"object"===typeof a.return&&!Array.isArray(a.return)?s=Z({"":a.return},a.return_type):a.return&&(s=Z([a.return],a.return_type)),s.forEach((e,t)=>{e.type=a.return_type});a.position.x,a.position.y;return r.a.createElement(X.a,{className:"input-output-window",dragHandleClassName:"input-output-window__draghandle",default:{x:window.innerWidth/2-window.innerWidth/4,y:window.innerHeight/2-window.innerHeight/4,width:window.innerWidth/2,height:window.innerHeight/2},enableResizing:{bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!0,topRight:!0},style:{display:"grid"}},r.a.createElement("div",{className:"input-output-window__draghandle"},r.a.createElement("div",{className:"input-output-window__header"},r.a.createElement("button",{onClick:o,className:"input-output-window__clearbutton"},n),r.a.createElement("strong",{className:"input-output-window__title"},t," of ",a.function_name))),r.a.createElement("div",{className:"input-output-window__content"},r.a.createElement("ul",{className:"input-output-window__list"},"Input"==t?c.map((e,t)=>r.a.createElement("li",{key:t,className:"input-output-window__item"},r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"input-output-window__name"},e.name," (",e.type,"):"),e.isJson?r.a.createElement("pre",null,e.value):" "+e.value))):s.map((e,t)=>r.a.createElement("li",{key:t,className:"input-output-window__item"},r.a.createElement("span",{className:"input-output-button__name"},"(",e.type,"):"),e.isJson?r.a.createElement("pre",null,e.value):" "+e.value)))))},ee=a(155),te=a.n(ee),ae=a(797);a(461);var ne=e=>{let{node:t,icon:a,onClose:n}=e;return r.a.createElement(X.a,{className:"code-window",dragHandleClassName:"code-window__draghandle",default:{x:window.innerWidth/2-300,y:window.innerHeight/2-200,width:window.innerWidth/2,height:window.innerHeight/2},style:{display:"grid"}},r.a.createElement("div",{className:"code-window__draghandle"},r.a.createElement("button",{onClick:n,className:"code-window__clearbutton"},a&&r.a.createElement("div",{className:"code-window__icon"},a)),r.a.createElement("strong",{className:"code-window__header"},"Code")),r.a.createElement("div",{className:"code-window__content"},r.a.createElement(ae.a,{language:"python"},t.source_code.trim())))};var re=()=>{const e=Object(n.useContext)(N),[t,a]=Object(n.useState)(null===e||void 0===e?void 0:e.windows),[o,c]=Object(n.useState)(null===e||void 0===e?void 0:e.visibleWindowId);if(Object(n.useEffect)(()=>{e&&(a(e.windows),c(e.visibleWindowId||null))},[null===e||void 0===e?void 0:e.windows,null===e||void 0===e?void 0:e.visibleWindowId]),!e)throw new Error("NodeWindows must be used within a TraceGraphProvider");const{hideWindow:l}=e;return r.a.createElement(r.a.Fragment,null,t&&Object.entries(t).map(e=>{let[t,a]=e;if(a.visible&&t===o){const[e,n,o]=t.split("-"),c=e+"-"+n,i="Input"===o;return"Output"===o||"Input"===o?a.visible&&r.a.createElement($,{key:t,type:i?"Input":"Output",node:a.data,icon:r.a.createElement(te.a,null),onClose:()=>l(c.toString(),i?"Input":"Output",a.data)}):a.visible&&r.a.createElement(ne,{key:t,type:"Code",node:a.data,icon:r.a.createElement(te.a,null),onClose:()=>l(c.toString(),"Code",a.data)})}}))};let oe=0;const ce=e=>{var t;return{position:{x:0,y:0},id:"",parentId:"",function_name:e.function_name,args:e.args||[],kwargs:e.kwargs||{},thread_id:e.thread_id,thread_name:e.thread_name,execution_order:oe++,children:(null===(t=e.children)||void 0===t?void 0:t.map(ce))||[],return:e.return,latency:e.latency,source_code:e.source_code,return_type:e.return_type,occurrence:0,repeats:0,handleNodeNavigation(){}}},le=e=>{let t=[];const a=e=>{if(t.some(t=>t.id===e.thread_id)||t.push({id:e.thread_id,name:e.thread_name}),e.children)for(let t of e.children)a(t)};return a(e),t};var ie=()=>{const[e,t]=Object(n.useState)([]),[a,o]=Object(n.useState)([]);return Object(n.useEffect)(()=>{const e=()=>{oe=0,fetch("/trace").then(e=>e.json()).then(e=>{const a=e.map(ce);t(a);const n=a.flatMap(le);o(n)}).catch(e=>console.error("Error fetching trace data:",e))};e();const a=setInterval(e,100);return()=>clearInterval(a)},[]),r.a.createElement(Q.a,{theme:Object(U.a)()},r.a.createElement("div",null,r.a.createElement(z,null),r.a.createElement(K,{threadIds:a.map(e=>e.id),threadNames:a.map(e=>e.name),getColorForThread:T}),r.a.createElement(j,null,r.a.createElement(re,null),e.map((e,t)=>r.a.createElement(H,{key:t,jsonData:e}))),r.a.createElement(q,null)))};c.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ie,null)))}},[[261,1,2]]]);
//# sourceMappingURL=main.1cb23814.chunk.js.map