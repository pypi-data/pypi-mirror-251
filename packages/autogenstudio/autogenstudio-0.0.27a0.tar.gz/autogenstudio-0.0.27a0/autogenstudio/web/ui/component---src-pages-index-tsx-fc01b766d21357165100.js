"use strict";(self.webpackChunkAutoGen_Studio=self.webpackChunkAutoGen_Studio||[]).push([[691],{24021:function(e,t,s){s.r(t),s.d(t,{default:function(){return y}});var a=s(67294),l=s(30372),n=s(15596),r=s(33311),o=s(91160),i=s(1642),c=s(51446);var m=a.forwardRef((function({title:e,titleId:t,...s},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:l,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))})),d=s(76249);var u=a.forwardRef((function({title:e,titleId:t,...s},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:l,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418"}))})),f=s(66247),v=s(78680),g=s(45256),w=s(63430),E=s(89132),h=s(30240),p=s(99374),x=s(71082);var b=()=>{const[e,t]=a.useState({status:!0,message:"All good"}),[s,l]=a.useState(!1),r=((0,h.F)((e=>e.workflowConfig)),(0,h.F)((e=>e.setWorkflowConfig))),{user:c}=a.useContext(o.T),m=`${(0,n.RU)()}/workflows?user_id=${null==c?void 0:c.email}`,[d,u]=a.useState([]),[f,v]=a.useState(0);return a.useEffect((()=>{c&&(t(null),l(!0),(0,n.ZV)(m,{method:"GET",headers:{"Content-Type":"application/json"}},(e=>{e&&e.status?(i.ZP.success(e.message),u(e.data),e.data.length>0&&r(e.data[0])):i.ZP.error(e.message),l(!1)}),(e=>{t(e),i.ZP.error(e.message),l(!1)})))}),[]),a.createElement("div",{className:" mb-4 relative"},a.createElement("div",{className:"text-sm mt-2 mb-2 pb-1  "}," ","Please select an agent workflow to begin."," "),a.createElement("div",{className:"relative mt-2 "},a.createElement(E.fz,{loading:s}),d&&d.length>0&&a.createElement(p.Z,{className:"w-full",value:d[f].name,onChange:e=>{v(e),r(d[e])},options:d.map(((e,t)=>({label:e.name,value:t})))}),a.createElement("div",{className:"mt-2 text-xs"}," ","View all workflows"," ",a.createElement("span",{className:"text-accent"}," ",a.createElement(x.Link,{to:"/build"},"here"))," ")),!d||d&&0===d.length&&a.createElement("div",{className:"p-1 border rounded text-xs px-2 text-secondary"}," ","No agent workflows found."))};var N=e=>{let{}=e;const[t,s]=a.useState(!1),[l,r]=a.useState({status:!0,message:"All good"}),{user:c}=a.useContext(o.T),m=(0,n.RU)(),p=`${m}/sessions?user_id=${null==c?void 0:c.email}`,x=`${m}/sessions`,N=`${m}/sessions/publish`,k=`${m}/sessions/delete`,Z=(0,h.F)((e=>e.sessions)),y=(0,h.F)((e=>e.workflowConfig)),C=(0,h.F)((e=>e.setSessions)),S=(0,h.F)((e=>e.session)),P=(0,h.F)((e=>e.setSession)),_=(0,h.F)((e=>e.setWorkflowConfig)),[L,j]=a.useState(!1);a.useEffect((()=>{if(Z&&Z.length>0){const e=Z[0];P(e),_(null==e?void 0:e.flow_config)}else P(null)}),[Z]);a.useEffect((()=>{c&&(r(null),s(!0),(0,n.ZV)(p,{method:"GET",headers:{"Content-Type":"application/json"}},(e=>{e&&e.status?(i.ZP.success(e.message),C(e.data),e.data&&e.data.length):i.ZP.error(e.message),s(!1)}),(e=>{r(e),i.ZP.error(e.message),s(!1)})))}),[]);const T=Z.map(((e,t)=>{const l=(null==S?void 0:S.id)===e.id?"bg-accent text-white":"bg-secondary text-primary";return a.createElement("div",{key:"sessionsrow"+t,className:"  mb-2 pb-1  border-b border-dashed "},a.createElement("div",{className:`rounded p-2 cursor-pointer ${l}`,role:"button",onClick:()=>{P(e),_(e.flow_config)}},a.createElement("div",{className:"text-xs"},(0,n.aF)(e.id,27)),a.createElement("div",{className:"text-xs"},e.flow_config.name),a.createElement("div",{className:"text-xs text-right "},(0,n.Sy)(e.timestamp)," ")),a.createElement("div",{className:"flex mt-2 text-secondary"},a.createElement("div",{className:"flex-1"}),a.createElement("div",{role:"button",onClick:()=>{(e=>{r(null),s(!0);const t={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:null==c?void 0:c.email,session:e})};(0,n.ZV)(k,t,(e=>{e&&e.status?(i.ZP.success(e.message),C(e.data),e.data&&e.data.length>0&&P(e.data[0])):i.ZP.error(e.message),s(!1)}),(e=>{r(e),i.ZP.error(e.message),s(!1)}))})(e)},className:"text-xs px-2  hover:text-accent cursor-pointer"},a.createElement(d.Z,{className:"w-4 h-4 inline-block mr-1 "}),"delete"," "),a.createElement("div",{role:"button",onClick:()=>{(()=>{r(null),s(!0);const e={user_id:null==c?void 0:c.email,session:S,tags:["published"]},t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};(0,n.ZV)(N,t,(e=>{e&&e.status?i.ZP.success(e.message):i.ZP.error(e.message),s(!1)}),(e=>{r(e),i.ZP.error(e.message),s(!1)}))})()},className:"text-xs px-2  hover:text-accent cursor-pointer"},a.createElement(u,{className:"w-4 h-4 inline-block mr-1 "}),"publish"," ")))}));let F,$;return"undefined"!=typeof window&&(F=window.innerHeight,$=F-400+"px"),a.createElement("div",{className:"  "},a.createElement(g.Z,{title:a.createElement("div",{className:"font-semibold mb-2 pb-1 border-b"},a.createElement(f.Z,{className:"h-5 w-5 inline-block mr-1"}),"New Sessions"," "),open:L,footer:[a.createElement(w.ZP,{key:"back",onClick:()=>{j(!1)}},"Cancel"),a.createElement(w.ZP,{key:"submit",type:"primary",disabled:!y,onClick:()=>{j(!1),(()=>{r(null),s(!0);const e={user_id:null==c?void 0:c.email,session:{user_id:null==c?void 0:c.email,flow_config:y,session_id:null}},t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};console.log("createSession",t),(0,n.ZV)(x,t,(e=>{var t;e&&e.status?(i.ZP.success(e.message),C(e.data),_(null===(t=e.data[0])||void 0===t?void 0:t.workflow_config)):i.ZP.error(e.message),s(!1)}),(e=>{r(e),i.ZP.error(e.message),s(!1)}))})()}},"Create")]},a.createElement(b,null)),a.createElement("div",{className:"mb-2 relative"},a.createElement("div",{className:""},a.createElement("div",{className:"font-semibold mb-2 pb-1 border-b"},a.createElement(f.Z,{className:"h-5 w-5 inline-block mr-1"}),"Sessions"," "),Z&&Z.length>0&&a.createElement("div",{className:"text-xs mb-2 pb-1  "}," ","Create a new session or select an existing session to view chat."),a.createElement("div",{style:{maxHeight:"300px"},className:"mb-4 overflow-y-scroll scroll rounded relative "},a.createElement(E.fz,{loading:t}),T),(!Z||0==Z.length)&&!t&&a.createElement("div",{className:"text-xs text-gray-500"},"No sessions found. Create a new session to get started.")),a.createElement("div",{className:"flex gap-x-2"},a.createElement("div",{className:"flex-1"}),a.createElement(E.Cw,{className:"text-sm p-2 px-3",onClick:()=>{var e;Z&&Z.length>0?_(null===(e=Z[0])||void 0===e?void 0:e.flow_config):_(null);j(!0)}}," ",a.createElement(v.Z,{className:"w-5 h-5 inline-block mr-1"}),"New"))))};var k=()=>{const[e,t]=a.useState(!0),s=e?"270px":"50px";let l,n;"undefined"!=typeof window&&(l=window.innerHeight,n=l-180+"px");(0,h.F)((e=>e.workflowConfig));return a.createElement("div",{style:{minWidth:s,maxWidth:s,height:"calc(100vh - 190px)"},className:"    "},a.createElement("div",{className:" transition overflow-hidden duration-300  flex flex-col   h-full p-2 overflow-y-scroll scroll rounded "},a.createElement("div",{className:(e?"":"hidden")+"  "},a.createElement(N,null))),a.createElement("div",{onClick:()=>t(!e),role:"button",className:" hover:text-accent duration-150  "},e?a.createElement("div",{className:"mt-4  "}," ",a.createElement(c.Z,{className:"w-6 h-6  inline-block    rounded"})," ",a.createElement("span",{className:"text-xs "}," close sidebar")):a.createElement(m,{className:"w-6 h-6   inline-block   font-bold rounded "})))};var Z=()=>{const e=(0,h.F)((e=>e.session)),[t,s]=a.useState(!1),[l,c]=a.useState(null),[m,d]=a.useState("default"),[u,f]=a.useState(null);a.useEffect((()=>{(0,n.qQ)("ara_config",u)}),[u]);const[v,g]=a.useState({status:!0,message:"All good"}),{user:w}=a.useContext(o.T),E=`${(0,n.RU)()}/messages?user_id=${null==w?void 0:w.email}&session_id=${null==e?void 0:e.id}`,p=(0,h.F)((e=>e.workflowConfig));return a.useEffect((()=>{w&&e&&(g(null),s(!0),c(null),(0,n.ZV)(E,{method:"GET",headers:{"Content-Type":"application/json"}},(e=>{e&&e.status?(c(e.data),i.ZP.success(e.message)):i.ZP.error(e.message),s(!1)}),(e=>{g(e),i.ZP.error(e.message),s(!1)})))}),[e]),a.createElement("div",{className:"h-full   "},a.createElement("div",{className:"flex h-full   "},a.createElement("div",{className:"  mr-2  rounded"},a.createElement(k,null)),a.createElement("div",{className:" flex-1  "},!e&&a.createElement("div",{className:" w-full  h-full flex items-center justify-center"},a.createElement("div",{className:"w-2/3",id:"middle"},a.createElement("div",{className:"w-full   text-center"}," ",a.createElement("img",{src:"/images/svgs/welcome.svg",alt:"welcome",className:"text-accent inline-block object-cover w-56"})),a.createElement(N,null))),null!==p&&null!==e&&a.createElement(r.Z,{initMessages:l}))))};var y=e=>{let{data:t}=e;return a.createElement(l.Z,{meta:t.site.siteMetadata,title:"Home",link:"/"},a.createElement("main",{style:{height:"100%"},className:" h-full "},a.createElement(Z,null)))}},66247:function(e,t,s){var a=s(67294);const l=a.forwardRef((function({title:e,titleId:t,...s},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:l,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.429 9.75L2.25 12l4.179 2.25m0-4.5l5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0l4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0l-5.571 3-5.571-3"}))}));t.Z=l},76249:function(e,t,s){var a=s(67294);const l=a.forwardRef((function({title:e,titleId:t,...s},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:l,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}));t.Z=l}}]);
//# sourceMappingURL=component---src-pages-index-tsx-fc01b766d21357165100.js.map