"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[1804],{3520:(e,s,t)=>{t.r(s),t.d(s,{default:()=>me});var o=t(6252),i=t(3577);const a={class:"card"},n={class:"card-body"},r={key:0},l={key:1},d=(0,o._)("hr",null,null,-1),u={class:"row"},c={class:"col-md-4"},m=(0,o._)("strong",null,"List of Users",-1),p={text:"text-instructions"},h={class:"col-md-8"},_={class:"table"},g=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("td",null,"User"),(0,o._)("td",null,"Group List"),(0,o._)("td",null,"Permission List"),(0,o._)("td",null,"Team Leader"),(0,o._)("td")])],-1),b={style:{"text-align":"center"}},v=["checked","data-group","data-permission-set","data-user"],f={class:"remove-link"},y=(0,o._)("hr",null,null,-1),w={class:"row"},k={class:"col-md-12"};var M=t(3138),S=t(3058),D=t(624);const U={class:"modal fade",id:"addUserModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"addUserModalLabel","aria-hidden":"true"},Z={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},I={class:"modal-content"},L=(0,o._)("div",{class:"modal-header"},[(0,o._)("h5",{class:"modal-title",id:"addUserModalLabel"}," Add User "),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),P={class:"modal-body"},C={key:0,class:"row"},R={class:"col-md-4"},E=(0,o._)("strong",null,"Search Users",-1),x={class:"text-instructions"},A={class:"col-md-8"},T=(0,o._)("label",null,"Search User",-1),$={key:1},B={key:2,class:"row"},q=(0,o._)("div",{class:"col-md-4"},[(0,o._)("strong",null,"Search Groups"),(0,o._)("p",{class:"text-instructions"}," Please use the select to find the group you would like to add to this user to. ")],-1),W={class:"col-md-8"},G=(0,o._)("label",null,"Search Groups",-1),H={key:3},F={key:4,class:"row"},N=(0,o._)("div",{class:"col-md-4"},[(0,o._)("strong",null,"Search Permission Sets"),(0,o._)("p",{class:"text-instructions"}," Please use the select to find the permission set you would like to add to this user. ")],-1),j={class:"col-md-8"},O=(0,o._)("label",null,"Search Permission Sets",-1),Y={class:"modal-footer"},J=(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);var K=t(2001),V=t(989);const z={name:"AdminAddUser",components:{NSelect:K.Z},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},data:()=>({groupModel:[],groupResults:[],permissionSetModel:[],permissionSetResults:[],userModel:[],userResults:[]}),computed:{...(0,V.Se)({rootUrl:"getRootUrl",userLevel:"getUserLevel"})},mixins:[S.Z],methods:{addUser(){const e=new FormData;e.set("username",this.userModel),this.groupModel.forEach((s=>{e.append("group",s)})),this.permissionSetModel.forEach((s=>{e.append("permission_set",s)})),this.axios.post(`${this.rootUrl}admin_add_user/`,e).then((e=>{window.location.reload(!0)})).catch((e=>{this.showErrorModal(e,"Admin Add user","")}))},getData(){const e=new FormData;this.axios.post(`${this.rootUrl}object_data/admin_add_user/`,e).then((e=>{switch(this.groupResults=e.data.group_results.map((e=>({label:e.group_name,value:e.group_id}))),this.permissionSetResults=e.data.permission_set_results.map((e=>({label:e.permission_set_name,value:e.permission_set_id}))),this.userResults=e.data.user_results.map((e=>({label:`${e.id}: ${e.first_name} ${e.last_name}`,value:e.id}))),this.destination){case"group":this.groupModel=[this.locationId];break;case"permission_set":this.permissionSetModel=[this.locationId];break;case"user":this.userModel=this.locationId}})).catch((e=>{this.showErrorModal(e,"Admin Add User","")}))}},mounted(){this.getData()}};var Q=t(3744);const X=(0,Q.Z)(z,[["render",function(e,s,t,a,n,r){const l=(0,o.up)("n-select");return(0,o.wg)(),(0,o.iD)("div",U,[(0,o._)("div",Z,[(0,o._)("div",I,[L,(0,o._)("div",P,[(0,o.kq)(" Search Users "),"user"!==t.destination?((0,o.wg)(),(0,o.iD)("div",C,[(0,o._)("div",R,[E,(0,o._)("p",x," Please use the select to find the user you would like to add to this "+(0,i.toDisplayString)(t.destination),1)]),(0,o._)("div",A,[T,(0,o.Wm)(l,{options:n.userResults,value:n.userModel,"onUpdate:value":s[0]||(s[0]=e=>n.userModel=e),class:"form-control"},null,8,["options","value"])])])):(0,o.kq)("v-if",!0),"user"!==t.destination?((0,o.wg)(),(0,o.iD)("hr",$)):(0,o.kq)("v-if",!0),(0,o.kq)(" Search Groups "),"group"!==t.destination?((0,o.wg)(),(0,o.iD)("div",B,[q,(0,o._)("div",W,[G,(0,o.Wm)(l,{options:n.groupResults,value:n.groupModel,"onUpdate:value":s[1]||(s[1]=e=>n.groupModel=e),class:"form-control",multiple:""},null,8,["options","value"])])])):(0,o.kq)("v-if",!0),"group"!==t.destination?((0,o.wg)(),(0,o.iD)("hr",H)):(0,o.kq)("v-if",!0),(0,o.kq)(" Search Permission Sets "),"permission_set"!==t.destination?((0,o.wg)(),(0,o.iD)("div",F,[N,(0,o._)("div",j,[O,(0,o.Wm)(l,{options:n.permissionSetResults,value:n.permissionSetModel,"onUpdate:value":s[2]||(s[2]=e=>n.permissionSetModel=e),class:"form-control",multiple:""},null,8,["options","value"])])])):(0,o.kq)("v-if",!0)]),(0,o._)("div",Y,[J,(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:s[3]||(s[3]=(...e)=>r.addUser&&r.addUser(...e))}," Add User ")])])])])}]]),ee={class:"modal fade",id:"confirmPermissionDeleteModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"confirmPermissionDeleteLabel","aria-hidden":"true"},se={class:"modal-dialog"},te={class:"modal-content"},oe=(0,o._)("div",{class:"modal-header"},[(0,o._)("h1",{class:"modal-title fs-5",id:"confirmPermissionDeleteLabel"}," Are you sure? "),(0,o._)("button",{type:"button",id:"confirmPermissionDeleteClose",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ie=(0,o._)("div",{class:"modal-body"}," Are you sure you want to delete that permission? ",-1),ae={class:"modal-footer"},ne=(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," No ",-1),re={name:"ConfirmPermissionDelete",props:{permissionDeleteId:{type:Number,default:0}},methods:{removePermission(){const e=new FormData;e.set("user_group_id",this.permissionDeleteId),this.axios.post("/user_information/remove_permission/",e).catch((e=>{this.showErrorModal(e,this.destination)})),this.$emit("remove_permission",this.permissionDeleteId),document.getElementById("confirmPermissionDeleteClose").click()}}},le=(0,Q.Z)(re,[["render",function(e,s,t,i,a,n){return(0,o.wg)(),(0,o.iD)("div",ee,[(0,o._)("div",se,[(0,o._)("div",te,[oe,ie,(0,o._)("div",ae,[ne,(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:s[0]||(s[0]=(...e)=>n.removePermission&&n.removePermission(...e))}," Yes ")])])])])}]]);var de=t(6542),ue=t(5808);const ce={name:"UserList",components:{AdminAddUser:X,ConfirmPermissionDelete:le,Icon:de.JO},props:{destination:{type:String,default:""},locationId:{type:Number,default:0},theme:{type:String,default:""},userListResults:{type:Array,default:()=>[]}},data:()=>({localListResults:[],permissionDeleteId:0}),mixins:[S.Z,D.Z,ue.Z],methods:{addUser(){new M.u_(document.getElementById("addUserModal")).show()},deletePermission(e){this.permissionDeleteId=e,new M.u_(document.getElementById("confirmPermissionDeleteModal")).show()},isTeamLeader(e){return this.userListResults.filter((s=>s.username===e&&s.group_leader)).length>0},removePermission(e){this.localListResults=this.localListResults.filter((s=>s.user_group_id!==e))},updateGroupLeader(e){new M.u_("#loadingModal").show();const s=document.getElementById("loadingModalContent");s.innerHTML="Updating Team Leader Status";const t=e.target.checked,o=new FormData;o.set("group_leader",t),o.set("username",e.target.dataset.user),"group"===this.destination||"user"===this.destination?o.set("group",e.target.dataset.group):"permission_set"===this.destination&&o.set("permission_set",e.target.dataset.permissionSet),this.axios.post(`/update_group_leader_status/${this.destination}/`,o).then((e=>{this.localListResults=e.data,s.innerHTML="Updated  Team Leader Status Complete"})).catch((e=>{this.showErrorModal(e,this.destination)}))}},mounted(){this.localListResults=this.userListResults}},me=(0,Q.Z)(ce,[["render",function(e,s,t,M,S,D){const U=(0,o.up)("Icon"),Z=(0,o.up)("admin-add-user"),I=(0,o.up)("confirm-permission-delete"),L=(0,o.up)("n-config-provider");return(0,o.wg)(),(0,o.j4)(L,{theme:e.getTheme(t.theme)},{default:(0,o.w5)((()=>[(0,o._)("div",a,[(0,o._)("div",n,["user"===t.destination?((0,o.wg)(),(0,o.iD)("h2",r,"User Permission List")):((0,o.wg)(),(0,o.iD)("h2",l,"User List")),d,(0,o._)("div",u,[(0,o._)("div",c,[m,(0,o._)("p",p," The following are a list of users associated to "+(0,i.toDisplayString)(t.destination)+'. To add a new user please click on the "Add User" at the bottom of the page. ',1)]),(0,o._)("div",h,[(0,o._)("table",_,[g,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(S.localListResults,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.username},[(0,o._)("td",null,(0,i.toDisplayString)(t.username__first_name)+" "+(0,i.toDisplayString)(t.username__last_name),1),(0,o._)("td",null,(0,i.toDisplayString)(t.group__group_name),1),(0,o._)("td",null,(0,i.toDisplayString)(t.permission_set__permission_set_name),1),(0,o._)("td",b,[(0,o._)("input",{class:"form-check-input",type:"checkbox",checked:t.group_leader,"data-group":t.group,"data-permission-set":t.permission_set,"data-user":t.username,onChange:s[0]||(s[0]=(...e)=>D.updateGroupLeader&&D.updateGroupLeader(...e))},null,40,v)]),(0,o._)("td",null,[(0,o._)("span",f,[(0,o.Wm)(U,{icon:e.icons.trashCan,onClick:e=>D.deletePermission(t.user_group_id)},null,8,["icon","onClick"])])])])))),128))])])])]),y,(0,o._)("div",w,[(0,o._)("div",k,[(0,o._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:s[1]||(s[1]=(...e)=>D.addUser&&D.addUser(...e))},"Add User")])])]),(0,o.kq)(" MODALS "),(0,o.Wm)(Z,{destination:t.destination,"location-id":t.locationId},null,8,["destination","location-id"]),(0,o.Wm)(I,{"permission-delete-id":S.permissionDeleteId,onRemove_permission:D.removePermission},null,8,["permission-delete-id","onRemove_permission"])])])),_:1},8,["theme"])}]])},3058:(e,s,t)=>{t.d(s,{Z:()=>i});var o=t(3138);const i={methods:{showErrorModal(e,s,t){const i=document.getElementById("loadingModal");if(null===i)return;new o.u_(i).hide();const a=document.getElementById("errorModalContent");if(void 0===a)return;if(a.innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new ${s}-${t}<hr>${e}`,null===document.getElementById("errorModal"))return;const n=new o.u_(n);n.show()},showValidationErrorModal(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new o.u_(document.getElementById("errorModal")).show()}}}},624:(e,s,t)=>{t.d(s,{Z:()=>i});var o=t(7449);const i={data:()=>({darkTheme:o.$}),methods:{getTheme:e=>"dark"===e?o.$:null}}},5808:(e,s,t)=>{t.d(s,{Z:()=>I});var o=t(3985),i=t(5555),a=t(1826),n=t(6443),r=t(1327),l=t(8521),d=t(1056),u=t(4324),c=t(9672),m=t(9867),p=t(1239),h=t(5004),_=t(1321),g=t(1216),b=t(5550),v=t(7702),f=t(7903),y=t(2606),w=t(3843),k=t(2393),M=t(3360),S=t(9714),D=t(1323),U=t(2610),Z=t(5968);const I={data:()=>({icons:{arrowUp:o.Z,bugIcon:i.Z,bxBriefcase:a.Z,cardChecklist:n.Z,clipboardIcon:r.Z,documentPdf:l.Z,documentText:d.Z,folderIcon:u.Z,groupPresentation:c.Z,imageIcon:m.Z,infoCircle:p.Z,linkIcon:h.Z,linkIcon2:_.Z,linkOut:g.Z,mailIcon:b.Z,microsoftExcel:v.Z,microsoftPowerpoint:f.Z,microsoftWord:y.Z,noteAdd:w.Z,objectStorage:k.Z,passwordIcon:M.Z,trashCan:S.Z,userIcon:D.Z,usersIcon:U.Z,xCircle:Z.Z}})}}}]);