"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[4093],{6403:(o,r,e)=>{e.d(r,{Z:()=>a,m:()=>i});const t={paddingTiny:"0 6px",paddingSmall:"0 10px",paddingMedium:"0 14px",paddingLarge:"0 18px",paddingRoundTiny:"0 10px",paddingRoundSmall:"0 14px",paddingRoundMedium:"0 18px",paddingRoundLarge:"0 22px",iconMarginTiny:"6px",iconMarginSmall:"6px",iconMarginMedium:"6px",iconMarginLarge:"6px",iconSizeTiny:"14px",iconSizeSmall:"18px",iconSizeMedium:"18px",iconSizeLarge:"20px",rippleDuration:".6s"};var s=e(8373);const i=o=>{const{heightTiny:r,heightSmall:e,heightMedium:s,heightLarge:i,borderRadius:a,fontSizeTiny:l,fontSizeSmall:n,fontSizeMedium:d,fontSizeLarge:c,opacityDisabled:u,textColor2:g,textColor3:x,primaryColorHover:p,primaryColorPressed:C,borderColor:m,primaryColor:h,baseColor:b,infoColor:f,infoColorHover:v,infoColorPressed:y,successColor:P,successColorHover:S,successColorPressed:T,warningColor:_,warningColorHover:$,warningColorPressed:E,errorColor:w,errorColorHover:I,errorColorPressed:H,fontWeight:M,buttonColor2:W,buttonColor2Hover:D,buttonColor2Pressed:O,fontWeightStrong:F}=o;return Object.assign(Object.assign({},t),{heightTiny:r,heightSmall:e,heightMedium:s,heightLarge:i,borderRadiusTiny:a,borderRadiusSmall:a,borderRadiusMedium:a,borderRadiusLarge:a,fontSizeTiny:l,fontSizeSmall:n,fontSizeMedium:d,fontSizeLarge:c,opacityDisabled:u,colorOpacitySecondary:"0.16",colorOpacitySecondaryHover:"0.22",colorOpacitySecondaryPressed:"0.28",colorSecondary:W,colorSecondaryHover:D,colorSecondaryPressed:O,colorTertiary:W,colorTertiaryHover:D,colorTertiaryPressed:O,colorQuaternary:"#0000",colorQuaternaryHover:D,colorQuaternaryPressed:O,color:"#0000",colorHover:"#0000",colorPressed:"#0000",colorFocus:"#0000",colorDisabled:"#0000",textColor:g,textColorTertiary:x,textColorHover:p,textColorPressed:C,textColorFocus:p,textColorDisabled:g,textColorText:g,textColorTextHover:p,textColorTextPressed:C,textColorTextFocus:p,textColorTextDisabled:g,textColorGhost:g,textColorGhostHover:p,textColorGhostPressed:C,textColorGhostFocus:p,textColorGhostDisabled:g,border:`1px solid ${m}`,borderHover:`1px solid ${p}`,borderPressed:`1px solid ${C}`,borderFocus:`1px solid ${p}`,borderDisabled:`1px solid ${m}`,rippleColor:h,colorPrimary:h,colorHoverPrimary:p,colorPressedPrimary:C,colorFocusPrimary:p,colorDisabledPrimary:h,textColorPrimary:b,textColorHoverPrimary:b,textColorPressedPrimary:b,textColorFocusPrimary:b,textColorDisabledPrimary:b,textColorTextPrimary:h,textColorTextHoverPrimary:p,textColorTextPressedPrimary:C,textColorTextFocusPrimary:p,textColorTextDisabledPrimary:g,textColorGhostPrimary:h,textColorGhostHoverPrimary:p,textColorGhostPressedPrimary:C,textColorGhostFocusPrimary:p,textColorGhostDisabledPrimary:h,borderPrimary:`1px solid ${h}`,borderHoverPrimary:`1px solid ${p}`,borderPressedPrimary:`1px solid ${C}`,borderFocusPrimary:`1px solid ${p}`,borderDisabledPrimary:`1px solid ${h}`,rippleColorPrimary:h,colorInfo:f,colorHoverInfo:v,colorPressedInfo:y,colorFocusInfo:v,colorDisabledInfo:f,textColorInfo:b,textColorHoverInfo:b,textColorPressedInfo:b,textColorFocusInfo:b,textColorDisabledInfo:b,textColorTextInfo:f,textColorTextHoverInfo:v,textColorTextPressedInfo:y,textColorTextFocusInfo:v,textColorTextDisabledInfo:g,textColorGhostInfo:f,textColorGhostHoverInfo:v,textColorGhostPressedInfo:y,textColorGhostFocusInfo:v,textColorGhostDisabledInfo:f,borderInfo:`1px solid ${f}`,borderHoverInfo:`1px solid ${v}`,borderPressedInfo:`1px solid ${y}`,borderFocusInfo:`1px solid ${v}`,borderDisabledInfo:`1px solid ${f}`,rippleColorInfo:f,colorSuccess:P,colorHoverSuccess:S,colorPressedSuccess:T,colorFocusSuccess:S,colorDisabledSuccess:P,textColorSuccess:b,textColorHoverSuccess:b,textColorPressedSuccess:b,textColorFocusSuccess:b,textColorDisabledSuccess:b,textColorTextSuccess:P,textColorTextHoverSuccess:S,textColorTextPressedSuccess:T,textColorTextFocusSuccess:S,textColorTextDisabledSuccess:g,textColorGhostSuccess:P,textColorGhostHoverSuccess:S,textColorGhostPressedSuccess:T,textColorGhostFocusSuccess:S,textColorGhostDisabledSuccess:P,borderSuccess:`1px solid ${P}`,borderHoverSuccess:`1px solid ${S}`,borderPressedSuccess:`1px solid ${T}`,borderFocusSuccess:`1px solid ${S}`,borderDisabledSuccess:`1px solid ${P}`,rippleColorSuccess:P,colorWarning:_,colorHoverWarning:$,colorPressedWarning:E,colorFocusWarning:$,colorDisabledWarning:_,textColorWarning:b,textColorHoverWarning:b,textColorPressedWarning:b,textColorFocusWarning:b,textColorDisabledWarning:b,textColorTextWarning:_,textColorTextHoverWarning:$,textColorTextPressedWarning:E,textColorTextFocusWarning:$,textColorTextDisabledWarning:g,textColorGhostWarning:_,textColorGhostHoverWarning:$,textColorGhostPressedWarning:E,textColorGhostFocusWarning:$,textColorGhostDisabledWarning:_,borderWarning:`1px solid ${_}`,borderHoverWarning:`1px solid ${$}`,borderPressedWarning:`1px solid ${E}`,borderFocusWarning:`1px solid ${$}`,borderDisabledWarning:`1px solid ${_}`,rippleColorWarning:_,colorError:w,colorHoverError:I,colorPressedError:H,colorFocusError:I,colorDisabledError:w,textColorError:b,textColorHoverError:b,textColorPressedError:b,textColorFocusError:b,textColorDisabledError:b,textColorTextError:w,textColorTextHoverError:I,textColorTextPressedError:H,textColorTextFocusError:I,textColorTextDisabledError:g,textColorGhostError:w,textColorGhostHoverError:I,textColorGhostPressedError:H,textColorGhostFocusError:I,textColorGhostDisabledError:w,borderError:`1px solid ${w}`,borderHoverError:`1px solid ${I}`,borderPressedError:`1px solid ${H}`,borderFocusError:`1px solid ${I}`,borderDisabledError:`1px solid ${w}`,rippleColorError:w,waveOpacity:"0.6",fontWeight:M,fontWeightStrong:F})},a={name:"Button",common:s.Z,self:i}},1301:(o,r,e)=>{e.d(r,{Z:()=>a,m:()=>i});var t=e(8373);const s={space:"6px",spaceArrow:"10px",arrowOffset:"10px",arrowOffsetVertical:"10px",arrowHeight:"6px",padding:"8px 14px"},i=o=>{const{boxShadow2:r,popoverColor:e,textColor2:t,borderRadius:i,fontSize:a,dividerColor:l}=o;return Object.assign(Object.assign({},s),{fontSize:a,borderRadius:i,color:e,dividerColor:l,textColor:t,boxShadow:r})},a={name:"Popover",common:t.Z,self:i}},6919:(o,r,e)=>{e.d(r,{Z:()=>i,m:()=>s});var t=e(8373);const s=o=>{const{infoColor:r,successColor:e,warningColor:t,errorColor:s,textColor2:i,progressRailColor:a,fontSize:l,fontWeight:n}=o;return{fontSize:l,fontSizeCircle:"28px",fontWeightCircle:n,railColor:a,railHeight:"8px",iconSizeCircle:"36px",iconSizeLine:"18px",iconColor:r,iconColorInfo:r,iconColorSuccess:e,iconColorWarning:t,iconColorError:s,textColorCircle:i,textColorLineInner:"rgb(255, 255, 255)",textColorLineOuter:i,fillColor:r,fillColorInfo:r,fillColorSuccess:e,fillColorWarning:t,fillColorError:s,lineBgProcessing:"linear-gradient(90deg, rgba(255, 255, 255, .3) 0%, rgba(255, 255, 255, .5) 100%)"}},i={name:"Progress",common:t.Z,self:s}},7918:(o,r,e)=>{e.d(r,{Z:()=>t});const t={padding:"8px 14px"}},838:(o,r,e)=>{e.d(r,{Z:()=>n});var t=e(8373),s=e(1301),i=e(7918),a=e(5103),l=e(5944);const n=(0,a.j)({name:"Tooltip",common:t.Z,peers:{Popover:s.Z},self:o=>{const{borderRadius:r,boxShadow2:e,baseColor:t}=o;return Object.assign(Object.assign({},i.Z),{borderRadius:r,boxShadow:e,color:(0,l.h$)(t,"rgba(0, 0, 0, .85)"),textColor:t})}})},7032:(o,r,e)=>{e.d(r,{Z:()=>d,m:()=>n});var t=e(5944),s=e(6403),i=e(6919),a=e(8373),l=e(5103);const n=o=>{const{iconColor:r,primaryColor:e,errorColor:s,textColor2:i,successColor:a,opacityDisabled:l,actionColor:n,borderColor:d,hoverColor:c,lineHeight:u,borderRadius:g,fontSize:x}=o;return{fontSize:x,lineHeight:u,borderRadius:g,draggerColor:n,draggerBorder:`1px dashed ${d}`,draggerBorderHover:`1px dashed ${e}`,itemColorHover:c,itemColorHoverError:(0,t.zX)(s,{alpha:.06}),itemTextColor:i,itemTextColorError:s,itemTextColorSuccess:a,itemIconColor:r,itemDisabledOpacity:l,itemBorderImageCardError:`1px solid ${s}`,itemBorderImageCard:`1px solid ${d}`}},d=(0,l.j)({name:"Upload",common:a.Z,peers:{Button:s.Z,Progress:i.Z},self:n})},4397:(o,r,e)=>{e.r(r),e.d(r,{default:()=>k});var t=e(6252),s=e(9963);const i={class:"card"},a={class:"card-body"},l=(0,t._)("h1",null,"Organisation Information",-1),n=(0,t._)("br",null,null,-1),d=["href"],c=(0,t._)("hr",null,null,-1),u={class:"row"},g=(0,t._)("div",{class:"col-md-4"},[(0,t._)("strong",null,"Please Note"),(0,t._)("p",{class:"text-instructions"}," Please only use generic information for both the website and email. Do not use any personal details - you can create contacts in the section below. ")],-1),x={class:"col-md-3"},p=["src"],C=(0,t._)("br",null,null,-1),m={class:"col-md-5"},h={class:"form-group"},b={for:"id_organisation_name"},f=(0,t._)("br",null,null,-1),v={class:"form-group"},y={for:"id_organisation_website"},P=(0,t._)("br",null,null,-1),S={class:"form-group"},T={for:"id_organisation_email"},_=(0,t._)("br",null,null,-1),$={key:0},E={key:1,class:"row submit-row"},w={class:"col-md-12"};var I=e(9729),H=e(4344),M=e(989),W=e(5705),D=e(760),O=e(7939),F=e(3058),G=e(106);const R={name:"OrganisationInformation",setup:()=>({v$:(0,W.ZP)()}),components:{NButton:I.ZP,NUpload:H.Z,ValidationRendering:O.Z},props:{organisationResults:{type:Array,default:()=>[]}},mixins:[F.Z,G.Z],computed:{...(0,M.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl",userLevel:"getUserLevel"})},data(){return{organisationNameModel:this.organisationResults[0].fields.organisation_name,organisationEmailModel:this.organisationResults[0].fields.organisation_email,organisationWebsiteModel:this.organisationResults[0].fields.organisation_website,profilePicture:""}},validations:{organisationNameModel:{required:D.C1,maxLength:(0,D.BS)(255)},organisationWebsiteModel:{required:D.C1,url:D.HQ},organisationEmailModel:{required:D.C1,email:D.Do}},methods:{showErrorToast(){this.$store.dispatch("newToast",{header:"Error uploading profile picture",message:"Sorry, we had an issue uploading the profile image.",extra_classes:"bg-danger",delay:0})},setProfilePicture(){let o=this.organisationResults[0].fields.organisation_profile_picture;this.profilePicture=null!=o&&""!==o?`${this.rootUrl}private/${o}`:`${this.staticUrl}/NearBeach/images/placeholder/product_tour.svg`},updateOrganisation(){if(this.v$.$touch(),this.v$.$invalid)return void this.showValidationErrorModal();const o=new FormData;o.set("organisation_name",this.organisationNameModel),o.set("organisation_email",this.organisationEmailModel),o.set("organisation_website",this.organisationWebsiteModel),this.$store.dispatch("newToast",{header:"Updating Organisation",message:"Please wait whilst we update organisation",extra_classes:"bg-warning",delay:0,unique_type:"save"}),this.axios.post(`${this.rootUrl}organisation_information/${this.organisationResults[0].pk}/save/`,o).then((()=>{this.$store.dispatch("newToast",{header:"Organisation Updated",message:"The Organisation has updated",extra_classes:"bg-success",unique_type:"save"})})).catch((o=>{this.$store.dispatch("newToast",{header:"Failed to Update Organisation",message:`Sorry. We have encounted an error. Error -> ${o}`,extra_classes:"bg-danger",delay:0,unique_type:"save"})}))},updateProfilePicture(){this.$store.dispatch("newToast",{header:"Profile Picture updated",message:"Good news - profile picture updated",extra_classes:"bg-success",unique_type:"update_profile",delay:0}),this.axios.post(`${this.rootUrl}organisation_information/${this.organisationResults[0].pk}/get_profile_picture/`).then((o=>{this.profilePicture=o.data,this.$store.dispatch("newToast",{header:"Profile Picture updated",message:"Good news - profile picture updated",extra_classes:"bg-success",unique_type:"update_profile"})})).catch((o=>{this.profilePicture=`${this.staticUrl}/NearBeach/images/placeholder/product_tour.svg`,this.$store.dispatch("newToast",{header:"Error uploading profile picture",message:`Sorry, we had an issue uploading the profile image. Error -> ${o}`,extra_classes:"bg-danger",delay:0})}))}},mounted(){this.setProfilePicture()}},k=(0,e(3744).Z)(R,[["render",function(o,r,e,I,H,M){const W=(0,t.up)("n-button"),D=(0,t.up)("n-upload"),O=(0,t.up)("validation-rendering");return(0,t.wg)(),(0,t.iD)("div",i,[(0,t._)("div",a,[(0,t.kq)(" TITLE "),l,n,(0,t._)("a",{href:`${o.rootUrl}search/organisation/`},"Back to organisation search",8,d),c,(0,t.kq)(" FIELDS SECTION "),(0,t._)("div",u,[g,(0,t._)("div",x,[(0,t._)("img",{src:H.profilePicture,alt:"Profile Picture",class:"organisation-profile-image"},null,8,p),C,(0,t.kq)('<button class="btn btn-primary">Update Profile...</button>'),o.userLevel>1?((0,t.wg)(),(0,t.j4)(D,{key:0,action:`${o.rootUrl}organisation_information/${e.organisationResults[0].pk}/update_profile/`,headers:{"X-CSRFTOKEN":o.getToken("csrftoken")},data:{},onFinish:M.updateProfilePicture,onError:M.showErrorToast},{default:(0,t.w5)((()=>[(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Update Profile Picture")])),_:1})])),_:1},8,["action","headers","onFinish","onError"])):(0,t.kq)("v-if",!0)]),(0,t._)("div",m,[(0,t.kq)(" ORGANISATION NAME "),(0,t._)("div",h,[(0,t._)("label",b,[(0,t.Uk)(" Organisation Name "),(0,t.Wm)(O,{"error-list":I.v$.organisationNameModel.$errors},null,8,["error-list"])]),(0,t.wy)((0,t._)("input",{id:"id_organisation_name","onUpdate:modelValue":r[0]||(r[0]=o=>H.organisationNameModel=o),type:"text",class:"form-control"},null,512),[[s.vModelText,H.organisationNameModel]])]),f,(0,t.kq)(" ORGANISATION WEBSITE "),(0,t._)("div",v,[(0,t._)("label",y,[(0,t.Uk)(" Organisation Website "),(0,t.Wm)(O,{"error-list":I.v$.organisationWebsiteModel.$errors},null,8,["error-list"])]),(0,t.wy)((0,t._)("input",{id:"id_organisation_website","onUpdate:modelValue":r[1]||(r[1]=o=>H.organisationWebsiteModel=o),type:"text",class:"form-control"},null,512),[[s.vModelText,H.organisationWebsiteModel]])]),P,(0,t.kq)(" ORGANISATION EMAIL "),(0,t._)("div",S,[(0,t._)("label",T,[(0,t.Uk)(" Organisation Email "),(0,t.Wm)(O,{"error-list":I.v$.organisationWebsiteModel.$errors},null,8,["error-list"])]),(0,t.wy)((0,t._)("input",{id:"id_organisation_email","onUpdate:modelValue":r[2]||(r[2]=o=>H.organisationEmailModel=o),type:"text",class:"form-control"},null,512),[[s.vModelText,H.organisationEmailModel]])])])]),_,(0,t.kq)(" NEED TO APPLY PERMISSIONS "),(0,t.kq)(" Submit Button "),o.userLevel>1?((0,t.wg)(),(0,t.iD)("hr",$)):(0,t.kq)("v-if",!0),o.userLevel>1?((0,t.wg)(),(0,t.iD)("div",E,[(0,t._)("div",w,[(0,t._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:r[3]||(r[3]=(...o)=>M.updateOrganisation&&M.updateOrganisation(...o))},"Update Organisation")])])):(0,t.kq)("v-if",!0)])])}]])},7939:(o,r,e)=>{e.d(r,{Z:()=>a});var t=e(6252),s=e(3577);const i={name:"ValidationRendering",props:{errorList:{type:Array,default:()=>[]}}},a=(0,e(3744).Z)(i,[["render",function(o,r,e,i,a,l){return(0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.errorList,(o=>((0,t.wg)(),(0,t.iD)("span",{class:"error",key:o.$uid},(0,s.toDisplayString)(o.$message),1)))),128)}]])},3058:(o,r,e)=>{e.d(r,{Z:()=>s});var t=e(3138);const s={methods:{showErrorModal(o,r,e){const s=document.getElementById("loadingModal");if(null===s)return;new t.u_(s).hide();const i=document.getElementById("errorModalContent");if(void 0===i)return;if(i.innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new ${r}-${e}<hr>${o}`,null===document.getElementById("errorModal"))return;const a=new t.u_(a);a.show()},showValidationErrorModal(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new t.u_(document.getElementById("errorModal")).show()}}}},106:(o,r,e)=>{e.d(r,{Z:()=>t});const t={methods:{getToken(o){const r=new RegExp(`${o}=([^;]+)`).exec(document.cookie);return null!==r?encodeURIComponent(r[1]):null}}}}}]);