{"version":3,"file":"lib_jupyterlab_index_js.557f9fa02fe96a2b9270.js","mappings":"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","sources":["webpack://@datalayer/jupyter-iam/./style/base.css","webpack://@datalayer/jupyter-iam/./style/index.css","webpack://@datalayer/jupyter-iam/./lib/IAM.js","webpack://@datalayer/jupyter-iam/./lib/auth/AuthStorage.js","webpack://@datalayer/jupyter-iam/./lib/components/About.js","webpack://@datalayer/jupyter-iam/./lib/components/IdentityProviders.js","webpack://@datalayer/jupyter-iam/./lib/components/content/JupyterLabIdentity.js","webpack://@datalayer/jupyter-iam/./lib/jupyterlab/handler.js","webpack://@datalayer/jupyter-iam/./lib/jupyterlab/index.js","webpack://@datalayer/jupyter-iam/./lib/jupyterlab/widget.js","webpack://@datalayer/jupyter-iam/./lib/model/User.js","webpack://@datalayer/jupyter-iam/./lib/state/index.js","webpack://@datalayer/jupyter-iam/./style/index.css?bd75"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/@jupyterlab/builder/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/@jupyterlab/builder/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"body {\\n  overflow-y: visible;\\n}\\n\\n.dla-Container {\\n  overflow-y: auto !important;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./style/base.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,mBAAmB;AACrB;;AAEA;EACE,2BAA2B;AAC7B\",\"sourcesContent\":[\"body {\\n  overflow-y: visible;\\n}\\n\\n.dla-Container {\\n  overflow-y: auto !important;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/@jupyterlab/builder/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/@jupyterlab/builder/node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_AT_RULE_IMPORT_0___ from \"-!../../../../node_modules/@jupyterlab/builder/node_modules/css-loader/dist/cjs.js!./base.css\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useState, useEffect } from 'react';\nimport { ThemeProvider, BaseStyles, Box } from '@primer/react';\nimport { UnderlineNav } from '@primer/react/drafts';\nimport { PassportControlIcon } from '@datalayer/icons-react';\nimport About from './components/About';\nimport IdentityProviders from './components/IdentityProviders';\nimport { requestAPI } from './jupyterlab/handler';\nimport { useStore } from './state';\nconst IAM = (props) => {\n    const { adapter } = props;\n    const { getIntTab, setTab } = useStore();\n    const [version, setVersion] = useState('');\n    useEffect(() => {\n        requestAPI('config')\n            .then(data => {\n            setVersion(data.version);\n        })\n            .catch(reason => {\n            console.error(`Error while accessing the jupyter server jupyter_iam extension.\\n${reason}`);\n        });\n    });\n    return (_jsx(_Fragment, { children: _jsx(ThemeProvider, { children: _jsx(BaseStyles, { children: _jsxs(Box, { children: [_jsx(Box, { children: _jsxs(UnderlineNav, { \"aria-label\": \"iam\", children: [_jsx(UnderlineNav.Item, { \"aria-label\": \"iam-home\", \"aria-current\": getIntTab() === 0 ? \"page\" : undefined, onSelect: e => { e.preventDefault(); setTab(0.0); }, children: \"Providers\" }), _jsx(UnderlineNav.Item, { \"aria-label\": \"iam-about\", \"aria-current\": getIntTab() === 1 ? \"page\" : undefined, icon: () => _jsx(PassportControlIcon, { colored: true }), onSelect: e => { e.preventDefault(); setTab(1.0); }, children: \"About\" })] }) }), _jsxs(Box, { m: 3, children: [getIntTab() === 0 && adapter && _jsx(IdentityProviders, { adapter: adapter }), getIntTab() === 1 && _jsx(About, { version: version })] })] }) }) }) }));\n};\nexport default IAM;\n","import jwt_decode from 'jwt-decode';\nimport { ANONYMOUS_USER, ANONYMOUS_TOKEN } from './../model';\nconst AUTH_USER_KEY = 'DATALAYER_RUN_AUTH_USER';\nconst AUTH_TOKEN_KEY = 'DATALAYER_RUN_AUTH_TOKEN';\n/**\n * Set the user in the local storage.\n */\nexport const storeUser = (user) => {\n    if (user) {\n        const u = {\n            handle: user.handle,\n            firstName: user.firstName,\n            lastName: user.lastName,\n            email: user.email,\n            displayName: user.displayName,\n            joinDate: user.joinDate\n        };\n        window.localStorage.setItem(AUTH_USER_KEY, JSON.stringify(u));\n    }\n    else {\n        window.localStorage.removeItem(AUTH_USER_KEY);\n    }\n};\n/**\n * Return the user from the local storage.\n */\nexport const getStoredUser = () => {\n    const user = window.localStorage.getItem(AUTH_USER_KEY);\n    if (user) {\n        try {\n            const u = JSON.parse(user);\n            u.joinDate = new Date(u.joinDate);\n            return u;\n        }\n        catch (e) {\n            return ANONYMOUS_USER;\n        }\n    }\n    return ANONYMOUS_USER;\n};\n/**\n * Set the auth token in the local storage.\n */\nexport const storeToken = (token) => {\n    if (token) {\n        localStorage.setItem(AUTH_TOKEN_KEY, token);\n        if (token !== ANONYMOUS_TOKEN) {\n            try {\n                jwt_decode(token);\n                //        const decoded = jwt_decode<string>(token);\n                //        console.log('----', decoded);\n            }\n            catch (error) {\n                console.error(error);\n            }\n        }\n    }\n    else {\n        window.localStorage.removeItem(AUTH_TOKEN_KEY);\n    }\n};\n/**\n * Return the auth token from the local storage.\n */\nexport const getStoredToken = () => {\n    const token = window.localStorage.getItem(AUTH_TOKEN_KEY);\n    if (token) {\n        return token;\n    }\n    return ANONYMOUS_TOKEN;\n};\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useState } from 'react';\nimport { Pagehead, Label, Text, Link, Box } from '@primer/react';\nimport { PassportControlIcon } from '@datalayer/icons-react';\nimport { ECharlesIcon } from '@datalayer/icons-react/eggs';\nconst About = (props) => {\n    const { version } = props;\n    const [egg, setEgg] = useState(false);\n    return (_jsxs(_Fragment, { children: [_jsx(Pagehead, { as: \"h2\", children: _jsxs(Box, { display: \"flex\", children: [_jsx(Box, { mr: 1, children: _jsx(PassportControlIcon, { size: 32 }) }), _jsxs(Box, { children: [\"Jupyter IAM\", _jsx(Label, { sx: { marginLeft: 1 }, children: version })] })] }) }), _jsx(Box, { children: _jsx(Text, { children: \"Identity and Access Management for Jupyter.\" }) }), _jsx(Box, { mt: 3, children: !egg ? (_jsx(\"img\", { src: \"https://assets.datalayer.tech/releases/datalayer-0.3.0-black-snake_1024.png\", onClick: e => setEgg(true), style: { width: '100%' } })) : (_jsx(ECharlesIcon, { size: 300, onClick: e => setEgg(false) })) }), _jsx(Box, { children: _jsx(Link, { href: \"https://datalayer.tech/docs/releases/0.3.0-black-snake\", target: \"_blank\", children: _jsx(Text, { as: \"h4\", children: \"Datalayer 0.3.0 Black Snake Release\" }) }) }), _jsx(Box, { children: _jsx(Link, { href: \"https://github.com/datalayer/jupyter-iam\", target: \"_blank\", children: _jsx(Text, { as: \"h4\", children: \"Source code\" }) }) })] }));\n};\nexport default About;\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useState } from 'react';\nimport { Box, NavList } from '@primer/react';\nimport JupyterLabIdentity from './content/JupyterLabIdentity';\nconst IdentityProviders = (props) => {\n    const { adapter } = props;\n    const [nav, setNav] = useState(1);\n    return (_jsx(_Fragment, { children: _jsxs(Box, { sx: { display: 'flex' }, children: [_jsx(Box, { children: _jsx(NavList, { sx: {\n                            '> *': {\n                                paddingTop: '0px'\n                            }\n                        }, children: _jsx(NavList.Item, { \"aria-current\": nav === 1 ? 'page' : undefined, onClick: e => setNav(1), children: \"JupyterLab\" }) }) }), _jsx(Box, { ml: 3, sx: { width: '100%' }, children: (nav === 1) && _jsx(JupyterLabIdentity, { adapter: adapter }) })] }) }));\n};\nexport default IdentityProviders;\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useState, useEffect } from 'react';\nimport { Box, Text, Avatar, AvatarPair, Token } from '@primer/react';\nimport { AlienIcon } from '@datalayer/icons-react';\nconst DEFAULT_AVATAR_URL = 'https://avatars.githubusercontent.com/u/70511875?s=200&v=4';\nconst COLORS = {\n    \"--jp-collaborator-color1\": \"#ffad8e\",\n    \"--jp-collaborator-color2\": \"#dac83d\",\n    \"--jp-collaborator-color3\": \"#72dd76\",\n    \"--jp-collaborator-color4\": \"#00e4d0\",\n    \"--jp-collaborator-color5\": \"#45d4ff\",\n    \"--jp-collaborator-color6\": \"#e2b1ff\",\n    \"--jp-collaborator-color7\": \"#ff9de6\",\n};\nconst toColor = (identity) => {\n    const cssVariableName = identity.color;\n    return COLORS[cssVariableName.replaceAll('var(', '').replaceAll(')', '')];\n};\nconst IdentityView = (props) => {\n    const { identity } = props;\n    const color = toColor(identity);\n    return (identity && (_jsxs(_Fragment, { children: [_jsx(Box, { mb: 3, children: _jsx(Text, { as: \"h3\", sx: { marginTop: 0 }, children: \"Identity\" }) }), _jsxs(Box, { sx: { display: 'flex' }, children: [_jsx(Box, { children: _jsx(AvatarPair, { sx: { width: 100 }, children: _jsx(Avatar, { square: true, src: identity.avatar_url ?? DEFAULT_AVATAR_URL, sx: { width: 100, height: 100 } }) }) }), _jsx(Box, { ml: 3, children: _jsxs(Box, { sx: { display: 'grid', gridTemplateColumns: '1fr 2fr', rowGap: 3, columnGap: 3, maxWidth: 500 }, children: [_jsx(Box, { sx: { p: 1 }, children: _jsx(Text, { sx: { fontWeight: 'bold' }, children: \"Name\" }) }), _jsx(Box, { sx: { p: 1 }, children: _jsx(Text, { children: identity.name }) }), _jsx(Box, { sx: { p: 1 }, children: _jsx(Text, { sx: { fontWeight: 'bold' }, children: \"Initials\" }) }), _jsx(Box, { sx: { p: 1 }, children: _jsx(Text, { children: identity.initials }) }), _jsx(Box, { sx: { p: 1 }, children: _jsx(Text, { sx: { fontWeight: 'bold' }, children: \"Username\" }) }), _jsx(Box, { sx: { p: 1 }, children: _jsx(Text, { children: identity.username }) })] }) })] }), _jsx(Box, { mt: 3, children: _jsx(Token, { text: identity.display_name, color: color, size: 'large', leadingVisual: AlienIcon, sx: { backgroundColor: color } }) })] })));\n};\nconst PermissionsView = (props) => {\n    const { permissions } = props;\n    return (permissions && (_jsx(_Fragment, { children: _jsx(Box, { mt: 3, children: _jsx(Text, { as: \"h3\", children: \"Permissions\" }) }) })));\n};\nconst JupyterLabIdentity = (props) => {\n    const { adapter } = props;\n    const [user, setUser] = useState();\n    useEffect(() => {\n        if (adapter) {\n            const user = adapter.jupyterLab.serviceManager.user;\n            setUser(user);\n        }\n    });\n    return (_jsx(_Fragment, { children: user &&\n            _jsxs(_Fragment, { children: [_jsx(IdentityView, { identity: user.identity }), _jsx(PermissionsView, { permissions: user.permissions })] }) }));\n};\nexport default JupyterLabIdentity;\n","import { URLExt } from '@jupyterlab/coreutils';\nimport { ServerConnection } from '@jupyterlab/services';\n/**\n * Call the API extension\n *\n * @param endPoint API REST end point for the extension\n * @param init Initial values for the request\n * @returns The response body interpreted as JSON\n */\nexport async function requestAPI(endPoint = '', init = {}) {\n    // Make request to Jupyter API\n    const settings = ServerConnection.makeSettings();\n    const requestUrl = URLExt.join(settings.baseUrl, 'jupyter_iam', // API Namespace\n    endPoint);\n    let response;\n    try {\n        response = await ServerConnection.makeRequest(requestUrl, init, settings);\n    }\n    catch (error) {\n        throw new ServerConnection.NetworkError(error);\n    }\n    let data = await response.text();\n    if (data.length > 0) {\n        try {\n            data = JSON.parse(data);\n        }\n        catch (error) {\n            console.log('Not a JSON response body.', response);\n        }\n    }\n    if (!response.ok) {\n        throw new ServerConnection.ResponseError(response, data.message || data);\n    }\n    return data;\n}\n","import { Token } from '@lumino/coreutils';\nimport { ILayoutRestorer } from '@jupyterlab/application';\nimport { ISettingRegistry } from '@jupyterlab/settingregistry';\nimport { MainAreaWidget, ICommandPalette, WidgetTracker } from '@jupyterlab/apputils';\nimport { ILauncher } from '@jupyterlab/launcher';\nimport icon from '@datalayer/icons-react/data2/PassportControlIconJupyterLab';\nimport { requestAPI } from './handler';\nimport { JupyterIAMWidget } from './widget';\nimport { useStore } from '../state';\nimport '../../style/index.css';\nconst JUPYTER_IAM_PLUGIN_ID = '@datalayer/jupyter-iam:plugin';\nexport const IJupyterIAM = new Token(JUPYTER_IAM_PLUGIN_ID);\n/**\n * The command IDs used by the plugin.\n */\nvar CommandIDs;\n(function (CommandIDs) {\n    CommandIDs.create = 'create-jupyter-iam-widget';\n})(CommandIDs || (CommandIDs = {}));\n/**\n * Initialization data for the @datalayer/jupyter-iam extension.\n */\nconst iamPlugin = {\n    id: JUPYTER_IAM_PLUGIN_ID,\n    autoStart: true,\n    requires: [ICommandPalette],\n    optional: [ISettingRegistry, ILauncher, ILayoutRestorer],\n    provides: IJupyterIAM,\n    activate: (app, palette, settingRegistry, launcher, restorer) => {\n        const { commands } = app;\n        const command = CommandIDs.create;\n        const tracker = new WidgetTracker({\n            namespace: 'jupyter-iam',\n        });\n        if (restorer) {\n            void restorer.restore(tracker, {\n                command,\n                name: () => 'jupyter-iam',\n            });\n        }\n        const jupyterIAM = {\n            useStore: useStore,\n        };\n        commands.addCommand(command, {\n            caption: 'Show Jupyter IAM',\n            label: 'Jupyter IAM',\n            icon,\n            execute: () => {\n                const content = new JupyterIAMWidget(app);\n                const widget = new MainAreaWidget({ content });\n                widget.title.label = 'Jupyter IAM';\n                widget.title.icon = icon;\n                app.shell.add(widget, 'main');\n                tracker.add(widget);\n            }\n        });\n        const category = 'Datalayer';\n        palette.addItem({ command, category });\n        const settingsUpdated = (settings) => {\n            const showInLauncher = settings.get('showInLauncher').composite;\n            if (launcher && showInLauncher) {\n                launcher.add({\n                    command,\n                    category,\n                    rank: 4.1,\n                });\n            }\n        };\n        if (settingRegistry) {\n            settingRegistry\n                .load(iamPlugin.id)\n                .then(settings => {\n                console.log('@datalayer/jupyter-iam settings loaded:', settings.composite);\n                settingsUpdated(settings);\n                settings.changed.connect(settingsUpdated);\n            })\n                .catch(reason => {\n                console.error('Failed to load settings for @datalayer/jupyter-iam.', reason);\n            });\n        }\n        requestAPI('config')\n            .then(data => {\n            console.log(data);\n        })\n            .catch(reason => {\n            console.error(`Error while accessing the jupyter server jupyter_iam extension.\\n${reason}`);\n        });\n        console.log('JupyterLab plugin @datalayer/jupyter-iam:plugin is activated.');\n        return jupyterIAM;\n    }\n};\nexport default iamPlugin;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { ReactWidget } from '@jupyterlab/apputils';\nimport { JupyterLabAppAdapter } from '@datalayer/jupyter-react';\nimport IAM from '../IAM';\nexport class JupyterIAMWidget extends ReactWidget {\n    _app;\n    constructor(app) {\n        super();\n        this._app = app;\n        this.addClass('dla-Container');\n    }\n    render() {\n        return _jsx(IAM, { adapter: JupyterLabAppAdapter.create(this._app) });\n    }\n}\n","export const ANONYMOUS_USER = undefined;\nexport const ANONYMOUS_TOKEN = undefined;\n","import { create } from 'zustand';\nimport { ANONYMOUS_USER, ANONYMOUS_TOKEN } from './../model';\nimport { storeUser, storeToken } from './../auth';\nexport const useStore = create((set, get) => ({\n    tab: 0.0,\n    getIntTab: () => Math.floor(get().tab),\n    setTab: (tab) => set((state) => ({ tab })),\n    user: ANONYMOUS_USER,\n    token: ANONYMOUS_TOKEN,\n    setAuth: (user, token) => {\n        storeUser(user);\n        storeToken(token);\n        set(state => ({ user }));\n        set(state => ({ token }));\n    },\n}));\nexport default useStore;\n","\n      import API from \"!../../../../node_modules/@jupyterlab/builder/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/@jupyterlab/builder/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/@jupyterlab/builder/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/@jupyterlab/builder/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/@jupyterlab/builder/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/@jupyterlab/builder/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/@jupyterlab/builder/node_modules/css-loader/dist/cjs.js!./index.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/@jupyterlab/builder/node_modules/css-loader/dist/cjs.js!./index.css\";\n       export default content && content.locals ? content.locals : undefined;\n"],"names":[],"sourceRoot":""}