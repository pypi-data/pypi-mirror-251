"use strict";(self.webpackChunk_datalayer_jupyter_iam=self.webpackChunk_datalayer_jupyter_iam||[]).push([[6269],{68337:(e,t,n)=>{n.d(t,{D:()=>s,f:()=>i});var o=n(47963);const s=new o.Token("@jupyterlab/codeeditor:IEditorServices","A service for the text editor provider\n  for the application. Use this to create new text editors and host them in your\n  UI elements."),i=new o.Token("@jupyterlab/codeeditor:IPositionModel","A service to handle an code editor cursor position.")},87104:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(92279);const s="jp-mod-has-primary-selection",i="jp-mod-in-leading-whitespace",r="jp-mod-dropTarget",l=/^\s+$/;class a extends o.$L{constructor(e){super();const{factory:t,model:n,editorOptions:o}=e;(this.editor=t({host:this.node,model:n,...o})).model.selections.changed.connect(this._onSelectionsChanged,this)}get model(){return this.editor.model}dispose(){this.isDisposed||(this.editor.dispose(),super.dispose())}handleEvent(e){switch(e.type){case"lm-dragenter":this._evtDragEnter(e);break;case"lm-dragleave":this._evtDragLeave(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e)}}onActivateRequest(e){this.editor.focus()}onAfterAttach(e){super.onAfterAttach(e);const t=this.node;t.addEventListener("lm-dragenter",this),t.addEventListener("lm-dragleave",this),t.addEventListener("lm-dragover",this),t.addEventListener("lm-drop",this)}onBeforeDetach(e){const t=this.node;t.removeEventListener("lm-dragenter",this),t.removeEventListener("lm-dragleave",this),t.removeEventListener("lm-dragover",this),t.removeEventListener("lm-drop",this)}_onSelectionsChanged(){const{start:e,end:t}=this.editor.getSelection();e.column!==t.column||e.line!==t.line?(this.addClass(s),this.removeClass(i)):(this.removeClass(s),this.editor.getLine(t.line).slice(0,t.column).match(l)?this.addClass(i):this.removeClass(i))}_evtDragEnter(e){!0!==this.editor.getOption("readOnly")&&void 0!==c.findTextData(e.mimeData)&&(e.preventDefault(),e.stopPropagation(),this.addClass("jp-mod-dropTarget"))}_evtDragLeave(e){this.removeClass(r),!0!==this.editor.getOption("readOnly")&&void 0!==c.findTextData(e.mimeData)&&(e.preventDefault(),e.stopPropagation())}_evtDragOver(e){this.removeClass(r),!0!==this.editor.getOption("readOnly")&&void 0!==c.findTextData(e.mimeData)&&(e.preventDefault(),e.stopPropagation(),e.dropAction="copy",this.addClass(r))}_evtDrop(e){if(!0===this.editor.getOption("readOnly"))return;const t=c.findTextData(e.mimeData);if(void 0===t)return;const n={top:e.y,bottom:e.y,left:e.x,right:e.x,x:e.x,y:e.y,width:0,height:0},o=this.editor.getPositionForCoordinate(n);if(null===o)return;if(this.removeClass(r),e.preventDefault(),e.stopPropagation(),"none"===e.proposedAction)return void(e.dropAction="none");const s=this.editor.getOffsetAt(o);this.model.sharedModel.updateSource(s,s,t)}}var c;!function(e){e.findTextData=function(e){const t=e.types().find((e=>0===e.indexOf("text")));if(void 0!==t)return e.getData(t)}}(c||(c={}))},58280:(e,t,n)=>{n.d(t,{I:()=>o,p:()=>i});var o,s=n(47963);!function(e){e[e.Invoked=1]="Invoked",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=3]="TriggerForIncompleteCompletions"}(o||(o={}));const i=new s.Token("@jupyterlab/completer:ICompletionProviderManager","A service for the completion providers management.")},35105:(e,t,n)=>{n.r(t),n.d(t,{default:()=>le});var o=n(44041),s=n(27990),i=n(2245),r=n(99190),l=n(22290),a=n(71204),c=n(35884),d=n(68337),h=n(58280),u=n(11097),p=n(71514),m=n(48425),g=n(81631),C=n(18168),_=n(21822),f=n(47963),v=n(92279),y=n(15487),x=n(66173),b=n(61266),w=n(42147),k=n(39735),S=n(52332);const D="jp-dragImage",E="jp-dragImage-singlePrompt",I="jp-dragImage-content",j="jp-dragImage-prompt",M="jp-dragImage-multipleBack";var P;!function(e){e.findCell=function(e,t,n){let o=-1;for(;e&&e.parentElement;){if(n(e)){let n=-1;for(const s of t)if(s.node===e){o=++n;break}break}e=e.parentElement}return o},e.detectTargetArea=function(e,t){var n,o;let s;return s=e?(null===(n=e.editorWidget)||void 0===n?void 0:n.node.contains(t))?"input":(null===(o=e.promptNode)||void 0===o?void 0:o.contains(t))?"prompt":"cell":"unknown",s},e.shouldStartDrag=function(e,t,n,o){const s=Math.abs(n-e),i=Math.abs(o-t);return s>=5||i>=5},e.createCellDragImage=function(e,t){const n=t.length;let o;if("code"===e.model.type){const t=e.model.executionCount;o=" ",t&&(o=t.toString())}else o="";const s=e.model.sharedModel.getSource().split("\n")[0].slice(0,26);return n>1?""!==o?S.Iw.realize(S.h.div(S.h.div({className:D},S.h.span({className:j},"["+o+"]:"),S.h.span({className:I},s)),S.h.div({className:M},""))):S.Iw.realize(S.h.div(S.h.div({className:D},S.h.span({className:j}),S.h.span({className:I},s)),S.h.div({className:M},""))):""!==o?S.Iw.realize(S.h.div(S.h.div({className:`${D} ${E}`},S.h.span({className:j},"["+o+"]:"),S.h.span({className:I},s)))):S.Iw.realize(S.h.div(S.h.div({className:`${D} ${E}`},S.h.span({className:j}),S.h.span({className:I},s))))}}(P||(P={}));var T,A=n(81508),F=n(39151),L=n(98209);class O{constructor(e){this._cursor=0,this._hasSession=!1,this._history=[],this._placeholder="",this._setByHistory=!1,this._isDisposed=!1,this._editor=null,this._filtered=[];const{sessionContext:t}=e;t&&(this.sessionContext=t,this._handleKernel(),this.sessionContext.kernelChanged.connect(this._handleKernel,this))}get editor(){return this._editor}set editor(e){if(this._editor===e)return;const t=this._editor;t&&(t.edgeRequested.disconnect(this.onEdgeRequest,this),t.model.sharedModel.changed.disconnect(this.onTextChange,this)),this._editor=e,e&&(e.edgeRequested.connect(this.onEdgeRequest,this),e.model.sharedModel.changed.connect(this.onTextChange,this))}get placeholder(){return this._placeholder}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed=!0,this._history.length=0,L.Signal.clearData(this)}back(e){this._hasSession||(this._hasSession=!0,this._placeholder=e,this.setFilter(e),this._cursor=this._filtered.length-1),--this._cursor,this._cursor=Math.max(0,this._cursor);const t=this._filtered[this._cursor];return Promise.resolve(t)}forward(e){this._hasSession||(this._hasSession=!0,this._placeholder=e,this.setFilter(e),this._cursor=this._filtered.length),++this._cursor,this._cursor=Math.min(this._filtered.length-1,this._cursor);const t=this._filtered[this._cursor];return Promise.resolve(t)}push(e){e&&e!==this._history[this._history.length-1]&&this._history.push(e),this.reset()}reset(){this._cursor=this._history.length,this._hasSession=!1,this._placeholder=""}onHistory(e){this._history.length=0;let t="",n="";if("ok"===e.content.status)for(let o=0;o<e.content.history.length;o++)n=e.content.history[o][2],n!==t&&this._history.push(t=n);this._cursor=this._history.length}onTextChange(){this._setByHistory?this._setByHistory=!1:this.reset()}onEdgeRequest(e,t){const n=e.model.sharedModel,o=n.getSource();"top"===t||"topLine"===t?this.back(o).then((t=>{if(this.isDisposed||!t)return;if(n.getSource()===t)return;this._setByHistory=!0,n.setSource(t);let o=0;o=t.indexOf("\n"),o<0&&(o=t.length),e.setCursorPosition({line:0,column:o})})):this.forward(o).then((t=>{if(this.isDisposed)return;const o=t||this.placeholder;if(n.getSource()===o)return;this._setByHistory=!0,n.setSource(o);const s=e.getPositionAt(o.length);s&&e.setCursorPosition(s)}))}async _handleKernel(){var e,t;const n=null===(t=null===(e=this.sessionContext)||void 0===e?void 0:e.session)||void 0===t?void 0:t.kernel;if(n)return n.requestHistory(T.initialRequest).then((e=>{this.onHistory(e)}));this._history.length=0}setFilter(e=""){this._filtered.length=0;let t="",n="";for(let o=0;o<this._history.length;o++)n=this._history[o],n!==t&&e===n.slice(0,e.length)&&this._filtered.push(t=n);this._filtered.push(e)}}!function(e){e.initialRequest={output:!1,raw:!0,hist_access_type:"tail",n:500}}(T||(T={}));const B="jp-Console-cell",K="jp-CodeConsole-promptCell";class q extends v.$L{constructor(e){var t,n;super(),this.editorConfig=q.defaultEditorConfig,this._banner=null,this._executed=new L.Signal(this),this._mimetype="text/x-ipython",this._msgIds=new Map,this._msgIdCells=new Map,this._promptCellCreated=new L.Signal(this),this._dragData=null,this._drag=null,this._focusedCell=null,this._translator=null!==(t=e.translator)&&void 0!==t?t:C.Sr,this.addClass("jp-CodeConsole"),this.node.dataset.jpKernelUser="true",this.node.dataset.jpCodeRunner="true",this.node.tabIndex=-1;const o=this.layout=new v.LN;this._cells=new A.a,this._content=new v.s_,this._input=new v.s_,this.contentFactory=e.contentFactory,this.modelFactory=null!==(n=e.modelFactory)&&void 0!==n?n:q.defaultModelFactory,this.rendermime=e.rendermime,this.sessionContext=e.sessionContext,this._mimeTypeService=e.mimeTypeService,this._content.addClass("jp-CodeConsole-content"),this._input.addClass("jp-CodeConsole-input"),o.addWidget(this._content),o.addWidget(this._input),this._history=new O({sessionContext:this.sessionContext}),this._onKernelChanged(),this.sessionContext.kernelChanged.connect(this._onKernelChanged,this),this.sessionContext.statusChanged.connect(this._onKernelStatusChanged,this)}get executed(){return this._executed}get promptCellCreated(){return this._promptCellCreated}get cells(){return this._cells}get promptCell(){return this._input.layout.widgets[0]||null}addCell(e,t){e.addClass(B),this._content.addWidget(e),this._cells.push(e),t&&(this._msgIds.set(t,e),this._msgIdCells.set(e,t)),e.disposed.connect(this._onCellDisposed,this),this.update()}addBanner(){if(this._banner){const e=this._banner;this._cells.push(this._banner),e.disposed.connect(this._onCellDisposed,this)}const e=this.modelFactory.createRawCell({sharedModel:(0,b.e4)({cell_type:"raw",source:"..."})}),t=(this._banner=new w.VB({model:e,contentFactory:this.contentFactory,placeholder:!1,editorConfig:{autoClosingBrackets:!1,codeFolding:!1,highlightActiveLine:!1,highlightTrailingWhitespace:!1,highlightWhitespace:!1,indentUnit:"4",lineNumbers:!1,lineWrap:!0,matchBrackets:!1,readOnly:!0,rulers:[],scrollPastEnd:!1,smartIndent:!1,tabSize:4,theme:"jupyter"}})).initializeState();t.addClass("jp-CodeConsole-banner"),t.readOnly=!0,this._content.addWidget(t)}clear(){const e=this._cells;for(;e.length>0;)e.get(0).dispose()}createCodeCell(){const e=this.contentFactory,t=this._createCodeCellOptions(),n=e.createCodeCell(t);return n.readOnly=!0,n.model.mimeType=this._mimetype,n}dispose(){this.isDisposed||(this._msgIdCells=null,this._msgIds=null,this._history.dispose(),super.dispose())}async execute(e=!1,t=250){var n,o;if("dead"===(null===(o=null===(n=this.sessionContext.session)||void 0===n?void 0:n.kernel)||void 0===o?void 0:o.status))return;const s=this.promptCell;if(!s)throw new Error("Cannot execute without a prompt cell");if(s.model.trusted=!0,e)return this.newPromptCell(),void await this._execute(s);const i=await this._shouldExecute(t);this.isDisposed||(i?(this.newPromptCell(),this.promptCell.editor.focus(),await this._execute(s)):s.editor.newIndentedLine())}getCell(e){return this._msgIds.get(e)}inject(e,t={}){const n=this.createCodeCell();n.model.sharedModel.setSource(e);for(const e of Object.keys(t))n.model.setMetadata(e,t[e]);return this.addCell(n),this._execute(n)}insertLinebreak(){const e=this.promptCell;e&&e.editor.newIndentedLine()}replaceSelection(e){var t,n;const o=this.promptCell;o&&(null===(n=(t=o.editor).replaceSelection)||void 0===n||n.call(t,e))}serialize(){const e=[];for(const t of this._cells){const n=t.model;(0,k.Is)(n)&&e.push(n.toJSON())}return this.promptCell&&e.push(this.promptCell.model.toJSON()),e}_evtMouseDown(e){const{button:t,shiftKey:n}=e;if(0!==t&&2!==t||n&&2===t)return;let o=e.target;const s=e=>e.classList.contains(B);let i=P.findCell(o,this._cells,s);if(-1===i&&(o=document.elementFromPoint(e.clientX,e.clientY),i=P.findCell(o,this._cells,s)),-1===i)return;const r=this._cells.get(i);"prompt"===P.detectTargetArea(r,e.target)&&(this._dragData={pressX:e.clientX,pressY:e.clientY,index:i},this._focusedCell=r,document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0),e.preventDefault())}_evtMouseMove(e){const t=this._dragData;t&&P.shouldStartDrag(t.pressX,t.pressY,e.clientX,e.clientY)&&this._startDrag(t.index,e.clientX,e.clientY)}_startDrag(e,t,n){const o=this._focusedCell.model,s=[o.toJSON()],i=P.createCellDragImage(this._focusedCell,s);this._drag=new F.n({mimeData:new f.MimeData,dragImage:i,proposedAction:"copy",supportedActions:"copy",source:this}),this._drag.mimeData.setData("application/vnd.jupyter.cells",s);const r=o.sharedModel.getSource();return this._drag.mimeData.setData("text/plain",r),this._focusedCell=null,document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),this._drag.start(t,n).then((()=>{this.isDisposed||(this._drag=null,this._dragData=null)}))}handleEvent(e){switch(e.type){case"keydown":this._evtKeyDown(e);break;case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e)}}onAfterAttach(e){const t=this.node;t.addEventListener("keydown",this,!0),t.addEventListener("click",this),t.addEventListener("mousedown",this),this.promptCell?(this.promptCell.editor.focus(),this.update()):this.newPromptCell()}onBeforeDetach(e){const t=this.node;t.removeEventListener("keydown",this,!0),t.removeEventListener("click",this)}onActivateRequest(e){const t=this.promptCell&&this.promptCell.editor;t&&t.focus(),this.update()}newPromptCell(){var e;let t=this.promptCell;const n=this._input;t&&(t.readOnly=!0,t.removeClass(K),L.Signal.clearData(t.editor),null===(e=t.editor)||void 0===e||e.blur(),n.widgets[0].parent=null,this.addCell(t));const o=this.contentFactory,s=this._createCodeCellOptions();t=o.createCodeCell(s),t.model.mimeType=this._mimetype,t.addClass(K),this._input.addWidget(t),this._history.editor=t.editor,this._promptCellCreated.emit(t)}onUpdateRequest(e){W.scrollToBottom(this._content.node)}_evtKeyDown(e){const t=this.promptCell&&this.promptCell.editor;t&&(13!==e.keyCode||t.hasFocus()?27===e.keyCode&&t.hasFocus()&&(e.preventDefault(),e.stopPropagation(),this.node.focus()):(e.preventDefault(),t.focus()))}_evtMouseUp(e){this.promptCell&&this.promptCell.node.contains(e.target)&&this.promptCell.editor.focus()}_execute(e){const t=e.model.sharedModel.getSource();return this._history.push(t),"clear"===t||"%clear"===t?(this.clear(),Promise.resolve(void 0)):(e.model.contentChanged.connect(this.update,this),w.O7.execute(e,this.sessionContext).then((t=>{if(!this.isDisposed){if(t&&"ok"===t.content.status){const n=t.content;if(n.payload&&n.payload.length){const t=n.payload.filter((e=>"set_next_input"===e.source))[0];if(t){const n=t.text;e.model.sharedModel.setSource(n)}}}else if(t&&"error"===t.content.status)for(const e of this._cells)null===e.model.executionCount&&e.setPrompt("");e.model.contentChanged.disconnect(this.update,this),this.update(),this._executed.emit(new Date)}}),(()=>{this.isDisposed||(e.model.contentChanged.disconnect(this.update,this),this.update())})))}_handleInfo(e){if("ok"!==e.status)return void this._banner.model.sharedModel.setSource("Error in getting kernel banner");this._banner.model.sharedModel.setSource(e.banner);const t=e.language_info;this._mimetype=this._mimeTypeService.getMimeTypeByLanguage(t),this.promptCell&&(this.promptCell.model.mimeType=this._mimetype)}_createCodeCellOptions(){const e=this.contentFactory,t=this.modelFactory.createCodeCell({}),n=this.rendermime,o=this.editorConfig,s=x.tk.domEventHandlers({keydown:(e,t)=>13===e.keyCode&&(e.preventDefault(),!0)});return{model:t,rendermime:n,contentFactory:e,editorConfig:o,editorExtensions:[y.Wl.high(s)],placeholder:!1,translator:this._translator}}_onCellDisposed(e,t){if(!this.isDisposed){this._cells.removeValue(e);const t=this._msgIdCells.get(e);t&&(this._msgIdCells.delete(e),this._msgIds.delete(t))}}_shouldExecute(e){const t=this.promptCell;if(!t)return Promise.resolve(!1);const n=t.model.sharedModel.getSource();return new Promise(((t,o)=>{var s;const i=setTimeout((()=>{t(!0)}),e),r=null===(s=this.sessionContext.session)||void 0===s?void 0:s.kernel;r?r.requestIsComplete({code:n}).then((e=>{clearTimeout(i),this.isDisposed&&t(!1),"incomplete"===e.content.status?t(!1):t(!0)})).catch((()=>{t(!0)})):t(!1)}))}async _onKernelChanged(){var e;this.clear(),this._banner&&(this._banner.dispose(),this._banner=null),this.addBanner(),(null===(e=this.sessionContext.session)||void 0===e?void 0:e.kernel)&&this._handleInfo(await this.sessionContext.session.kernel.info)}async _onKernelStatusChanged(){var e;const t=null===(e=this.sessionContext.session)||void 0===e?void 0:e.kernel;"restarting"===(null==t?void 0:t.status)&&(this.addBanner(),this._handleInfo(await(null==t?void 0:t.info)))}}var W,N;!function(e){e.defaultEditorConfig={codeFolding:!1,lineNumbers:!1};class t extends w.bL.ContentFactory{createCodeCell(e){return new w.O7(e).initializeState()}createRawCell(e){return new w.VB(e).initializeState()}}e.ContentFactory=t;class n{constructor(e={}){this.codeCellContentFactory=e.codeCellContentFactory||k.ro.defaultContentFactory}createCodeCell(e={}){return e.contentFactory||(e.contentFactory=this.codeCellContentFactory),new k.ro(e)}createRawCell(e){return new k.ff(e)}}e.ModelFactory=n,e.defaultModelFactory=new n({})}(q||(q={})),function(e){e.scrollToBottom=function(e){e.scrollTop=e.scrollHeight-e.clientHeight}}(W||(W={}));class R extends p.k{constructor(e){super({content:new v.s_}),this._executed=null,this._connected=null,this.addClass("jp-ConsolePanel");let{rendermime:t,mimeTypeService:n,path:o,basePath:s,name:i,manager:l,modelFactory:a,sessionContext:c,translator:d}=e;this.translator=null!=d?d:C.Sr;const h=this.translator.load("jupyterlab"),u=this.contentFactory=e.contentFactory,p=N.count++;o||(o=m.PathExt.join(s||"",`console-${p}-${f.UUID.uuid4()}`)),c=this._sessionContext=null!=c?c:new r.B({sessionManager:l.sessions,specsManager:l.kernelspecs,path:l.contents.localPath(o),name:i||h.__("Console %1",p),type:"console",kernelPreference:e.kernelPreference,setBusy:e.setBusy});const y=new g.D.UrlResolver({path:o,contents:l.contents});t=t.clone({resolver:y}),this.console=u.createConsole({rendermime:t,sessionContext:c,mimeTypeService:n,contentFactory:u,modelFactory:a,translator:d}),this.content.addWidget(this.console),c.initialize().then((async t=>{var n;t&&await(null!==(n=e.sessionDialogs)&&void 0!==n?n:new r.H({translator:d})).selectKernel(c),this._connected=new Date,this._updateTitlePanel()})),this.console.executed.connect(this._onExecuted,this),this._updateTitlePanel(),c.kernelChanged.connect(this._updateTitlePanel,this),c.propertyChanged.connect(this._updateTitlePanel,this),this.title.icon=_.fO,this.title.closable=!0,this.id=`console-${p}`}get sessionContext(){return this._sessionContext}dispose(){this.sessionContext.dispose(),this.console.dispose(),super.dispose()}onActivateRequest(e){const t=this.console.promptCell;t&&t.editor.focus()}onCloseRequest(e){super.onCloseRequest(e),this.dispose()}_onExecuted(e,t){this._executed=t,this._updateTitlePanel()}_updateTitlePanel(){N.updateTitle(this,this._connected,this._executed,this.translator)}}!function(e){class t extends q.ContentFactory{createConsole(e){return new q(e)}}e.ContentFactory=t,e.IContentFactory=new f.Token("@jupyterlab/console:IContentFactory","A factory object that creates new code consoles. Use this if you want to create and host code consoles in your own UI elements.")}(R||(R={})),function(e){e.count=1,e.updateTitle=function(e,t,n,o){const s=(o=o||C.Sr).load("jupyterlab"),i=e.console.sessionContext.session;if(i){let o=s.__("Name: %1\n",i.name)+s.__("Directory: %1\n",m.PathExt.dirname(i.path))+s.__("Kernel: %1",e.console.sessionContext.kernelDisplayName);t&&(o+=s.__("\nConnected: %1",m.Time.format(t.toISOString()))),n&&(o+=s.__("\nLast Execution: %1")),e.title.label=i.name,e.title.caption=o}else e.title.label=s.__("Console"),e.title.caption=""}}(N||(N={}));var H=n(29246),U=n(47415),$=n(43043),z=n(97491),X=n(35909),Y=n(56276),V=n(46931),J=n(16781);class G{constructor(e){this._enabled=!1,this._isDisposed=!1,this.sessionContext=e.sessionContext,this.sessionContext.iopubMessage.connect(this.onIOPubMessage,this),this._parent=e.parent}get enabled(){return this._enabled}set enabled(e){this._enabled=e}get parent(){return this._parent}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,L.Signal.clearData(this))}onIOPubMessage(e,t){var n;if(!this._enabled)return!1;const o=null===(n=this.sessionContext.session)||void 0===n?void 0:n.kernel;if(!o)return!1;const s=this._parent;if(t.parent_header.session===o.clientId)return!1;const i=t.header.msg_type,r=t.parent_header.msg_id;let l;switch(i){case"execute_input":{const e=t;l=this._newCell(r);const n=l.model;return n.executionCount=e.content.execution_count,n.sharedModel.setSource(e.content.code),n.trusted=!0,s.update(),!0}case"execute_result":case"display_data":case"stream":case"error":{if(l=this._parent.getCell(r),!l)return!1;const e={...t.content,output_type:i};return l.model.outputs.add(e),s.update(),!0}case"clear_output":{const e=t.content.wait;return l=this._parent.getCell(r),l&&l.model.outputs.clear(e),!0}default:return!1}}_newCell(e){const t=this.parent.createCodeCell();return t.addClass("jp-CodeConsole-foreignCell"),this._parent.addCell(t,e),t}}var Z=n(41835);const Q={id:"@jupyterlab/console-extension:foreign",description:"Add foreign handler of IOPub messages to the console.",requires:[u.E,X.O,C.gv],optional:[i.WW],activate:function(e,t,n,o,s){const i=o.load("jupyterlab"),{shell:r}=e;t.widgetAdded.connect(((e,t)=>{const o=t.console,s=new G({sessionContext:o.sessionContext,parent:o});te.foreignHandlerProperty.set(o,s),n.get("@jupyterlab/console-extension:tracker","showAllKernelActivity").then((({composite:e})=>{const t=e;s.enabled=t})),o.disposed.connect((()=>{s.dispose()}))}));const{commands:l}=e,a=i.__("Console"),c="console:toggle-show-all-kernel-activity";l.addCommand(c,{label:e=>i.__("Show All Kernel Activity"),execute:e=>{const n=function(e){const n=t.currentWidget;return!1!==e.activate&&n&&r.activateById(n.id),n}(e);if(!n)return;const o=te.foreignHandlerProperty.get(n.console);o&&(o.enabled=!o.enabled)},isToggled:()=>{var e;return null!==t.currentWidget&&!!(null===(e=te.foreignHandlerProperty.get(t.currentWidget.console))||void 0===e?void 0:e.enabled)},isEnabled:()=>null!==t.currentWidget&&t.currentWidget===r.currentWidget}),s&&s.addItem({command:c,category:a,args:{isPalette:!0}})},autoStart:!0},ee=Q;var te,ne;!function(e){e.foreignHandlerProperty=new Z.AttachedProperty({name:"foreignHandler",create:()=>{}})}(te||(te={})),function(e){e.autoClosingBrackets="console:toggle-autoclosing-brackets",e.create="console:create",e.clear="console:clear",e.runUnforced="console:run-unforced",e.runForced="console:run-forced",e.linebreak="console:linebreak",e.interrupt="console:interrupt-kernel",e.restart="console:restart-kernel",e.closeAndShutdown="console:close-and-shutdown",e.open="console:open",e.inject="console:inject",e.changeKernel="console:change-kernel",e.getKernel="console:get-kernel",e.enterToExecute="console:enter-to-execute",e.shiftEnterToExecute="console:shift-enter-to-execute",e.interactionMode="console:interaction-mode",e.replaceSelection="console:replace-selection",e.shutdown="console:shutdown",e.invokeCompleter="completer:invoke-console",e.selectCompleter="completer:select-console"}(ne||(ne={}));const oe={id:"@jupyterlab/console-extension:tracker",description:"Provides the console widget tracker.",provides:u.E,requires:[R.IContentFactory,d.D,z.ZD,X.O],optional:[o.L,H.iH,$.O,i.WW,U.B,s.yo,i.oj,Y.C,C.gv],activate:async function(e,t,n,o,s,i,c,d,h,u,p,m,g,v){const y=null!=v?v:C.Sr,x=y.load("jupyterlab"),b=e.serviceManager,{commands:w,shell:k}=e,S=x.__("Console"),D=null!=m?m:new r.H({translator:y}),E=new l.u({namespace:"console"});async function I(e){var i,r;await b.ready;const l=new R({manager:b,contentFactory:t,mimeTypeService:n.mimeTypeService,rendermime:o,sessionDialogs:D,translator:y,setBusy:null!==(i=p&&(()=>p.setBusy()))&&void 0!==i?i:void 0,...e}),a=(await s.get("@jupyterlab/console-extension:tracker","interactionMode")).composite;return l.console.node.dataset.jpInteractionMode=a,await E.add(l),l.sessionContext.propertyChanged.connect((()=>{E.save(l)})),k.add(l,"main",{ref:e.ref,mode:e.insertMode,activate:!1!==e.activate,type:null!==(r=e.type)&&void 0!==r?r:"Console"}),l}i&&i.restore(E,{command:ne.create,args:e=>{const{path:t,name:n,kernelPreference:o}=e.console.sessionContext;return{path:t,name:n,kernelPreference:{...o}}},name:e=>{var t;return null!==(t=e.console.sessionContext.path)&&void 0!==t?t:f.UUID.uuid4()},when:b.ready}),u&&b.ready.then((()=>{let e=null;const t=()=>{e&&(e.dispose(),e=null);const t=b.kernelspecs.specs;if(t){e=new J.DisposableSet;for(const n in t.kernelspecs){const o=n===t.default?0:1/0,s=t.kernelspecs[n],i=s.resources["logo-svg"]||s.resources["logo-64x64"];e.add(u.add({command:ne.create,args:{isLauncher:!0,kernelPreference:{name:n}},category:x.__("Console"),rank:o,kernelIconUrl:i,metadata:{kernel:f.JSONExt.deepCopy(s.metadata||{})}}))}}};t(),b.kernelspecs.specsChanged.connect(t)}));const j="@jupyterlab/console-extension:tracker";let M,P={};async function T(e){M=(await s.get(j,"interactionMode")).composite,P=(await s.get(j,"promptCellConfig")).composite;const t=e=>{var t,n;e.console.node.dataset.jpInteractionMode=M,e.console.editorConfig=P,null===(n=null===(t=e.console.promptCell)||void 0===t?void 0:t.editor)||void 0===n||n.setOptions(P)};e?t(e):E.forEach(t)}if(s.pluginChanged.connect(((e,t)=>{t===j&&T()})),await T(),g){const e=g.getRenderer("@jupyterlab/codemirror-extension:plugin.defaultConfig");e&&g.addRenderer("@jupyterlab/console-extension:tracker.promptCellConfig",e)}function A(){return null!==E.currentWidget&&E.currentWidget===k.currentWidget}E.widgetAdded.connect(((e,t)=>{T(t)})),w.addCommand(ne.autoClosingBrackets,{execute:async e=>{var t;P.autoClosingBrackets=!!(null!==(t=e.force)&&void 0!==t?t:!P.autoClosingBrackets),await s.set(j,"promptCellConfig",P)},label:x.__("Auto Close Brackets for Code Console Prompt"),isToggled:()=>P.autoClosingBrackets});let F=ne.open;function L(e){const t=E.currentWidget;return!1!==e.activate&&t&&k.activateById(t.id),null!=t?t:null}w.addCommand(F,{label:x.__("Open a console for the provided `path`."),execute:e=>{const t=e.path,n=E.find((e=>{var n;return(null===(n=e.console.sessionContext.session)||void 0===n?void 0:n.path)===t}));return n?(!1!==e.activate&&k.activateById(n.id),n):b.ready.then((()=>(0,V.sE)(b.sessions.running(),(e=>e.path===t))?I(e):Promise.reject(`No running kernel session for path: ${t}`)))}}),F=ne.create,w.addCommand(F,{label:e=>{var t,n,o,s;if(e.isPalette)return x.__("New Console");if(e.isLauncher&&e.kernelPreference){const i=e.kernelPreference;return null!==(s=null===(o=null===(n=null===(t=b.kernelspecs)||void 0===t?void 0:t.specs)||void 0===n?void 0:n.kernelspecs[i.name||""])||void 0===o?void 0:o.display_name)&&void 0!==s?s:""}return x.__("Console")},icon:e=>e.isPalette?void 0:_.fO,execute:e=>{var t;return I({basePath:null!==(t=e.basePath||e.cwd||(null==c?void 0:c.model.path))&&void 0!==t?t:"",...e})}}),w.addCommand(ne.clear,{label:x.__("Clear Console Cells"),execute:e=>{const t=L(e);t&&t.console.clear()},isEnabled:A}),w.addCommand(ne.runUnforced,{label:x.__("Run Cell (unforced)"),execute:e=>{const t=L(e);if(t)return t.console.execute()},isEnabled:A}),w.addCommand(ne.runForced,{label:x.__("Run Cell (forced)"),execute:e=>{const t=L(e);if(t)return t.console.execute(!0)},isEnabled:A}),w.addCommand(ne.linebreak,{label:x.__("Insert Line Break"),execute:e=>{const t=L(e);t&&t.console.insertLinebreak()},isEnabled:A}),w.addCommand(ne.replaceSelection,{label:x.__("Replace Selection in Console"),execute:e=>{const t=L(e);if(!t)return;const n=e.text||"";t.console.replaceSelection(n)},isEnabled:A}),w.addCommand(ne.interrupt,{label:x.__("Interrupt Kernel"),execute:e=>{var t;const n=L(e);if(!n)return;const o=null===(t=n.console.sessionContext.session)||void 0===t?void 0:t.kernel;return o?o.interrupt():void 0},isEnabled:A}),w.addCommand(ne.restart,{label:x.__("Restart Kernel…"),execute:e=>{const t=L(e);if(t)return D.restart(t.console.sessionContext)},isEnabled:A}),w.addCommand(ne.shutdown,{label:x.__("Shut Down"),execute:e=>{const t=L(e);if(t)return t.console.sessionContext.shutdown()}}),w.addCommand(ne.closeAndShutdown,{label:x.__("Close and Shut Down…"),execute:e=>{const t=L(e);if(t)return(0,a.vC)({title:x.__("Shut down the console?"),body:x.__('Are you sure you want to close "%1"?',t.title.label),buttons:[a.Vq.cancelButton({ariaLabel:x.__("Cancel console Shut Down")}),a.Vq.warnButton({ariaLabel:x.__("Confirm console Shut Down")})]}).then((e=>!!e.button.accept&&w.execute(ne.shutdown,{activate:!1}).then((()=>(t.dispose(),!0)))))},isEnabled:A}),w.addCommand(ne.inject,{label:x.__("Inject some code in a console."),execute:e=>{const t=e.path;E.find((n=>{var o;return(null===(o=n.console.sessionContext.session)||void 0===o?void 0:o.path)===t&&(!1!==e.activate&&k.activateById(n.id),n.console.inject(e.code,e.metadata),!0)}))},isEnabled:A}),w.addCommand(ne.changeKernel,{label:x.__("Change Kernel…"),execute:e=>{const t=L(e);if(t)return D.selectKernel(t.console.sessionContext)},isEnabled:A}),w.addCommand(ne.getKernel,{label:x.__("Get Kernel"),execute:e=>{var t;const n=L({activate:!1,...e});if(n)return null===(t=n.sessionContext.session)||void 0===t?void 0:t.kernel},isEnabled:A}),h&&[ne.create,ne.linebreak,ne.clear,ne.runUnforced,ne.runForced,ne.restart,ne.interrupt,ne.changeKernel,ne.closeAndShutdown].forEach((e=>{h.addItem({command:e,category:S,args:{isPalette:!0}})})),d&&(d.fileMenu.closeAndCleaners.add({id:ne.closeAndShutdown,isEnabled:A}),d.kernelMenu.kernelUsers.changeKernel.add({id:ne.changeKernel,isEnabled:A}),d.kernelMenu.kernelUsers.clearWidget.add({id:ne.clear,isEnabled:A}),d.kernelMenu.kernelUsers.interruptKernel.add({id:ne.interrupt,isEnabled:A}),d.kernelMenu.kernelUsers.restartKernel.add({id:ne.restart,isEnabled:A}),d.kernelMenu.kernelUsers.shutdownKernel.add({id:ne.shutdown,isEnabled:A}),d.runMenu.codeRunners.run.add({id:ne.runForced,isEnabled:A}),d.editMenu.clearers.clearCurrent.add({id:ne.clear,isEnabled:A}),d.helpMenu.getKernel.add({id:ne.getKernel,isEnabled:A}));const O={notebook:x.__("Execute with Shift+Enter"),terminal:x.__("Execute with Enter")};return w.addCommand(ne.interactionMode,{label:e=>{var t;return null!==(t=O[e.interactionMode])&&void 0!==t?t:"Set the console interaction mode."},execute:async e=>{try{await s.set(j,"interactionMode",e.interactionMode)}catch(e){console.error(`Failed to set ${j}:keyMap - ${e.message}`)}},isToggled:e=>e.interactionMode===M}),E},autoStart:!0},se={id:"@jupyterlab/console-extension:factory",description:"Provides the console widget content factory.",provides:R.IContentFactory,requires:[d.D],autoStart:!0,activate:(e,t)=>{const n=t.factoryService.newInlineEditor;return new R.ContentFactory({editorFactory:n})}},ie={id:"@jupyterlab/console-extension:kernel-status",description:"Adds the console to the kernel status indicator model.",autoStart:!0,requires:[u.E,i.hz],activate:(e,t,n)=>{n.addSessionProvider((e=>e&&t.has(e)?e.sessionContext:null))}},re={id:"@jupyterlab/console-extension:cursor-position",description:"Adds the console to the code editor cursor position model.",autoStart:!0,requires:[u.E,d.f],activate:(e,t,n)=>{let o=null;n.addEditorProvider((async e=>{let s=null;if(e!==o){if(null==o||o.console.promptCellCreated.disconnect(n.update),o=null,e&&t.has(e)){e.console.promptCellCreated.connect(n.update);const t=e.console.promptCell;s=null,t&&(await t.ready,s=t.editor),o=e}}else if(e){const t=e.console.promptCell;s=null,t&&(await t.ready,s=t.editor)}return s}))}},le=[se,oe,ee,ie,re,{id:"@jupyterlab/console-extension:completer",description:"Adds completion to the console.",autoStart:!0,requires:[u.E],optional:[h.p,C.gv,i.hd],activate:function(e,t,n,o,s){if(!n)return;const i=(null!=o?o:C.Sr).load("jupyterlab"),r=null!=s?s:new c.T;e.commands.addCommand(ne.invokeCompleter,{label:i.__("Display the completion helper."),execute:()=>{const e=t.currentWidget&&t.currentWidget.id;if(e)return n.invoke(e)}}),e.commands.addCommand(ne.selectCompleter,{label:i.__("Select the completion suggestion."),execute:()=>{const e=t.currentWidget&&t.currentWidget.id;if(e)return n.select(e)}}),e.commands.addKeyBinding({command:ne.selectCompleter,keys:["Enter"],selector:".jp-ConsolePanel .jp-mod-completer-active"});const l=async(e,t)=>{var o,s;const i={editor:null!==(s=null===(o=t.console.promptCell)||void 0===o?void 0:o.editor)&&void 0!==s?s:null,session:t.console.sessionContext.session,widget:t};await n.updateCompleter(i),t.console.promptCellCreated.connect(((e,o)=>{const s={editor:o.editor,session:e.sessionContext.session,widget:t,sanitzer:r};n.updateCompleter(s).catch(console.error)})),t.console.sessionContext.sessionChanged.connect((()=>{var e,o;const s={editor:null!==(o=null===(e=t.console.promptCell)||void 0===e?void 0:e.editor)&&void 0!==o?o:null,session:t.console.sessionContext.session,widget:t,sanitizer:r};n.updateCompleter(s).catch(console.error)}))};t.widgetAdded.connect(l),n.activeProvidersChanged.connect((()=>{t.forEach((e=>{l(0,e).catch((e=>console.error(e)))}))}))}}]},11097:(e,t,n)=>{n.d(t,{E:()=>o});const o=new(n(47963).Token)("@jupyterlab/console:IConsoleTracker","A widget tracker for code consoles.\n  Use this if you want to be able to iterate over and interact with code consoles\n  created by the application.")},43043:(e,t,n)=>{n.d(t,{O:()=>o});const o=new(n(47963).Token)("@jupyterlab/mainmenu:IMainMenu","A service for the main menu bar for the application.\n  Use this if you want to add your own menu items or provide implementations for standardized menu items for specific activities.")},80882:(e,t,n)=>{n.d(t,{Ol:()=>i,o5:()=>r,wk:()=>s});var o=n(47963);const s=new o.Token("@jupyterlab/toc:ITableOfContentsRegistry","A service to register table of content factory."),i=new o.Token("@jupyterlab/toc:ITableOfContentsTracker","A widget tracker for table of contents.");var r;!function(e){e.defaultConfig={baseNumbering:1,maximalDepth:4,numberingH1:!0,numberHeaders:!1,includeOutput:!0,syncCollapseState:!1}}(r||(r={}))},3053:(e,t,n)=>{n.d(t,{FP:()=>r,Gn:()=>c,U9:()=>a,Zd:()=>h,ok:()=>l,tF:()=>i});var o=n(80882);const s="numbering-entry";function i(e,t,n=[]){const s={...o.o5.defaultConfig,...t},i=n;let r=i.length;const l=new Array;for(const t of e){if(t.skip)continue;const e=t.level;if(e>0&&e<=s.maximalDepth){const n=c(e,r,i,s);r=e,l.push({...t,prefix:n})}}return l}function r(e){return"text/html"===e}function l(e,t=!0){var n;const o=document.createElement("div");o.innerHTML=e;const s=new Array,i=o.querySelectorAll("h1, h2, h3, h4, h5, h6");for(const e of i){const t=parseInt(e.tagName[1],10);s.push({text:null!==(n=e.textContent)&&void 0!==n?n:"",level:t,id:null==e?void 0:e.getAttribute("id"),skip:e.classList.contains("jp-toc-ignore")||e.classList.contains("tocSkip")})}return s}function a(e,t,n){let o=e.querySelector(t);if(!o)return null;if(o.querySelector(`span.${s}`)){const i=e.querySelectorAll(t);for(const e of i)if(!e.querySelector(`span.${s}`)){o=e,d(e,n);break}}else d(o,n);return o}function c(e,t,n,o){const{baseNumbering:s,numberingH1:i,numberHeaders:r}=o;let l="";if(r){const o=i?1:2;if(e>t){for(let o=t;o<e-1;o++)n[o]=0;n[e-1]=e===o?s:1}else n[e-1]+=1,e<t&&n.splice(e);i?l=n.map((e=>null!=e?e:0)).join(".")+". ":n.length>1&&(l=n.slice(1).map((e=>null!=e?e:0)).join(".")+". ")}return l}function d(e,t){e.insertAdjacentHTML("afterbegin",`<span class="${s}">${t}</span>`)}function h(e){null==e||e.querySelectorAll(`span.${s}`).forEach((e=>{e.remove()}))}},83331:(e,t,n)=>{n.d(t,{N4:()=>s,kb:()=>l,o3:()=>i});var o=n(10751);async function s(e,t,n){try{const s=await e.render(t);if(!s)return null;const i=document.createElement("div");i.innerHTML=s;const r=i.querySelector(`h${n}`);return r?o.ap.createHeaderId(r):null}catch(e){console.error("Failed to parse a heading.",e)}return null}function i(e){const t=e.split("\n"),n=new Array;let o,s=0;if("---"===t[s])for(let e=s+1;e<t.length;e++)if("---"===t[e]){s=e+1;break}for(;s<t.length;s++){const e=t[s];if(""===e)continue;if(e.startsWith("```")&&(o=!o),o)continue;const i=a(e,t[s+1]);i&&n.push({...i,line:s})}return n}const r=["text/x-ipythongfm","text/x-markdown","text/x-gfm","text/markdown"];function l(e){return r.includes(e)}function a(e,t){let n=e.match(/^([#]{1,6}) (.*)/);return n?{text:c(n[2]),level:n[1].length,raw:e,skip:d.test(n[0])}:t&&(n=t.match(/^ {0,3}([=]{2,}|[-]{2,})\s*$/),n)?{text:c(e),level:"="===n[1][0]?1:2,raw:[e,t].join("\n"),skip:d.test(e)}:(n=e.match(/<h([1-6]).*>(.*)<\/h\1>/i),n?{text:n[2],level:parseInt(n[1],10),skip:d.test(n[0]),raw:e}:null)}function c(e){return e.replace(/\[(.+)\]\(.+\)/g,"$1")}const d=/<\w+\s(.*?\s)?class="(.*?\s)?(jp-toc-ignore|tocSkip)(\s.*?)?"(\s.*?)?>/},56276:(e,t,n)=>{n.d(t,{C:()=>s,E:()=>i});var o=n(47963);const s=new o.Token("@jupyterlab/ui-components:IFormRendererRegistry","A service for settings form renderer registration."),i=new o.Token("@jupyterlab/ui-components:ILabIconManager","A service to register and request icons.")}}]);