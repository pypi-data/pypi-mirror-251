import{S as Ce,V as Ve,a as ze,_ as ge}from"./VToolbar-BBzymioO.js";import{a9 as Ae,_ as G,k as $e,Q as F,R as h,O as D,P as S,L as u,aa as M,ab as Y,ac as Pe,M as Be,ad as j,ae as he,af as Re,ag as Ie,x as Q,ah as Oe,ai as Ee,G as Z,aj as Me,h as x,s as A,r as ie,K as ee,ak as re,al as K,am as J,an as De,ao as Le,ap as ue,E as Fe,aq as Se,ar as Ge,J as He,as as Ue,y as ce,V as Ne,a as We,at as de,au as qe,av as Xe,aw as Ye,ax as je,ay as Ke,az as Je,aA as z,aB as Qe,z as Ze,aC as et,aD as ye,t as ve,N as tt,aE as $,aF as fe,aG as at,aH as st,aI as lt,m as nt,aJ as ot}from"./admin-drawer-panel-JjJ1iA6R.js";import{u as it,m as rt,a as ut}from"./main-fEXxBNBg.js";import{t as ct}from"./index-RrPhDVxT.js";import{V as dt,a as vt}from"./VWindowItem-J3hy1lxS.js";import{V as ft}from"./VMain-VT-qZQ__.js";import"./confirm-footer-IJHq21-K.js";import"./change-password-dialog-9i9SZGmU.js";import"./VTextField-1s8i2nK8.js";import"./VSelectionControl-9CzKd8rG.js";const mt={name:"AdminTitleToolbar",components:{SettingsDrawerButton:Ce},computed:{...Ae($e,["isSettingsDrawerOpen"])}};function bt(e,o,n,c,v,d){const s=F("SettingsDrawerButton");return h(),D(ze,{id:"titleBar",class:Y(["codexToolbar",{drawerMargin:!e.$vuetify.display.mdAndDown}]),density:"compact",elevation:"8"},{default:S(()=>[u(Ve,{class:"codexToolbarTitle"},{default:S(()=>[M(" Codex Administration ")]),_:1}),u(s,{class:Y({invisible:e.isSettingsDrawerOpen}),disabled:e.isSettingsDrawerOpen,plain:e.isSettingsDrawerOpen,onClick:o[0]||(o[0]=l=>e.isSettingsDrawerOpen=!0)},null,8,["class","disabled","plain"])]),_:1},8,["class"])}const _e=G(mt,[["render",bt],["__scopeId","data-v-15c77dc3"]]),pt={name:"AdminSettingsPanel",data(){return{mdiBookshelf:Pe}},computed:{...Be(it,{browserRoute:e=>e.page.routes.last?{name:"browser",params:e.page.routes.last}:{name:"home"}})}};function gt(e,o,n,c,v,d){return h(),D(Ie,{ref:"browserLink",to:e.browserRoute},{default:S(()=>[u(Re,null,{default:S(()=>[u(j,null,{default:S(()=>[M(he(v.mdiBookshelf),1)]),_:1}),M("Browser ")]),_:1})]),_:1},8,["to"])}const ht=G(pt,[["render",gt]]),xe=Symbol.for("vuetify:v-tabs"),St=Q({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Oe(Ee({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),Te=Z()({name:"VTab",props:St(),setup(e,o){let{slots:n,attrs:c}=o;const{textColorClasses:v,textColorStyles:d}=Me(e,"sliderColor"),s=x(()=>e.direction==="horizontal"),l=A(!1),t=ie(),r=ie();function m(f){var P,b;let{value:p}=f;if(l.value=p,p){const C=(b=(P=t.value)==null?void 0:P.$el.parentElement)==null?void 0:b.querySelector(".v-tab--selected .v-tab__slider"),B=r.value;if(!C||!B)return;const H=getComputedStyle(C).color,y=C.getBoundingClientRect(),T=B.getBoundingClientRect(),V=s.value?"x":"y",R=s.value?"X":"Y",L=s.value?"right":"bottom",w=s.value?"width":"height",U=y[V],I=T[V],k=U>I?y[L]-T[L]:y[V]-T[V],N=Math.sign(k)>0?s.value?"right":"bottom":Math.sign(k)<0?s.value?"left":"top":"center",W=(Math.abs(k)+(Math.sign(k)<0?y[w]:T[w]))/Math.max(y[w],T[w])||0,g=y[w]/T[w]||0,O=1.5;De(B,{backgroundColor:[H,"currentcolor"],transform:[`translate${R}(${k}px) scale${R}(${g})`,`translate${R}(${k/O}px) scale${R}(${(W-1)/O+1})`,"none"],transformOrigin:Array(3).fill(N)},{duration:225,easing:Le})}}return ee(()=>{const f=re.filterProps(e);return u(re,J({symbol:xe,ref:t,class:["v-tab",e.class],style:e.style,tabindex:l.value?0:-1,role:"tab","aria-selected":String(l.value),active:!1},f,c,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":m}),{...n,default:()=>{var p;return u(K,null,[((p=n.default)==null?void 0:p.call(n))??e.text,!e.hideSlider&&u("div",{ref:r,class:["v-tab__slider",v.value],style:d.value},null)])}})}),{}}});function me(e){const n=Math.abs(e);return Math.sign(e)*(n/((1/.501-2)*(1-n)+1))}function be(e){let{selectedElement:o,containerSize:n,contentSize:c,isRtl:v,currentScrollOffset:d,isHorizontal:s}=e;const l=s?o.clientWidth:o.clientHeight,t=s?o.offsetLeft:o.offsetTop,r=v&&s?c-t-l:t,m=n+d,f=l+r,p=l*.4;return r<=d?d=Math.max(r-p,0):m<=f&&(d=Math.min(d-(m-f-p),c-n)),d}function yt(e){let{selectedElement:o,containerSize:n,contentSize:c,isRtl:v,isHorizontal:d}=e;const s=d?o.clientWidth:o.clientHeight,l=d?o.offsetLeft:o.offsetTop,t=v&&d?c-l-s/2-n/2:l+s/2-n/2;return Math.min(c-n,Math.max(0,t))}const _t=Symbol.for("vuetify:v-slide-group"),we=Q({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:_t},nextIcon:{type:ue,default:"$next"},prevIcon:{type:ue,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...Fe(),...rt(),...Se(),...Ge({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),pe=Z()({name:"VSlideGroup",props:we(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:n}=o;const{isRtl:c}=He(),{displayClasses:v,mobile:d}=ut(e),s=Ue(e,e.symbol),l=A(!1),t=A(0),r=A(0),m=A(0),f=x(()=>e.direction==="horizontal"),{resizeRef:p,contentRect:P}=ce(),{resizeRef:b,contentRect:C}=ce(),B=x(()=>s.selected.value.length?s.items.value.findIndex(a=>a.id===s.selected.value[0]):-1),H=x(()=>s.selected.value.length?s.items.value.findIndex(a=>a.id===s.selected.value[s.selected.value.length-1]):-1);if(Ne){let a=-1;We(()=>[s.selected.value,P.value,C.value,f.value],()=>{cancelAnimationFrame(a),a=requestAnimationFrame(()=>{if(P.value&&C.value){const i=f.value?"width":"height";r.value=P.value[i],m.value=C.value[i],l.value=r.value+1<m.value}if(B.value>=0&&b.value){const i=b.value.children[H.value];B.value===0||!l.value?t.value=0:e.centerActive?t.value=yt({selectedElement:i,containerSize:r.value,contentSize:m.value,isRtl:c.value,isHorizontal:f.value}):l.value&&(t.value=be({selectedElement:i,containerSize:r.value,contentSize:m.value,isRtl:c.value,currentScrollOffset:t.value,isHorizontal:f.value}))}})})}const y=A(!1);let T=0,V=0;function R(a){const i=f.value?"clientX":"clientY";V=(c.value&&f.value?-1:1)*t.value,T=a.touches[0][i],y.value=!0}function L(a){if(!l.value)return;const i=f.value?"clientX":"clientY",_=c.value&&f.value?-1:1;t.value=_*(V+T-a.touches[0][i])}function w(a){const i=m.value-r.value;t.value<0||!l.value?t.value=0:t.value>=i&&(t.value=i),y.value=!1}function U(){p.value&&(p.value[f.value?"scrollLeft":"scrollTop"]=0)}const I=A(!1);function k(a){if(I.value=!0,!(!l.value||!b.value)){for(const i of a.composedPath())for(const _ of b.value.children)if(_===i){t.value=be({selectedElement:_,containerSize:r.value,contentSize:m.value,isRtl:c.value,currentScrollOffset:t.value,isHorizontal:f.value});return}}}function N(a){I.value=!1}function te(a){var i;!I.value&&!(a.relatedTarget&&((i=b.value)!=null&&i.contains(a.relatedTarget)))&&g()}function W(a){b.value&&(f.value?a.key==="ArrowRight"?g(c.value?"prev":"next"):a.key==="ArrowLeft"&&g(c.value?"next":"prev"):a.key==="ArrowDown"?g("next"):a.key==="ArrowUp"&&g("prev"),a.key==="Home"?g("first"):a.key==="End"&&g("last"))}function g(a){var i,_,le,ne,oe;if(b.value)if(!a)(i=qe(b.value)[0])==null||i.focus();else if(a==="next"){const E=(_=b.value.querySelector(":focus"))==null?void 0:_.nextElementSibling;E?E.focus():g("first")}else if(a==="prev"){const E=(le=b.value.querySelector(":focus"))==null?void 0:le.previousElementSibling;E?E.focus():g("last")}else a==="first"?(ne=b.value.firstElementChild)==null||ne.focus():a==="last"&&((oe=b.value.lastElementChild)==null||oe.focus())}function O(a){const i=t.value+(a==="prev"?-1:1)*r.value;t.value=Xe(i,0,m.value-r.value)}const ke=x(()=>{let a=t.value>m.value-r.value?-(m.value-r.value)+me(m.value-r.value-t.value):-t.value;t.value<=0&&(a=me(-t.value));const i=c.value&&f.value?-1:1;return{transform:`translate${f.value?"X":"Y"}(${i*a}px)`,transition:y.value?"none":"",willChange:y.value?"transform":""}}),q=x(()=>({next:s.next,prev:s.prev,select:s.select,isSelected:s.isSelected})),X=x(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!d.value;case!0:return l.value||Math.abs(t.value)>0;case"mobile":return d.value||l.value||Math.abs(t.value)>0;default:return!d.value&&(l.value||Math.abs(t.value)>0)}}),ae=x(()=>Math.abs(t.value)>0),se=x(()=>m.value>Math.abs(t.value)+r.value);return ee(()=>u(e.tag,{class:["v-slide-group",{"v-slide-group--vertical":!f.value,"v-slide-group--has-affixes":X.value,"v-slide-group--is-overflowing":l.value},v.value,e.class],style:e.style,tabindex:I.value||s.selected.value.length?-1:0,onFocus:te},{default:()=>{var a,i,_;return[X.value&&u("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!ae.value}],onClick:()=>ae.value&&O("prev")},[((a=n.prev)==null?void 0:a.call(n,q.value))??u(de,null,{default:()=>[u(j,{icon:c.value?e.nextIcon:e.prevIcon},null)]})]),u("div",{key:"container",ref:p,class:"v-slide-group__container",onScroll:U},[u("div",{ref:b,class:"v-slide-group__content",style:ke.value,onTouchstartPassive:R,onTouchmovePassive:L,onTouchendPassive:w,onFocusin:k,onFocusout:N,onKeydown:W},[(i=n.default)==null?void 0:i.call(n,q.value)])]),X.value&&u("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!se.value}],onClick:()=>se.value&&O("next")},[((_=n.next)==null?void 0:_.call(n,q.value))??u(de,null,{default:()=>[u(j,{icon:c.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:s.selected,scrollTo:O,scrollOffset:t,focus:g}}});function xt(e){return e?e.map(o=>et(o)?o:{text:o,value:o}):[]}const Tt=Q({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...we({mandatory:"force"}),...Ye(),...Se()},"VTabs"),wt=Z()({name:"VTabs",props:Tt(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:n}=o;const c=je(e,"modelValue"),v=x(()=>xt(e.items)),{densityClasses:d}=Ke(e),{backgroundColorClasses:s,backgroundColorStyles:l}=Je(z(e,"bgColor"));return Qe({VTab:{color:z(e,"color"),direction:z(e,"direction"),stacked:z(e,"stacked"),fixed:z(e,"fixedTabs"),sliderColor:z(e,"sliderColor"),hideSlider:z(e,"hideSlider")}}),ee(()=>{const t=pe.filterProps(e);return u(pe,J(t,{modelValue:c.value,"onUpdate:modelValue":r=>c.value=r,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},d.value,s.value,e.class],style:[{"--v-tabs-height":Ze(e.height)},l.value,e.style],role:"tablist",symbol:xe}),{default:()=>[n.default?n.default():v.value.map(r=>u(Te,J(r,{key:r.text}),null))]})}),{}}}),kt={name:"AdminTabs",data(){return{activeTab:"Libraries",tabs:["Users","Groups","Libraries","Flags","Tasks","Stats"]}},computed:{...ye(ve,["librariesExist"])},watch:{$route(e){const n=e.path.split("/").at(-1);this.activeTab=ct(n)}},mounted(){this.librariesExist||this.loadTables(["Library"])},methods:{...tt(ve,["loadTables"])}},Ct={id:"tabContainer"},Vt={key:0,id:"noLibraries"};function zt(e,o,n,c,v,d){const s=F("router-view");return h(),$("div",Ct,[u(wt,{id:"tabs",class:Y({rightMargin:!e.$vuetify.display.mdAndDown}),centered:"",grow:"","show-arrows":""},{default:S(()=>[(h(!0),$(K,null,fe(v.tabs,l=>(h(),D(Te,{key:l,modelValue:v.activeTab,"onUpdate:modelValue":o[0]||(o[0]=t=>v.activeTab=t),to:l.toLowerCase()},{default:S(()=>[M(he(l),1)]),_:2},1032,["modelValue","to"]))),128))]),_:1},8,["class"]),u(vt,{id:"tabItems",modelValue:v.activeTab,"onUpdate:modelValue":o[1]||(o[1]=l=>v.activeTab=l),touch:!1},{default:S(()=>[(h(!0),$(K,null,fe(v.tabs,l=>(h(),D(s,{key:l},{default:S(({Component:t})=>[u(dt,{value:l,class:"tabItemContainer"},{default:S(()=>[(h(),D(at(t)))]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1},8,["modelValue"]),e.librariesExist?st("",!0):(h(),$("div",Vt," Codex has no libraries. Select the Libraries tab and add a comic library. "))])}const At=G(kt,[["render",zt],["__scopeId","data-v-03b1c9e5"]]),$t={name:"MainAdmin",components:{AdminTitleToolbar:_e,AdminTabs:At,SettingsDrawer:ge},data(){return{AdminSettingsPanel:lt(ht)}},computed:{...ye(nt,["isUserAdmin"])}},Pt={id:"adminWrapper"},Bt={key:0,id:"adminContainer"},Rt={key:1,id:"announcement"};function It(e,o,n,c,v,d){const s=_e,l=F("AdminTabs"),t=ge,r=F("router-link");return h(),$("div",Pt,[e.isUserAdmin?(h(),$("div",Bt,[u(ft,null,{default:S(()=>[u(s),u(l)]),_:1}),u(t,{title:"Admin Status",admin:!0,panel:v.AdminSettingsPanel},null,8,["panel"])])):(h(),$("div",Rt,[ot("h1",null,[u(r,{to:{name:"home"}},{default:S(()=>[M(" Log in ")]),_:1}),M(" as an Administrator to use this panel ")])]))])}const Wt=G($t,[["render",It],["__scopeId","data-v-0605704c"]]);export{Wt as default};
